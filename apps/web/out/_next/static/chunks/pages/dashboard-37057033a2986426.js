(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(517)}])},918:function(e,a,t){"use strict";t.d(a,{P:function(){return o}});var n=t(5893),s=t(7294),i=function(){for(var e,a,t=0,n="",s=arguments.length;t<s;t++)(e=arguments[t])&&(a=function e(a){var t,n,s="";if("string"==typeof a||"number"==typeof a)s+=a;else if("object"==typeof a){if(Array.isArray(a)){var i=a.length;for(t=0;t<i;t++)a[t]&&(n=e(a[t]))&&(s&&(s+=" "),s+=n)}else for(n in a)a[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=a);return n},l=t(1682),r=t.n(l);let o=(0,s.forwardRef)((e,a)=>{let{className:t,type:s,loading:l=!1,loadingText:o,disabled:c,children:d,...u}=e,m=!!l,h=m&&null!=o?o:d;return(0,n.jsx)("button",{...u,ref:a,type:null!=s?s:"button",className:i("ds-body-strong",r().retryButton,m&&r().retryButtonLoading,t),disabled:c||m,"data-loading":m||void 0,"aria-busy":!!m||void 0,children:m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{"aria-hidden":!0,className:r().retryButtonSpinner}),(0,n.jsx)("span",{className:r().retryButtonLabel,children:h})]}):h})});o.displayName="RetryButton"},517:function(e,a,t){"use strict";t.r(a),t.d(a,{buildSuggestionTelemetryHighRiskStat:function(){return eP},buildSuggestionTelemetryTopSignal:function(){return eF},default:function(){return eO}});var n,s=t(5893),i=t(9008),l=t.n(i),r=t(1664),o=t.n(r),c=t(7294),d=t(1163),u=t(2570);let m={atlas:"Atlas",claude_council:"Claude Council",director_dana:"Director Dana",security_critic:"Security Critic",research_orchestrator:"Research Orchestrator",autopilot:"Automation engine",operations_steward:"Operations Steward"},h=["critical","strategic","specialist"];function g(e){let a=h.indexOf(e);return -1===a?99:a}function _(e){return e.split(/\s+/).filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function p(e,a){let t=10**a;return Math.round((e+Number.EPSILON)*t)/t}function v(e){let a=e.trim().toLowerCase();if(!a)return"Unknown";let t=m[a];if(t)return t;let n=a.replace(/[_\W]+/g," ").trim();return n?_(n):"Unknown"}function f(e){if(null==e||!Number.isFinite(e))return"—";if(e<60)return"".concat(Math.round(e),"s");let a=e/60;return a>=120?"".concat((a/60).toFixed(1),"h"):a>=10?"".concat(Math.round(a)," min"):"".concat(a.toFixed(1)," min")}function y(e){if(null==e||!Number.isFinite(e))return"—";if(e>=1){let a=p(e,2);return"$".concat(a.toFixed(2))}if(e>=.1){let a=p(e,3);return"$".concat(a.toFixed(3))}if(e>=.01){let a=p(e,5);return"$".concat(a.toFixed(5))}let a=p(e,5);return"$".concat(a.toFixed(5))}var b=t(878),x=t.n(b);function j(e){if(!e)return"—";let a=new Date(e);return Number.isNaN(a.getTime())?"—":a.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function N(e){if(null==e||!Number.isFinite(e))return"—";let a=100*e;return a>=99.5?"100%":a<=0?"0%":"".concat(a.toFixed(1),"%")}function w(e){var a,t,n,i,l;let{workload:r,className:o,"data-testid":d}=e,u=(0,c.useMemo)(()=>[...r.quorum_profiles].sort((e,a)=>{let t="number"==typeof e.hierarchy_rank?e.hierarchy_rank:g(e.name),n="number"==typeof a.hierarchy_rank?a.hierarchy_rank:g(a.name);return t!==n?t-n:e.display_name.localeCompare(a.display_name)}).map(e=>{var a,t,n;return{name:e.name,displayName:e.display_name,participants:e.default_participants.map(v),medianDuration:f(null!==(a=e.median_duration_seconds)&&void 0!==a?a:null),p90Duration:f(null!==(t=e.p90_duration_seconds)&&void 0!==t?t:null),tokenBudget:y(null!==(n=e.token_cost_usd)&&void 0!==n?n:null),notes:e.notes}}),[r]),m=(0,c.useMemo)(()=>r.escalation_signals.map(e=>{var a;let t="—";return null!=e.threshold_seconds&&Number.isFinite(e.threshold_seconds)?t="".concat(f(e.threshold_seconds)," p90"):null!=e.threshold&&Number.isFinite(e.threshold)&&(t=">".concat(e.threshold)),{signal:e.signal,threshold:t,recommendedAction:null!==(a=e.recommended_action)&&void 0!==a?a:null}}),[r]),p=(0,c.useMemo)(()=>{var e;return e=r.decision_mix,h.map(a=>{var t;return{name:a,displayName:_(a),count:Math.max(0,Math.trunc(null!==(t=e[a])&&void 0!==t?t:0))}})},[r]),b=j(r.generated_at),w=function(e,a){if(!e&&!a)return"—";let t=e?j(e):"—",n=a?j(a):"—";return"".concat(t," → ").concat(n)}(null===(a=r.sample_window)||void 0===a?void 0:a.start,null===(t=r.sample_window)||void 0===t?void 0:t.end),S=y(null!==(l=r.token_cost_per_run_usd)&&void 0!==l?l:null),k=N(null===(n=r.execution_health)||void 0===n?void 0:n.success_rate),C=N(null===(i=r.execution_health)||void 0===i?void 0:i.error_rate);return(0,s.jsxs)("section",{className:"".concat(x().root," ds-surface ").concat(null!=o?o:"").trim(),"data-testid":d,"aria-labelledby":"consensus-summary-heading",children:[(0,s.jsxs)("header",{className:x().header,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"ds-eyebrow",children:"Consensus staffing"}),(0,s.jsx)("h2",{className:"ds-title",id:"consensus-summary-heading",children:"Hierarchical quorum health"})]}),(0,s.jsxs)("dl",{className:x().meta,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Generated"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:b})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Sampling window"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:w})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Token budget"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:S})]})]})]}),(0,s.jsxs)("div",{className:x().grid,children:[(0,s.jsxs)("section",{className:x().column,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Quorum tiers"}),(0,s.jsx)("ul",{className:x().tiers,children:u.map(e=>(0,s.jsxs)("li",{className:x().tierItem,children:[(0,s.jsxs)("div",{className:x().tierHeader,children:[(0,s.jsx)("span",{className:x().tierName,children:e.displayName}),(0,s.jsxs)("span",{className:x().tierDuration,children:["Med ",e.medianDuration," \xb7 P90 ",e.p90Duration]})]}),(0,s.jsx)("p",{className:"".concat(x().participants," ds-body"),children:e.participants.join(" \xb7 ")}),(0,s.jsxs)("p",{className:"".concat(x().tierFootnote," ds-caption"),children:["Token envelope ",e.tokenBudget,e.notes?" \xb7 ".concat(e.notes):""]})]},e.name))})]}),(0,s.jsxs)("section",{className:x().column,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Escalation signals"}),0===m.length?(0,s.jsx)("p",{className:"".concat(x().empty," ds-body"),children:"No escalation triggers observed."}):(0,s.jsx)("ul",{className:x().signals,children:m.map(e=>(0,s.jsxs)("li",{className:x().signalItem,children:[(0,s.jsx)("span",{className:x().signalName,children:e.signal}),(0,s.jsx)("span",{className:x().signalThreshold,children:e.threshold}),e.recommendedAction?(0,s.jsx)("p",{className:"".concat(x().signalAction," ds-caption"),children:e.recommendedAction}):null]},e.signal))})]}),(0,s.jsxs)("section",{className:x().column,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Decision mix"}),(0,s.jsx)("ul",{className:x().decisionMix,children:p.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:x().decisionLabel,children:e.displayName}),(0,s.jsx)("span",{className:x().decisionValue,children:e.count})]},e.name))}),(0,s.jsxs)("dl",{className:x().execution,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Success rate"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:k})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Error rate"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:C})]})]})]})]})]})}function S(e){if(!e)return null;let a=new Date(e);return Number.isNaN(a.getTime())?null:a}function k(e){let a=e?S(e):null;return a?a.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—"}var C=t(7667),T=t.n(C);function D(e){let{metrics:a,className:t,"data-testid":n}=e,i=(0,c.useMemo)(()=>(function(e){var a,t,n,s,i,l,r,o,c,d,u,m,h;let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return{updatedLabel:k(e.updated_at),totalDecisions:e.total_decisions,decisionTypes:Object.entries(e.by_type).map(e=>{let[a,t]=e;return{type:a,count:Number.isFinite(t)?Math.max(0,Math.trunc(t)):0}}).sort((e,a)=>a.count-e.count||e.type.localeCompare(a.type)),history:function(e,a){var t;let n=null!==(t=null==a?void 0:a.limit)&&void 0!==t?t:5;return[...e].sort((e,a)=>{let t=S(e.timestamp),n=S(a.timestamp);return t&&n?n.getTime()-t.getTime():t?-1:n?1:0}).slice(0,n).map(e=>{var a,t;let n=k(e.timestamp),s=e.participants.map(v).join(" \xb7 ")||"—",i=f(null!==(a=e.duration_seconds)&&void 0!==a?a:null),l=y(null!==(t=e.token_cost_usd)&&void 0!==t?t:null);return{id:e.id,taskId:e.task_id,type:e.type,timestamp:e.timestamp,timestampLabel:n,participantsLabel:s,durationLabel:i,tokenCostLabel:l,quorumSatisfied:e.quorum_satisfied}})}(e.history,{limit:g}),profiles:(r=null!==(t=e.staffing_guidance)&&void 0!==t?t:null)?Object.entries(null!==(o=r.profiles)&&void 0!==o?o:{}).map(e=>{var a,t,n,s;let[i,l]=e;return{name:i,participantsLabel:(null!==(a=l.default_participants)&&void 0!==a?a:[]).map(v).join(" \xb7 ")||"—",medianDurationLabel:f(null!==(t=l.median_duration_seconds)&&void 0!==t?t:null),p90DurationLabel:f(null!==(n=l.p90_duration_seconds)&&void 0!==n?n:null),notes:null!==(s=l.notes)&&void 0!==s?s:null}}).sort((e,a)=>e.name.localeCompare(a.name)):[],tokenBudgets:(c=null!==(n=e.staffing_guidance)&&void 0!==n?n:null)?Object.entries(null!==(d=c.token_budget_usd)&&void 0!==d?d:{}).map(e=>{let[a,t]=e;return{name:a,label:y(null!=t?t:null)}}):[],signals:(u=null!==(s=e.staffing_guidance)&&void 0!==s?s:null)?(null!==(h=null===(m=u.escalation_triggers)||void 0===m?void 0:m.signals)&&void 0!==h?h:[]).map(e=>{var a;return{signal:e.signal,thresholdLabel:e.threshold_seconds?"".concat(f(e.threshold_seconds)," threshold"):"—",observedLabel:null!=e.observed_value&&Number.isFinite(e.observed_value)?e.observed_value>=1e3?e.observed_value.toFixed(0):e.observed_value>=10?e.observed_value.toFixed(1):e.observed_value.toFixed(2):"—",recommendedAction:null!==(a=e.recommended_action)&&void 0!==a?a:null}}):[],sampleWindow:null!==(i=null===(a=e.staffing_guidance)||void 0===a?void 0:a.sample_window)&&void 0!==i?i:null,criticPerformance:function(e){var a,t,n,s,i,l,r,o,c;if(!e)return null;let d=k(null!==(i=null===(a=e.summary)||void 0===a?void 0:a.last_updated)&&void 0!==i?i:null),u=(null!==(l=e.critics)&&void 0!==l?l:[]).map(e=>{var a,t,n,s;return{critic:e.critic,title:null!==(a=e.title)&&void 0!==a?a:null,domain:null!==(t=e.domain)&&void 0!==t?t:null,passed:!!e.passed,statusLabel:e.passed?"Passing":null!=e.exit_code?"Failing (exit ".concat(e.exit_code,")"):"Failing",summary:null!==(n=e.summary)&&void 0!==n?n:null,timestampLabel:k(null!==(s=e.timestamp)&&void 0!==s?s:null)}});return{total:null!==(r=null===(t=e.summary)||void 0===t?void 0:t.total)&&void 0!==r?r:u.length,passing:null!==(o=null===(n=e.summary)||void 0===n?void 0:n.passing)&&void 0!==o?o:u.filter(e=>e.passed).length,failing:null!==(c=null===(s=e.summary)||void 0===s?void 0:s.failing)&&void 0!==c?c:u.filter(e=>!e.passed).length,updatedLabel:d,critics:u}}(null!==(l=e.critic_performance)&&void 0!==l?l:null)}})(a,6),[a]),l=(0,c.useMemo)(()=>(function(e){var a,t;let n=(null===(a=e.sampleWindow)||void 0===a?void 0:a.start)?k(e.sampleWindow.start):"—",s=(null===(t=e.sampleWindow)||void 0===t?void 0:t.end)?k(e.sampleWindow.end):"—";return"—"===n&&"—"===s?"—":"".concat(n," → ").concat(s)})(i),[i]);return(0,s.jsxs)("section",{className:"".concat(T().root," ds-surface ").concat(null!=t?t:"").trim(),"data-testid":n,children:[(0,s.jsxs)("header",{className:T().header,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"ds-eyebrow",children:"Dynamic staffing telemetry"}),(0,s.jsx)("h2",{className:"ds-title",children:"Consensus execution history"})]}),(0,s.jsxs)("dl",{className:T().meta,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Updated"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:i.updatedLabel})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Lookback window"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Total decisions"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:i.totalDecisions})]})]})]}),(0,s.jsxs)("div",{className:T().grid,children:[(0,s.jsxs)("section",{className:T().summaryColumn,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Decision mix"}),0===i.decisionTypes.length?(0,s.jsx)("p",{className:"ds-body",children:"No consensus decisions recorded yet."}):(0,s.jsx)("ul",{className:T().decisionList,children:i.decisionTypes.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:T().decisionType,children:e.type}),(0,s.jsx)("span",{className:T().decisionCount,children:e.count})]},e.type))}),(0,s.jsx)("h3",{className:"ds-label-strong",children:"Token budget (USD)"}),0===i.tokenBudgets.length?(0,s.jsx)("p",{className:"ds-body",children:"No token guidance published."}):(0,s.jsx)("ul",{className:T().tokenList,children:i.tokenBudgets.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:T().tokenName,children:e.name}),(0,s.jsx)("span",{className:T().tokenValue,children:e.label})]},e.name))}),(0,s.jsx)("h3",{className:"ds-label-strong",children:"Critic performance"}),i.criticPerformance?0===i.criticPerformance.total?(0,s.jsx)("p",{className:"ds-body",children:"No critic runs captured for this window."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("dl",{className:T().criticSummary,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Passing"}),(0,s.jsxs)("dd",{className:"".concat(T().criticStat," ds-body-strong"),"data-status":"passing",children:[i.criticPerformance.passing," / ",i.criticPerformance.total]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Failing"}),(0,s.jsx)("dd",{className:"".concat(T().criticStat," ds-body-strong"),"data-status":"failing",children:i.criticPerformance.failing})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Updated"}),(0,s.jsx)("dd",{className:"ds-body-strong",children:i.criticPerformance.updatedLabel})]})]}),(0,s.jsx)("ul",{className:T().criticList,children:i.criticPerformance.critics.map(e=>(0,s.jsxs)("li",{className:T().criticItem,children:[(0,s.jsxs)("header",{className:T().criticHeader,children:[(0,s.jsxs)("div",{className:T().criticIdentity,children:[(0,s.jsx)("span",{className:T().criticName,children:e.critic}),e.title?(0,s.jsx)("span",{className:T().criticTitle,children:e.title}):null]}),(0,s.jsx)("span",{className:T().criticStatus,"data-status":e.passed?"passing":"failing",children:e.statusLabel})]}),e.summary?(0,s.jsx)("p",{className:"".concat(T().criticSummaryText," ds-caption"),children:e.summary}):null,(0,s.jsxs)("footer",{className:T().criticFooter,children:[(0,s.jsx)("span",{className:"ds-caption",children:e.timestampLabel}),e.domain?(0,s.jsx)("span",{className:"ds-caption",children:e.domain}):null]})]},e.critic))})]}):(0,s.jsx)("p",{className:"ds-body",children:"No critic telemetry recorded."})]}),(0,s.jsxs)("section",{className:T().historyColumn,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Latest decisions"}),0===i.history.length?(0,s.jsx)("p",{className:"ds-body",children:"Telemetry recorder has not captured decisions yet."}):(0,s.jsx)("ol",{className:T().historyList,children:i.history.map(e=>(0,s.jsxs)("li",{className:T().historyItem,children:[(0,s.jsxs)("header",{className:T().historyHeader,children:[(0,s.jsx)("span",{className:T().historyType,children:e.type}),(0,s.jsx)("span",{className:T().historyTimestamp,children:e.timestampLabel})]}),(0,s.jsxs)("dl",{className:T().historyMeta,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Participants"}),(0,s.jsx)("dd",{className:"ds-body",children:e.participantsLabel})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Duration"}),(0,s.jsx)("dd",{className:"ds-body",children:e.durationLabel})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Token cost"}),(0,s.jsx)("dd",{className:"ds-body",children:e.tokenCostLabel})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Quorum"}),(0,s.jsx)("dd",{className:"".concat(T().historyStatus," ds-body"),"data-status":e.quorumSatisfied?"met":"escalated",children:e.quorumSatisfied?"Met":"Escalated"})]})]})]},e.id))})]}),(0,s.jsxs)("section",{className:T().guidanceColumn,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Staffing guidance"}),0===i.profiles.length?(0,s.jsx)("p",{className:"ds-body",children:"No staffing profiles published."}):(0,s.jsx)("ul",{className:T().profileList,children:i.profiles.map(e=>(0,s.jsxs)("li",{className:T().profileItem,children:[(0,s.jsxs)("header",{className:T().profileHeader,children:[(0,s.jsx)("span",{className:T().profileName,children:e.name}),(0,s.jsxs)("span",{className:T().profileDurations,children:["Med ",e.medianDurationLabel," \xb7 P90 ",e.p90DurationLabel]})]}),(0,s.jsx)("p",{className:"".concat(T().profileParticipants," ds-body"),children:e.participantsLabel}),e.notes?(0,s.jsx)("p",{className:"ds-caption",children:e.notes}):null]},e.name))}),(0,s.jsx)("h3",{className:"ds-label-strong",children:"Escalation signals"}),0===i.signals.length?(0,s.jsx)("p",{className:"ds-body",children:"No live escalation signals recorded."}):(0,s.jsx)("ul",{className:T().signalList,children:i.signals.map(e=>(0,s.jsxs)("li",{className:T().signalItem,children:[(0,s.jsxs)("header",{className:T().signalHeader,children:[(0,s.jsx)("span",{className:T().signalName,children:e.signal}),(0,s.jsx)("span",{className:T().signalThreshold,children:e.thresholdLabel})]}),(0,s.jsxs)("p",{className:"ds-caption",children:["Observed: ",e.observedLabel]}),e.recommendedAction?(0,s.jsx)("p",{className:"".concat(T().signalAction," ds-caption"),children:e.recommendedAction}):null]},e.signal))})]})]})]})}var M=t(918),A=t(5374),L=t.n(A),R=t(6091);let E=["sales","spend","weather"],F=e=>!Number.isFinite(e)||e<0?0:e>1?1:e,P=e=>{if(!e)return null;let a=new Date(e);return Number.isNaN(a.getTime())?null:a.toISOString()},I=e=>e?e.includes("T")?P(e):P("".concat(e,"T00:00:00Z")):null,B=e=>{let a=new Set,t=[];return e.forEach(e=>{let n=e.trim();!n||a.has(n)||(a.add(n),t.push(n))}),t},V=e=>{let a=E.indexOf(e.toLowerCase());return -1===a?E.length:a};function O(e){var a;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e.length)return{nextEvent:null,highRiskCount:0};let n=e.map(e=>({original:e,start:new Date(e.starts_at)})).filter(e=>{let{start:a}=e;return!Number.isNaN(a.getTime())}).sort((e,a)=>e.start.getTime()-a.start.getTime()),s=t.getTime(),i=null!==(a=n.find(e=>{let{start:a}=e;return a.getTime()>=s}))&&void 0!==a?a:n[n.length-1],l=e.filter(e=>"high"===e.severity).length;return{nextEvent:i.original,highRiskCount:l}}let H={high:3,medium:2,low:1},G=new Set(["all","all regions","all markets","any","any region","global","*"]);function z(e){let a=(null!=e?e:"").replace(/\s+/g," ").trim();return a.length?a:"Unspecified region"}function W(e){if(null==e)return null;let a="string"==typeof e?e.trim():"";if(!a.length)return null;let t=z(a),n=t.toLowerCase();return G.has(n)?null:t}let U=new Map;function q(e){let a=z(e).toLowerCase(),t=U.get(a);if(t)return t;let n=a.replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/-{2,}/g,"-"),s=n.length?n:"unspecified-region";return U.set(a,s),s}function K(e,a){var t;if(!e)return"unknown";let n="string"==typeof e?new Date(e):e instanceof Date?e:null;if(!n||Number.isNaN(n.getTime()))return"unknown";let s=(null!==(t=null==a?void 0:a.now)&&void 0!==t?t:new Date).getTime()-n.getTime(),i=s<0,l=Math.round(Math.abs(s)/6e4);if(l<1)return"just now";if(1===l)return i?"in 1 minute":"1 minute ago";if(l<60)return i?"in ".concat(l," minutes"):"".concat(l," minutes ago");let r=Math.round(l/60);if(1===r)return i?"in 1 hour":"1 hour ago";if(r<24)return i?"in ".concat(r," hours"):"".concat(r," hours ago");let o=Math.round(r/24);return 1===o?i?"in 1 day":"1 day ago":i?"in ".concat(o," days"):"".concat(o," days ago")}function Z(e,a){let t=1===e.eventCount?"1 event":"".concat(e.eventCount," events"),n=0===e.highRiskCount?"No high-risk alerts":"".concat(e.highRiskCount," high-risk alert").concat(1===e.highRiskCount?"":"s"),s="No upcoming events scheduled";return e.nextEventStartsAt&&(s="Next starts ".concat(K(e.nextEventStartsAt,{now:null==a?void 0:a.now}))),"".concat(t," \xb7 ").concat(n," \xb7 ").concat(s)}let X=Object.freeze({critical:0,warning:1,info:2});function Q(e){return Array.isArray(e)&&0!==e.length?[...e].sort((e,a)=>{var t,n;let s=(null!==(t=X[e.severity])&&void 0!==t?t:3)-(null!==(n=X[a.severity])&&void 0!==n?n:3);return 0!==s?s:Math.abs(a.spend_delta)-Math.abs(e.spend_delta)}):[]}let Y=Object.freeze({binding_min_spend:"Global minimum spend",binding_max_spend:"Global maximum spend",binding_min_spend_by_cell:"Per-market minimums",binding_max_spend_by_cell:"Per-market maximums",binding_roas_floor:"ROAS floor",binding_learning_cap:"Learning cap"}),J=Object.freeze(Object.keys(Y)),$=Object.freeze({coordinate_ascent:"Coordinate ascent",projected_gradient:"Projected gradient",trust_constr:"Trust-constr",differential_evolution:"Differential evolution",fallback:"Fallback"});function ee(e){if("string"!=typeof e)return"";let a=e.replace(/[|_/.-]+/g," ").replace(/\s+/g," ").trim();return a?a.split(" ").map(e=>{if(!e)return"";let a=e.toUpperCase();return a.length<=3||/^[A-Z0-9]+$/.test(e)?a:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).filter(Boolean).join(" "):""}function ea(e){return null!=e&&Number.isFinite(e)?e>0?"positive":e<0?"negative":"neutral":"neutral"}let et=new Intl.NumberFormat("en-US");function en(e){return Number.isFinite(e)?et.format(Math.max(0,Math.round(e))):"0"}function es(e,a){let t=function(e,a){let t="critical"===e||"elevated"===e||"none"===e?e:"none",n="number"==typeof a&&Number.isFinite(a)?Math.max(0,Math.round(a)):0;return"critical"===t?{severity:"critical",safeCount:n,badgeLabel:"Critical risk",hasBadge:!0}:"elevated"===t?{severity:"elevated",safeCount:n,badgeLabel:"Elevated risk",hasBadge:!0}:{severity:"none",safeCount:n,badgeLabel:null,hasBadge:!1}}(e,a),n=t.safeCount>0?"".concat(en(t.safeCount)," ").concat(1===t.safeCount?"high-risk alert":"high-risk alerts"):null;if(!t.hasBadge||!t.badgeLabel)return t.safeCount>0&&n?{badge:null,detail:"".concat(n," logged"),severity:"none",count:t.safeCount,countLabel:n}:{badge:null,detail:"No high-risk alerts logged",severity:"none",count:t.safeCount,countLabel:n};let s=1===t.safeCount?"alert":"alerts";return{badge:t.badgeLabel,detail:"".concat(t.badgeLabel," \xb7 ").concat(en(t.safeCount)," ").concat(s),severity:t.severity,count:t.safeCount,countLabel:n}}function ei(e){if("string"!=typeof e)return null;let a=e.trim();return a.length>0?a:null}function el(e){let a=ei(e);return a&&("healthy"===a||"watch"===a||"breach"===a)?a:"unknown"}function er(e){let a=ei(e);return a&&("dense"===a||"stacked"===a)?a:"unknown"}function eo(e){if(!e)return Number.NEGATIVE_INFINITY;let a=new Date(e).getTime();return Number.isFinite(a)?a:Number.NEGATIVE_INFINITY}function ec(e){return!Number.isFinite(e)||e<=0?0:e}function ed(e){return"number"==typeof e&&Number.isFinite(e)?e<0?0:e:null}function eu(e,a){if(!Number.isFinite(e)||!Number.isFinite(a)||a<=0)return 0;let t=e/a;return!Number.isFinite(t)||t<=0?0:Math.min(1,Math.max(0,t))}function em(e){return"number"==typeof e&&Number.isFinite(e)?e<=0?0:e>=1?1:e:null}function eh(e){return!Number.isFinite(e)||e<1?"none":e>=3?"critical":"elevated"}function eg(e,a){return e<=0?a>=6?{level:"medium",label:"Directional signal \xb7 ".concat(a," interactions")}:a>0?{level:"low",label:"Low sample \xb7 ".concat(a," interactions")}:{level:"low",label:"No direct views yet"}:e>=60||a>=20?{level:"high",label:"High confidence \xb7 ".concat(e," views")}:e>=20||a>=6?{level:"medium",label:"Directional signal \xb7 ".concat(e," views")}:{level:"low",label:"Low sample \xb7 ".concat(e," views")}}function e_(e,a){var t;if(!e||0===e.length)return[];let n=null!==(t=null==a?void 0:a.limit)&&void 0!==t?t:3;return e.filter(e=>ei(e.region)).map(e=>{var a,t,n,s,i,l,r,o;let c=null!==(a=e.metadata)&&void 0!==a?a:{},d=null!==(t=ei(e.reason))&&void 0!==t?t:e.reason,u=null!==(s=null!==(n=ei(c.regionSummary))&&void 0!==n?n:ei(c.suggestionSummary))&&void 0!==s?s:d,m=null!==(i=ei(e.region))&&void 0!==i?i:e.region,h=ec(e.view_count),g=ec(e.focus_count),_=ec(e.dismiss_count),p=ec(e.high_risk_count),v=g+_,f=em(e.focus_rate),y=em(e.dismiss_rate),b=em(e.engagement_rate),x=eg(h,v),j=eh(p),N=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];let n=[],s=new Set,i=e=>{if("string"!=typeof e)return;let a=e.trim();if(!a.length)return;let t=a.replace(/\s+/g," "),i=t.toLowerCase();s.has(i)||(s.add(i),n.push(t))};return a.forEach(e=>{if(Array.isArray(e)){e.forEach(i);return}i(e)}),n}(e.tenants,c.tenants,c.primaryTenant,c.primary_tenant);return{signature:e.signature,region:m,summary:u,reason:d,guardrailStatus:el(c.guardrailStatus),tenantMode:function(e){let a=ei(e);return a&&("demo"===a||"live"===a)?a:"unknown"}(c.tenantMode),layoutVariant:er(c.layoutVariant),ctaShown:function(e){if("boolean"==typeof e)return e;if("string"==typeof e){let a=e.trim().toLowerCase();return"true"===a||"1"===a||"yes"===a}return!!e}(c.ctaShown),tenantCount:N.length,tenantNames:N,viewCount:h,focusCount:g,dismissCount:_,highRiskCount:p,eventCount:e.event_count,highRiskSeverity:j,firstOccurredAt:null!==(l=e.first_occurred_at)&&void 0!==l?l:null,lastOccurredAt:null!==(r=e.last_occurred_at)&&void 0!==r?r:null,nextEventStartsAt:null!==(o=e.next_event_starts_at)&&void 0!==o?o:null,focusRate:null!=f?f:eu(g,h),dismissRate:null!=y?y:eu(_,h),engagementRate:null!=b?b:eu(v,h),engagementConfidenceLevel:x.level,engagementConfidenceLabel:x.label}}).sort((e,a)=>{let t=eo(a.lastOccurredAt)-eo(e.lastOccurredAt);return 0!==t?t:a.viewCount-e.viewCount}).slice(0,Math.max(0,n))}function ep(e){var a;let t=ev(e.nextEventStartsAt);return[e.region,e.reason,null!==(a=t.nextEventStartsAt)&&void 0!==a?a:"",e.highRiskCount,e.eventCount].join("|")}function ev(e){if(!e)return{nextEventStartsAt:null,hasScheduledStart:!1};let a=e.trim();return!a||Number.isNaN(Date.parse(a))?{nextEventStartsAt:null,hasScheduledStart:!1}:{nextEventStartsAt:a,hasScheduledStart:!0}}function ef(e){return"mobile"===e?"mobile":"tablet"===e?"tablet":"desktop"===e?"desktop":"unknown"}function ey(e,a){var t,n;let s=ev(e.nextEventStartsAt),i=ef(null==a?void 0:a.viewportBreakpoint),l=function(e,a,t){var n,s,i;let l="mobile"===a?"stacked":"dense";if(!t)return{layoutVariant:l,ctaShown:!1,regionSlug:q(e.region),signature:ep(e),suggestionSummary:e.summary,regionSummary:null!==(n=e.summary)&&void 0!==n?n:null};let r={...t};r.layoutVariant="dense"===t.layoutVariant||"stacked"===t.layoutVariant?t.layoutVariant:l,r.ctaShown=!!t.ctaShown,r.regionSlug="string"==typeof t.regionSlug&&t.regionSlug.trim()?t.regionSlug:q(e.region);let o="string"==typeof t.signature?t.signature.trim():"";return r.signature=o||ep(e),void 0===r.suggestionSummary&&(r.suggestionSummary=e.summary),null==r.regionSummary&&(r.regionSummary=null!==(i=null!==(s=r.suggestionSummary)&&void 0!==s?s:e.summary)&&void 0!==i?i:null),r}(e,i,null!==(t=null==a?void 0:a.metadata)&&void 0!==t?t:null);return{region:e.region,severity:null!==(n=e.severity)&&void 0!==n?n:"unknown",highRiskCount:e.highRiskCount,eventCount:e.eventCount,nextEventStartsAt:s.nextEventStartsAt,hasScheduledStart:s.hasScheduledStart,reason:e.reason,viewportBreakpoint:i,metadata:l}}function eb(e,a){return{event:"dashboard.weather_focus.suggestion.view",payload:ey(e,a)}}function ex(e,a){return{event:"dashboard.weather_focus.suggestion.focus",payload:ey(e,a)}}function ej(e,a){return{event:"dashboard.weather_focus.suggestion.dismiss",payload:ey(e,a)}}function eN(e){return e.toISOString()}function ew(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,a=new Date(e);a.setMilliseconds(0);let t=new Date(a);t.setHours(0,0,0,0);let n=Array.from({length:12},(e,a)=>a),s=n.map(e=>92+3*Math.sin(e/2)),i=eN(t).slice(0,10);return{tenant_id:"demo-tenant",generated_at:eN(a),guardrails:[{name:"Budget adherence",status:"healthy",value:94.2,target:90,unit:"pct",delta_pct:2.4,notes:"Daily cap holding steady across channels."},{name:"ROAS floor",status:"watch",value:3.1,target:3,unit:"ratio",delta_pct:-.8,notes:"Meta creative fatigue pushing ROAS towards floor."},{name:"CPA ceiling",status:"breach",value:54.5,target:50,unit:"usd",delta_pct:6.9,notes:"Automation engine paused for Apparel South due to storm drag."}],spend_trackers:[{name:"Meta Spend",channel:"Paid Social",value:42500,change_pct:5.2,target:43e3,unit:"usd",sparkline:s},{name:"Google Revenue",channel:"Paid Search",value:132e3,change_pct:3.6,target:128e3,unit:"usd",sparkline:n.map(e=>98+4*Math.sin(e/1.7))},{name:"Email Contribution",channel:"Lifecycle",value:24e3,change_pct:-1.5,target:23500,unit:"usd",sparkline:n.map(e=>88+2.5*Math.sin(e/1.3))}],weather_events:[{id:"storm-midwest",title:"Severe storm window",description:"Cold front with hail risk across Chicago and Detroit markets.",severity:"high",geo_region:"Midwest USA",starts_at:eN(new Date(t.getTime()+216e5)),ends_at:eN(new Date(t.getTime()+648e5)),latitude:41.8781,longitude:-87.6298,weather_type:"hail"},{id:"heatwave-south",title:"Heat surge boosting demand",description:"Apparel conversions trending +12% in Austin & Dallas.",severity:"medium",geo_region:"Texas",starts_at:eN(new Date(t.getTime()-432e5)),ends_at:eN(new Date(t.getTime()+432e5)),latitude:30.2672,longitude:-97.7431,weather_type:"heatwave"},{id:"marine-layer",title:"Marine layer dampening store visits",description:"Expect slower coastal traffic until the marine layer clears.",severity:"low",geo_region:"SoCal Coast",starts_at:eN(t),ends_at:eN(new Date(t.getTime()+324e5)),latitude:34.0195,longitude:-118.4912,weather_type:"fog"}],automation:[{name:"Assist Guardrails",uptime_pct:99.4,incidents_7d:1,last_incident_at:eN(new Date(a.getTime()-504e5)),status:"normal",notes:"Operator acknowledged CPA drift within SLA."},{name:"Automation engine Execution",uptime_pct:96.8,incidents_7d:2,last_incident_at:eN(new Date(a.getTime()-216e5)),status:"degraded",notes:"Paused Apparel South while storm response recalibrates."}],data_coverage:{tenant_id:"demo-tenant",window_days:90,end_date:i,generated_at:eN(a),status:"warning",buckets:{sales:{name:"sales",status:"ok",observed_days:90,window_days:90,coverage_ratio:1,latest_date:i,sources:["storage/lake/raw/demo-tenant_shopify_orders"],issues:[],extra_metrics:{latest_created_at:i}},spend:{name:"spend",status:"warning",observed_days:82,window_days:90,coverage_ratio:.91,latest_date:i,sources:["storage/lake/raw/demo-tenant_meta_ads","storage/lake/raw/demo-tenant_google_ads"],issues:["Meta Ads missing 3 days in the trailing window."],extra_metrics:{latest_observation:i,source_count:2}},weather:{name:"weather",status:"ok",observed_days:88,window_days:90,coverage_ratio:.98,latest_date:i,sources:["experiments/features/weather_join_validation.json"],issues:[],extra_metrics:{geocoded_order_ratio:.9,missing_dates:[]}}}},ingestion:[{name:"Shopify",source:"Commerce",status:"healthy",lag_minutes:4,sla_minutes:10,last_synced_at:eN(new Date(a.getTime()-24e4)),notes:"Webhooks flowing normally."},{name:"Meta Ads",source:"Paid Social",status:"delayed",lag_minutes:28,sla_minutes:15,last_synced_at:eN(new Date(a.getTime()-168e4)),notes:"Rate limiting triggered; retry backoff active."},{name:"Google Ads",source:"Paid Search",status:"syncing",lag_minutes:12,sla_minutes:20,last_synced_at:eN(new Date(a.getTime()-72e4)),notes:"Sync resumed after nightly window."}],alerts:[{id:"alert-apparel-south",title:"CPA breach: Apparel South",detail:"Automation engine paused pushes while CPA exceeds $50 ceiling.",severity:"critical",occurred_at:eN(new Date(a.getTime()-21e5)),acknowledged:!1,escalated_to:"On-call Operator",escalated_at:eN(new Date(a.getTime()-192e4)),escalation_channel:"slack",related_objects:["campaign:apparel-south","guardrail:cpa"]},{id:"alert-meta-rate",title:"Meta rate limiting",detail:"Meta Ads connector backing off; expect refreshed metrics in 15 minutes.",severity:"warning",occurred_at:eN(new Date(a.getTime()-42e5)),acknowledged:!0,acknowledged_at:eN(new Date(a.getTime()-36e5)),escalated_to:null,related_objects:["connector:meta"]},{id:"alert-weather-brief",title:"Brief: Midwest hail window",detail:"Share scenario with Priya so promo caps adjust before storm hits.",severity:"info",occurred_at:eN(new Date(a.getTime()-72e5)),acknowledged:!1,escalated_to:null,related_objects:["scenario:midwest-hail"]}],allocator:{run_id:"allocator-demo",generated_at:eN(a),mode:"assist",total_spend:25e4,total_spend_delta:-33e3,total_spend_delta_pct:-11.6,guardrail_breaches:1,notes:["Demo allocator recommendations seeded from fallback telemetry."],recommendations:[{platform:"Meta",spend_delta:-15e3,spend_delta_pct:-12,spend_after:11e4,severity:"critical",guardrail_count:1,top_guardrail:"CPA breach detected",notes:null},{platform:"Google",spend_delta:-8e3,spend_delta_pct:-6,spend_after:14e4,severity:"warning",guardrail_count:1,top_guardrail:"Budget delta exceeds policy",notes:null},{platform:"Email",spend_delta:2e3,spend_delta_pct:5,spend_after:3e4,severity:"info",guardrail_count:0,top_guardrail:null,notes:null}]},weather_kpis:[{id:"high_risk_alerts",label:"High-risk alerts",value:2,unit:"count",delta_pct:12.5,sparkline:[1,2,3,2.5,3.5],description:"2 of 3 active weather windows carry high-risk severity."},{id:"regions_impacted",label:"Regions impacted",value:3,unit:"count",delta_pct:null,sparkline:[1,2,3],description:"Midwest, Texas, and SoCal regions reporting weather signals."},{id:"next_event_lead_time",label:"Lead time to next event",value:4,unit:"hours",delta_pct:null,sparkline:[4],description:"Next weather window begins in roughly four hours."}],suggestion_telemetry:[{signature:"Gulf Coast|High-risk weather events incoming.|2025-05-01T14:00:00Z|2|3",region:"Gulf Coast",reason:"High-risk conditions detected. Next event in 2 hours. 2 high-risk alerts in queue.",view_count:54,focus_count:19,dismiss_count:6,high_risk_count:2,event_count:3,focus_rate:19/54,dismiss_rate:6/54,engagement_rate:25/54,has_scheduled_start:!0,next_event_starts_at:eN(new Date(t.getTime()+576e5)),first_occurred_at:eN(new Date(a.getTime()-1296e5)),last_occurred_at:eN(new Date(a.getTime()-36e5)),tenants:["demo-tenant"],severities:["high"],viewport_breakpoints:["desktop","tablet"],metadata:{layoutVariant:"dense",ctaShown:!0,regionSlug:"gulf-coast",suggestionSummary:"3 events \xb7 2 high-risk alerts \xb7 Next starts in 2 hours",regionSummary:"3 events \xb7 2 high-risk alerts \xb7 Next starts in 2 hours",tenantMode:"demo",guardrailStatus:"watch",criticalAlertCount:3,signature:"Gulf Coast|High-risk weather events incoming.|2025-05-01T14:00:00Z|2|3"}},{signature:"Pacific Northwest|Monitoring heavy rain bands.|2025-05-02T08:00:00Z|1|1",region:"Pacific Northwest",reason:"Monitoring heavy rain bands; shift spend to insulated regions.",view_count:31,focus_count:11,dismiss_count:4,high_risk_count:1,event_count:1,focus_rate:11/31,dismiss_rate:4/31,engagement_rate:15/31,has_scheduled_start:!0,next_event_starts_at:eN(new Date(t.getTime()+1152e5)),first_occurred_at:eN(new Date(a.getTime()-1728e5)),last_occurred_at:eN(new Date(a.getTime()-18e6)),tenants:["demo-tenant"],severities:["medium"],viewport_breakpoints:["desktop"],metadata:{layoutVariant:"dense",ctaShown:!0,regionSlug:"pacific-northwest",suggestionSummary:"Rain bands approaching; prep reallocation.",regionSummary:"Rain bands approaching; prep reallocation.",tenantMode:"demo",guardrailStatus:"healthy",criticalAlertCount:1,signature:"Pacific Northwest|Monitoring heavy rain bands.|2025-05-02T08:00:00Z|1|1"}}],context_tags:["demo","fallback"],context_warnings:[]}}Object.freeze(["Region","Summary","Reason","High risk severity","High risk alerts","Weather events tracked","Views","Focuses","Dismisses","Focus rate","Dismiss rate","Engagement rate","Guardrail status","Tenant mode","Tenant count","Tenant sample","Layout variant","CTA shown","First occurred at","Last occurred at","Next event starts at","Engagement confidence level","Engagement confidence label"]);var eS=t(1853);let ek=null!==(n=t(3454).env.NEXT_PUBLIC_TENANT_ID)&&void 0!==n?n:"demo-tenant";function eC(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd";return Number.isFinite(e)?"usd"===a?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1e3?0:2}).format(e):"ratio"===a?"".concat(e.toFixed(2),"\xd7"):"pct"===a?"".concat(e.toFixed(1),"%"):"".concat(e):"—"}function eT(e){return Number.isFinite(e)&&0!==e?"".concat(e>0?"+":"").concat(e.toFixed(1),"%"):"\xb10%"}function eD(e){if(!Number.isFinite(e)||e<=0)return"0%";if(e>=.999)return"100%";let a=100*e;return"".concat(a.toFixed(a>=10?1:a>=1?1:2),"%")}function eM(e){let a=[L().allocatorDelta];return"positive"===e?a.push(L().allocatorDeltaPositive):"negative"===e&&a.push(L().allocatorDeltaNegative),a.join(" ")}function eA(e){let a;if(null==e||!Number.isFinite(e))return"0";let t=Math.abs(e);return a=t>=1?t.toFixed(2):t>=.01?t.toFixed(3):t>=1e-4?t.toFixed(4):t.toExponential(1),e<0?"-".concat(a):a}function eL(e){let a="".concat(e.lag_minutes," min lag"),t="SLA ".concat(e.sla_minutes," min");return"".concat(a," \xb7 ").concat(t)}function eR(e){switch(e){case"breach":return{tone:"critical",label:"Breach"};case"watch":return{tone:"caution",label:"Watch"};default:return{tone:"success",label:"Healthy"}}}function eE(e){switch(e){case"critical":return{tone:"critical",label:"Action needed"};case"warning":return{tone:"caution",label:"Review"};case"ok":return{tone:"success",label:"On track"};default:return{tone:"muted",label:"Unknown"}}}function eF(e){if(!(null==e?void 0:e.topRegion))return null;let a=[];null!==e.topEngagementRate&&a.push("Engagement ".concat(eD(e.topEngagementRate))),null!==e.topFocusRate&&a.push("Focus ".concat(eD(e.topFocusRate))),null!==e.topDismissRate&&a.push("Dismiss ".concat(eD(e.topDismissRate))),e.topHasScheduledStart&&a.push("Scheduled start");let t=[],n=e.topConfidenceLabel.trim();if(n&&t.push(n),e.topGuardrailStatus){let a=eR(e.topGuardrailStatus).label.toLowerCase();t.push("Guardrail ".concat(a))}e.topLayoutVariant&&t.push("dense"===e.topLayoutVariant?"Dense layout":"Stacked layout");let s=es(e.topHighRiskSeverity,e.topHighRiskCount);s.countLabel&&!s.badge&&t.push(s.countLabel),s.badge&&t.push(s.detail);let i=e.topEventCount;return"number"==typeof i&&i>0&&t.push("".concat(en(i)," ").concat(1===i?"event tracked":"events tracked")),t.push(...a),{region:e.topRegion,summary:e.topSummary,reason:e.topReason,meta:t.join(" \xb7 "),confidenceLevel:e.topConfidenceLevel,highRiskBadge:s.badge,highRiskDetail:s.detail,highRiskSeverity:s.severity,highRiskCount:s.count}}function eP(e){if(!e)return{value:"—",supportingText:"High-risk telemetry unavailable",badge:null,severity:"none",assistiveText:"High-risk alerts are unavailable for this time window."};let a=es(e.topHighRiskSeverity,e.topHighRiskCount),t="number"==typeof e.topHighRiskCount?en(e.topHighRiskCount):"—",n=a.detail,s=a.detail.endsWith(".")?a.detail:"".concat(a.detail,".");return{value:t,supportingText:n,badge:a.badge,severity:a.severity,assistiveText:s}}function eI(e){let{values:a,ariaLabel:t,tone:n="default"}=e;if(!a.length||a.every(e=>e===a[0]))return(0,s.jsx)("div",{className:L().sparklinePlaceholder,"aria-label":t,children:"steady"});let i=Math.min(...a),l=Math.max(...a)-i||1,r=a.map((e,t)=>{let n=t/(a.length-1||1)*120;return"".concat(n,",").concat(44-(e-i)/l*38-3)}).join(" "),o="positive"===n?L().sparklinePositive:"negative"===n?L().sparklineNegative:L().sparklineDefault;return(0,s.jsx)("svg",{className:L().sparkline,width:120,height:44,viewBox:"0 0 ".concat(120," ").concat(44),role:"img","aria-label":t,children:(0,s.jsx)("polyline",{className:o,points:r})})}function eB(e){let{events:a,selectedRegion:t,onRegionSelect:n,regionSummaries:i}=e,l=a.filter(e=>"number"==typeof e.longitude&&"number"==typeof e.latitude).map(e=>{let a=e.longitude,t=e.latitude,n=z(e.geo_region),s=q(n),l=i[n],r="Focus weather events for ".concat(n),o=l?"".concat(r,". ").concat(l):r;return{event:e,x:(a- -125)/59*100,y:(50-t)/26*100,regionLabel:n,regionSlug:s,summary:l,ariaLabel:o}});return(0,s.jsxs)("div",{className:L().mapShell,role:"region","aria-label":"Weather risk map","data-filtering":t?"true":"false","data-selected-region":null!=t?t:"",children:[(0,s.jsx)("div",{className:L().mapGradient,"aria-hidden":!0}),l.map(e=>{var a;let{event:i,x:l,y:r,regionLabel:o,regionSlug:c,summary:d,ariaLabel:u}=e,m=!!t&&o===t,h=!!t&&!m;return(0,s.jsxs)("button",{type:"button",className:[L().mapMarker,null!==(a=L()["mapMarker".concat(i.severity)])&&void 0!==a?a:"",h?L().mapMarkerDimmed:"",m?L().mapMarkerActive:""].filter(Boolean).join(" "),style:{left:"".concat(l,"%"),top:"".concat(r,"%")},"data-analytics-id":"dashboard.weather_focus.marker.".concat(c),"data-region":c,"data-selected":m?"true":"false","aria-label":u,title:null!=d?d:o,"aria-pressed":m,onClick:()=>n(o),children:[(0,s.jsx)("span",{className:L().mapMarkerDot}),(0,s.jsx)("span",{className:L().mapMarkerPulse})]},i.id)})]})}function eV(e){let{stack:a,onNavigate:t,summary:n}=e;if(!a.length)return null;let i="Guardrail health: ".concat(n.healthyCount," healthy, ").concat(n.watchCount," on watch, ").concat(n.breachCount," in breach");return(0,s.jsxs)("div",{className:L().guardrailBarContainer,children:[(0,s.jsx)("div",{role:"button",tabIndex:0,className:L().guardrailBarInteractive,onClick:t,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),t())},"data-analytics-id":"dashboard.guardrail_click","aria-label":i,children:a.map(e=>{var a;return(0,s.jsx)("span",{className:"".concat(L().guardrailBarSegment," ").concat(null!==(a=L()["guardrailBarSegment".concat(e.status)])&&void 0!==a?a:""),style:{flexGrow:Math.max(e.fraction,.05),flexBasis:0},title:"".concat(e.name,": ").concat(eT(e.deltaPct))},e.name)})}),(0,s.jsx)("ul",{className:L().guardrailBarLegend,children:a.map(e=>{var a;return(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"".concat(L().guardrailLegendDot," ").concat(null!==(a=L()["guardrailLegendDot".concat(e.status)])&&void 0!==a?a:"")}),(0,s.jsx)("span",{className:"ds-caption",children:e.name}),(0,s.jsx)("span",{className:"".concat(L().guardrailLegendDelta," ds-caption"),children:eT(e.deltaPct)})]},e.name)})})]})}function eO(){var e,a,t,n,i,r,m,h,g;let[_,p]=(0,c.useState)(null),[v,f]=(0,c.useState)(!0),[y,b]=(0,c.useState)(null),[x,j]=(0,c.useState)(null),[N,S]=(0,c.useState)(null),[k,C]=(0,c.useState)(null),[T,A]=(0,c.useState)(0),[E,G]=(0,c.useState)(null),[U,X]=(0,c.useState)(!0),[et,eo]=(0,c.useState)(null),[ec,ev]=(0,c.useState)(0),[ey,eN]=(0,c.useState)(null),[eO,eH]=(0,c.useState)(!0),[eG,ez]=(0,c.useState)(null),[eW,eU]=(0,c.useState)(0),[eq,eK]=(0,c.useState)(null),eZ=(0,c.useRef)(null),eX=(0,c.useRef)(null),eQ=(0,c.useRef)(null),eY=(0,d.useRouter)(),eJ=(0,c.useCallback)(()=>{eY.push("/plan?focus=guardrails")},[eY]),{isDemoActive:e$,activateDemo:e0}=(0,eS.F)(),e1=eY.query.demo,e2=Array.isArray(e1)?e1[0]:e1,e3=eY.isReady&&void 0!==e2&&"0"!==e2&&"false"!==e2;(0,c.useEffect)(()=>{e3&&!e$&&e0()},[e3,e$,e0]);let e5=e$||e3,e9=(0,c.useCallback)(()=>{let e=!0;f(!0);let a=new Date(Date.now()-1728e5);return(0,R.AK)(ek,{since:a}).then(a=>{e&&(p(a),b(null),j(null))}).catch(a=>{e&&(p(ew()),b(a.message||"Falling back to demo telemetry."))}).finally(()=>{e&&f(!1)}),()=>{e=!1}},[]),e4=(0,c.useCallback)(()=>{let e=!0;return X(!0),eo(null),(0,R.Mm)().then(a=>{e&&(G(a),eo(null))}).catch(a=>{var t;e&&(G(null),eo((null===(t=a.message)||void 0===t?void 0:t.trim())||"Consensus telemetry temporarily unavailable."))}).finally(()=>{e&&X(!1)}),()=>{e=!1}},[]),e8=(0,c.useCallback)(()=>{let e=!0;return eH(!0),ez(null),(0,R.aT)().then(a=>{e&&(eN(a),ez(null))}).catch(a=>{var t;e&&(eN(null),ez((null===(t=a.message)||void 0===t?void 0:t.trim())||"Staffing telemetry temporarily unavailable."))}).finally(()=>{e&&eH(!1)}),()=>{e=!1}},[]);(0,c.useEffect)(()=>{if(e5){p(ew()),f(!1),b(null),j(null);return}return e9()},[e5,e9,T]),(0,c.useEffect)(()=>e4(),[e4,ec]),(0,c.useEffect)(()=>e8(),[e8,eW]);let e6=null!==(a=null==_?void 0:_.generated_at)&&void 0!==a?a:null,e7=(0,c.useMemo)(()=>e6?new Date(e6):new Date,[e6]),ae=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.guardrails)&&void 0!==e?e:[]},[_]),aa=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.alerts)&&void 0!==e?e:[]},[_]),at=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.ingestion)&&void 0!==e?e:[]},[_]),an=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.weather_events)&&void 0!==e?e:[]},[_]),as=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.automation)&&void 0!==e?e:[]},[_]),ai=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.spend_trackers)&&void 0!==e?e:[]},[_]),al=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.context_tags)&&void 0!==e?e:[]},[_]),ar=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.context_warnings)&&void 0!==e?e:[]},[_]),ao=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.allocator)&&void 0!==e?e:null},[_]),ac=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.weather_kpis)&&void 0!==e?e:[]},[_]),ad=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.suggestion_telemetry)&&void 0!==e?e:[]},[_]),au=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.suggestion_telemetry_summary)&&void 0!==e?e:null},[_]),am=(0,c.useMemo)(()=>e_(ad,{limit:3}),[ad]),ah=(0,c.useMemo)(()=>(function(e,a){var t,n,s,i,l,r,o,c,d,u,m,h,g,_,p,v,f,y,b,x,j,N,w,S,k;let C=Array.isArray(a)?a:[],T=C.length>0?e_(C,{limit:C.length}):[],D=T.length?T.reduce((e,a)=>(e.totalSuggestions+=1,e.totalViewCount+=a.viewCount,e.totalFocusCount+=a.focusCount,e.totalDismissCount+=a.dismissCount,e),{totalSuggestions:0,totalViewCount:0,totalFocusCount:0,totalDismissCount:0}):null,M=T.length>0?T.reduce((e,a)=>!e||a.viewCount>e.viewCount||a.viewCount===e.viewCount&&(a.lastOccurredAt?Date.parse(a.lastOccurredAt):Number.NEGATIVE_INFINITY)>(e.lastOccurredAt?Date.parse(e.lastOccurredAt):Number.NEGATIVE_INFINITY)?a:e,null):null,A=null!==(n=null!==(t=ed(null==e?void 0:e.total_suggestions))&&void 0!==t?t:null==D?void 0:D.totalSuggestions)&&void 0!==n?n:0,L=null!==(i=null!==(s=ed(null==e?void 0:e.total_view_count))&&void 0!==s?s:null==D?void 0:D.totalViewCount)&&void 0!==i?i:0,R=null!==(r=null!==(l=ed(null==e?void 0:e.total_focus_count))&&void 0!==l?l:null==D?void 0:D.totalFocusCount)&&void 0!==r?r:0,E=null!==(c=null!==(o=ed(null==e?void 0:e.total_dismiss_count))&&void 0!==o?o:null==D?void 0:D.totalDismissCount)&&void 0!==c?c:0,F=R+E,P=A>0||L>0||F>0;if(!e&&!M&&!P)return null;let I="string"==typeof(null==e?void 0:e.top_region)&&""!==e.top_region.trim()?e.top_region:null!==(d=null==M?void 0:M.region)&&void 0!==d?d:null,B=M&&null!=M.summary?null!==(u=ei(M.summary))&&void 0!==u?u:M.summary:null,V=M&&null!=M.reason?null!==(m=ei(M.reason))&&void 0!==m?m:M.reason:null,O=null!==(_=null!==(g=null!==(h=ei(null==e?void 0:e.top_region_summary))&&void 0!==h?h:B)&&void 0!==g?g:V)&&void 0!==_?_:null,H=null!==(v=null!==(p=ei(null==e?void 0:e.top_reason))&&void 0!==p?p:V)&&void 0!==v?v:null,G=em(null==e?void 0:e.average_focus_rate),z=em(null==e?void 0:e.average_dismiss_rate),W=em(null==e?void 0:e.average_engagement_rate),U=null!=G?G:L>0?eu(R,L):null,q=null!=z?z:L>0?eu(E,L):null,K=null!=W?W:L>0?eu(F,L):null,Z=null!==(f=em(null==e?void 0:e.top_focus_rate))&&void 0!==f?f:M?M.focusRate:null,X=null!==(y=em(null==e?void 0:e.top_dismiss_rate))&&void 0!==y?y:M?M.dismissRate:null,Q=null!==(b=em(null==e?void 0:e.top_engagement_rate))&&void 0!==b?b:M?M.engagementRate:null,Y="boolean"==typeof(null==e?void 0:e.top_has_scheduled_start)?e.top_has_scheduled_start:M?!!M.nextEventStartsAt:null,J=el(null==e?void 0:e.top_guardrail_status),$="unknown"===J?M&&"unknown"!==M.guardrailStatus?M.guardrailStatus:null:J,ee=er(null==e?void 0:e.top_layout_variant),ea="unknown"===ee?M&&"unknown"!==M.layoutVariant?M.layoutVariant:null:ee,et=null!==(x=null==e?void 0:e.top_engagement_confidence_level)&&void 0!==x?x:null,en="string"==typeof(null==e?void 0:e.top_engagement_confidence_label)?e.top_engagement_confidence_label.trim():"",es=null!==(j=ed(null==e?void 0:e.top_view_count))&&void 0!==j?j:null,eo=null!==(N=ed(null==e?void 0:e.top_focus_count))&&void 0!==N?N:null,ec=null!==(w=ed(null==e?void 0:e.top_dismiss_count))&&void 0!==w?w:null,ep=null!==(S=ed(null==e?void 0:e.top_high_risk_count))&&void 0!==S?S:null,ev=e&&Object.prototype.hasOwnProperty.call(e,"top_high_risk_severity")?function(e){let a=ei(e);if(!a)return null;let t=a.toLowerCase();return"critical"===t||"elevated"===t||"none"===t?t:null}(e.top_high_risk_severity):null,ef=null!==(k=ed(null==e?void 0:e.top_event_count))&&void 0!==k?k:null,ey=M?M.viewCount:null,eb=M?M.focusCount:null,ex=M?M.dismissCount:null,ej=M?M.highRiskCount:null,eN=M?M.highRiskSeverity:null,ew=M?M.eventCount:null,eS=null!==es?es:ey,ek=null!==ep?ep:ej,eC=null!=ev?ev:"number"==typeof ek?eh(ek):eN;if(!P&&!en&&!et&&!M)return null;let eT=en;if(!eT||!et){let e=eg(null!=es?es:null!=ey?ey:0,(null!=eo?eo:null!=eb?eb:0)+(null!=ec?ec:null!=ex?ex:0));eT||(eT=e.label),et||(et=e.level)}return P||eT||et?{totalSuggestions:A,totalViewCount:L,totalInteractions:F,averageFocusRate:U,averageDismissRate:q,averageEngagementRate:K,topRegion:I,topSummary:O,topReason:H,topFocusRate:Z,topDismissRate:X,topEngagementRate:Q,topHasScheduledStart:Y,topGuardrailStatus:$,topLayoutVariant:ea,topViewCount:eS,topFocusCount:null!==eo?eo:eb,topDismissCount:null!==ec?ec:ex,topHighRiskCount:ek,topHighRiskSeverity:eC,topEventCount:null!==ef?ef:ew,topConfidenceLevel:et,topConfidenceLabel:eT,hasSignals:P}:null})(au,ad),[au,ad]),ag=(0,c.useMemo)(()=>eF(ah),[ah]),a_=(0,c.useMemo)(()=>eP(ah),[ah]),ap=am.length>0&&!!(null==ah?void 0:ah.hasSignals),av=(0,c.useMemo)(()=>{var e;return null!==(e=null==_?void 0:_.data_coverage)&&void 0!==e?e:null},[_]),af=(0,c.useMemo)(()=>(function(e){var a,t,n;if(!e)return null;let s=Object.entries(null!==(a=e.buckets)&&void 0!==a?a:{});s.sort((e,a)=>{let t=V(e[0]),n=V(a[0]);return t!==n?t-n:e[0].localeCompare(a[0])});let i=s.map(e=>{var a,t;let[n,s]=e,i=Array.isArray(s.issues)?B(s.issues.filter(e=>"string"==typeof e).map(e=>e.trim())):[],l=Array.isArray(s.sources)?B(s.sources.filter(e=>"string"==typeof e).map(e=>e.trim())):[],r=F(s.coverage_ratio),o=Math.max(0,s.observed_days),c=Math.max(1,s.window_days),d=null!==(a=s.extra_metrics)&&void 0!==a?a:{},u="object"==typeof d&&null!==d?d.geocoded_order_ratio:null,m="number"==typeof u&&Number.isFinite(u)?u:null;return{key:n,name:s.name||n,status:s.status,coverageRatio:r,observedDays:o,windowDays:c,missingDays:Math.max(0,c-o),latestDateRaw:null!==(t=s.latest_date)&&void 0!==t?t:null,latestDateIso:I(s.latest_date),issues:i,sources:l,geocodedRatio:m}});return{status:e.status,windowDays:Math.max(1,e.window_days),endDateRaw:null!==(t=e.end_date)&&void 0!==t?t:null,endDateIso:I(e.end_date),generatedAtRaw:null!==(n=e.generated_at)&&void 0!==n?n:null,generatedAtIso:P(e.generated_at),buckets:i}})(av),[av]),ay=(0,c.useMemo)(()=>af?eE(af.status):null,[af]),ab=null!==(t=null==af?void 0:af.buckets)&&void 0!==t?t:[],ax=ab.length>0,aj=(0,c.useMemo)(()=>(function(e){if(!e.length)return{healthyCount:0,watchCount:0,breachCount:0,averageDelta:0,overallStatus:"healthy"};let a=0,t=0,n=0,s=0;e.forEach(e=>{s+=e.delta_pct,"breach"===e.status?n+=1:"watch"===e.status?t+=1:a+=1});let i=s/e.length,l=n>0?"breach":t>0?"watch":"healthy";return{healthyCount:a,watchCount:t,breachCount:n,averageDelta:i,overallStatus:l}})(ae),[ae]),aN=(0,c.useMemo)(()=>(function(e){if(!e.length)return[];let a=e.map(e=>Math.abs(e.delta_pct)+10),t=a.reduce((e,a)=>e+a,0);if(0===t){let a=1/e.length;return e.map(e=>({name:e.name,status:e.status,fraction:a,deltaPct:e.delta_pct}))}return e.map((e,n)=>({name:e.name,status:e.status,fraction:a[n]/t,deltaPct:e.delta_pct}))})(ae),[ae]),aw=ae.length,aS=aw>0?"".concat(aj.averageDelta.toFixed(1),"%"):"—";aa.length;let ak=as.length>0,aC=ai.length>0,aT=at.length>0,aD=(0,c.useMemo)(()=>aa.reduce((e,a)=>("critical"===a.severity&&(e.critical+=1),"warning"===a.severity&&(e.warning+=1),"info"===a.severity&&(e.info+=1),a.acknowledged&&(e.acknowledged+=1),e),{critical:0,warning:0,info:0,acknowledged:0}),[aa]),aM=(0,c.useMemo)(()=>(function(e){if(!e.length)return{activeCount:0,totalEscalated:0,lastEscalatedAt:null,lastEscalatedTarget:null,lastEscalationChannel:null};let a=0,t=0,n=0,s=null,i=null;return e.forEach(e=>{if(e.escalated_to){t+=1;let o=e.escalated_at?new Date(e.escalated_at):null,c=new Date(e.occurred_at),d=o&&!Number.isNaN(o.getTime())?o.getTime():Number.isNaN(c.getTime())?0:c.getTime();if(d>n){var l,r;n=d,s=null!==(l=e.escalated_to)&&void 0!==l?l:null,i=null!==(r=e.escalation_channel)&&void 0!==r?r:null}e.acknowledged||(a+=1)}}),{activeCount:a,totalEscalated:t,lastEscalatedAt:n?new Date(n).toISOString():null,lastEscalatedTarget:s,lastEscalationChannel:i}})(aa),[aa]),aA=(0,c.useMemo)(()=>(function(e){if(!e.length)return{slowestConnector:null,averageLagMinutes:0,outOfSlaCount:0};let a=0,t=0,n=null;return e.forEach(e=>{a+=e.lag_minutes,e.lag_minutes>e.sla_minutes&&(t+=1),(!n||e.lag_minutes-e.sla_minutes>n.lag_minutes-n.sla_minutes)&&(n=e)}),{slowestConnector:n,averageLagMinutes:a/e.length,outOfSlaCount:t}})(at),[at]),aL=(0,c.useMemo)(()=>(function(e){if(!e.length)return[];let a=new Map;return e.forEach(e=>{var t,n;let s=z(e.geo_region),i=null!==(t=a.get(s))&&void 0!==t?t:{region:s,eventCount:0,highRiskCount:0,highestSeverity:null,highestSeverityWeight:0,nextEventStartsAt:null,nextEventTimestamp:null};i.eventCount+=1,"high"===e.severity&&(i.highRiskCount+=1);let l=null!==(n=H[e.severity])&&void 0!==n?n:0;if(l>i.highestSeverityWeight&&(i.highestSeverityWeight=l,i.highestSeverity=e.severity),e.starts_at){let a=new Date(e.starts_at);if(!Number.isNaN(a.getTime())){let e=a.getTime();(null===i.nextEventTimestamp||e<i.nextEventTimestamp)&&(i.nextEventTimestamp=e,i.nextEventStartsAt=a.toISOString())}}a.set(s,i)}),Array.from(a.values()).sort((e,a)=>{if(a.highestSeverityWeight!==e.highestSeverityWeight)return a.highestSeverityWeight-e.highestSeverityWeight;if(null!==e.nextEventTimestamp&&null!==a.nextEventTimestamp){if(e.nextEventTimestamp!==a.nextEventTimestamp)return e.nextEventTimestamp-a.nextEventTimestamp}else if(null!==e.nextEventTimestamp)return -1;else if(null!==a.nextEventTimestamp)return 1;return e.region.localeCompare(a.region)}).map(e=>{let{region:a,eventCount:t,highRiskCount:n,highestSeverity:s,nextEventStartsAt:i}=e;return{region:a,eventCount:t,highRiskCount:n,highestSeverity:s,nextEventStartsAt:i}})})(an),[an]),aR=(0,c.useMemo)(()=>aL.reduce((e,a)=>(e[a.region]=Z(a,{now:e7}),e),{}),[aL,e7]),aE=(0,c.useMemo)(()=>{if(!eY.isReady)return null;let e=eY.query.region;if(Array.isArray(e)){var a;return null!==(a=e[e.length-1])&&void 0!==a?a:null}return"string"==typeof e?e:null},[eY.isReady,eY.query.region]),aF=(0,c.useMemo)(()=>(function(e,a){if(!e.length)return[];let t=W(a);if(!t)return e;let n=t.toLowerCase(),s=q(t).toLowerCase();return e.filter(e=>{let a=z(e.geo_region);return a.toLowerCase()===n||q(a).toLowerCase()===s})})(an,eq),[an,eq]),aP=(0,c.useMemo)(()=>O(an,e7),[an,e7]),aI=(0,c.useMemo)(()=>O(aF,e7),[aF,e7]),aB=eq?aI:aP,aV=(0,c.useMemo)(()=>[...aF].sort((e,a)=>new Date(e.starts_at).getTime()-new Date(a.starts_at).getTime()),[aF]),aO=(0,c.useMemo)(()=>(function(e,a){if(!e.length)return[];let t=W(a),n=t?t.toLowerCase():null,s=t?q(t).toLowerCase():null;return e.map(e=>{let a=z(e.geo_region),t=a.toLowerCase(),i=q(a);return{event:e,regionLabel:a,regionSlug:i,isActive:!!n&&(t===n||null!==s&&i===s)}})})(aV,eq),[aV,eq]),aH=an.length,aG=(0,c.useMemo)(()=>{let e=1===aH?"1 event":"".concat(aH," events"),a=0===aP.highRiskCount?"No high-risk alerts":"".concat(aP.highRiskCount," high-risk alert").concat(1===aP.highRiskCount?"":"s"),t=aP.nextEvent?"Next starts ".concat(K(aP.nextEvent.starts_at,{now:e7})):"No upcoming events scheduled";return"".concat(e," \xb7 ").concat(a," \xb7 ").concat(t)},[aH,aP,e7]),az=null!==eq,aW=(0,c.useCallback)((e,a)=>(function(e){var a,t,n;let s=ef(e.viewportBreakpoint),i=ep(e.suggestion),l={layoutVariant:"mobile"===s?"stacked":"dense",ctaShown:!e.isRegionFiltering,regionSlug:q(e.suggestion.region),signature:i,suggestionSummary:e.suggestion.summary,regionSummary:null!==(t=null!==(a=e.regionSummaries[e.suggestion.region])&&void 0!==a?a:e.suggestion.summary)&&void 0!==t?t:null,tenantMode:e.isDemoMode?"demo":"live",guardrailStatus:e.guardrailStatus,criticalAlertCount:e.criticalAlertCount},r=null!==(n=e.previousMetadata)&&void 0!==n?n:null;return r&&r.signature===i?{...r,...l,ctaShown:r.ctaShown||l.ctaShown}:l})({suggestion:e,viewportBreakpoint:a,isRegionFiltering:az,regionSummaries:aR,isDemoMode:e5,guardrailStatus:aj.overallStatus,criticalAlertCount:aD.critical,previousMetadata:eQ.current}),[az,aR,e5,aj.overallStatus,aD.critical]),aU=(0,c.useMemo)(()=>{var e;return eq&&null!==(e=aR[eq])&&void 0!==e?e:null},[eq,aR]),aq=(0,c.useMemo)(()=>az?null:function(e,a){var t,n;if(!e.length)return null;let s=e.filter(e=>"unspecified region"!==e.region.trim().toLowerCase()),i=s.length?s:e,l=null!==(t=null==a?void 0:a.now)&&void 0!==t?t:new Date,r=l.getTime(),o=null;return i.forEach(e=>{var a,t;let n=null!==(a=e.highestSeverity&&H[e.highestSeverity])&&void 0!==a?a:0,s=e.highRiskCount,i=e.eventCount,c=null;if(e.nextEventStartsAt){let a=new Date(e.nextEventStartsAt);c=Number.isNaN(a.getTime())?null:a.getTime()}let d=0;null!==c&&(d=720-Math.min(Math.max(0,Math.round((c-r)/6e4)),720));let u=120*n+40*s+6*i+d;if("unspecified region"===e.region.trim().toLowerCase()&&(u-=80),o&&u<o.score)return;let m=Z(e,{now:l}),h="high"===e.highestSeverity?"High-risk conditions detected.":"medium"===e.highestSeverity?"Moderate weather risk forming.":"Low-level weather signals active.",g=s>0?"".concat(s," high-risk alert").concat(1===s?"":"s"," in queue."):"".concat(i," weather event").concat(1===i?"":"s"," active."),_=null!==c?"Next event ".concat(K(e.nextEventStartsAt,{now:l}),"."):"No scheduled start time.",p="".concat(h," ").concat(_," ").concat(g).trim(),v={region:e.region,summary:m,severity:null!==(t=e.highestSeverity)&&void 0!==t?t:null,highRiskCount:s,eventCount:i,nextEventStartsAt:e.nextEventStartsAt,reason:p};(!o||u>o.score||u===o.score&&null!==c&&(null===o.suggestion.nextEventStartsAt||new Date(o.suggestion.nextEventStartsAt).getTime()>c))&&(o={suggestion:v,score:u})}),null!==(n=null==o?void 0:o.suggestion)&&void 0!==n?n:null}(aL,{now:e7}),[az,aL,e7]),aK=(0,c.useMemo)(()=>(function(e,a){var t;let n=null!==(t=null==a?void 0:a.now)&&void 0!==t?t:new Date;if(!e.length)return{heading:"No weather signals detected",detail:"Automation engine hasn't detected active weather risk windows for your campaigns.",caption:"We'll alert you immediately when new weather events register on telemetry."};let s=e.length,i=e.reduce((e,a)=>e+a.eventCount,0),l=e.reduce((e,a)=>e+a.highRiskCount,0),r=null,o=null;e.forEach(e=>{if(!e.nextEventStartsAt)return;let a=new Date(e.nextEventStartsAt);if(Number.isNaN(a.getTime()))return;let t=a.getTime();(null===r||t<r)&&(r=t,o=a.toISOString())});let c=0===l?"No high-risk alerts on the board right now.":"".concat(l," high-risk alert").concat(1===l?"":"s"," already on watch."),d="We'll surface a focus recommendation if conditions escalate.";if(o){let e=K(o,{now:n});d="Next potential weather window begins ".concat(e,". We'll surface a focus recommendation if conditions escalate.")}else l>0&&(d="We'll surface a focus recommendation as soon as watchlisted alerts intensify.");return{heading:l>0?"Monitoring weather signals":"No priority region right now",detail:"Automation engine is monitoring ".concat(1===i?"1 weather event":"".concat(i," weather events")," across ").concat(s," ").concat(1===s?"region":"regions",". ").concat(c),caption:d}})(aL,{now:e7}),[aL,e7]),aZ=(0,c.useMemo)(()=>(function(e){var a,t;if(!e)return{tone:"muted",message:"Allocator telemetry unavailable."};let n=Q(e.recommendations),s=n.find(e=>"critical"===e.severity);if(s){let e=null!==(a=s.top_guardrail)&&void 0!==a?a:"guardrail breach";return{tone:"critical",message:"".concat(s.platform," throttled while ").concat(e.toLowerCase(),".")}}let i=n.find(e=>"warning"===e.severity);if(i){let e=null!==(t=i.top_guardrail)&&void 0!==t?t:"allocator governance";return{tone:"caution",message:"".concat(i.platform," adjustments flagged by ").concat(e.toLowerCase(),".")}}return e.guardrail_breaches>0?{tone:"caution",message:"".concat(e.guardrail_breaches," guardrail").concat(1===e.guardrail_breaches?"":"s"," monitoring allocator actions.")}:{tone:"success",message:"Allocator running clean; no guardrail pressure detected."}})(ao),[ao]),aX=(0,c.useMemo)(()=>(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!e)return[];let t="number"==typeof a&&Number.isFinite(a)?Math.max(0,Math.trunc(a)):0;return 0===t?[]:Q(e.recommendations).slice(0,t)})(ao,3),[ao]),aQ=(0,c.useMemo)(()=>(function(e){var a,t,n,s,i,l,r,o,c,d,u,m,h,g,_,p,v,f,y,b,x,j,N;let w=null==e?void 0:e.diagnostics;if(!w)return null;let S=[],k=null!==(a=w.binding_constraints)&&void 0!==a?a:{};[...J,...Object.keys(k).filter(e=>!J.includes(e)).sort()].forEach(e=>{var a;let t=k[e];if(!Array.isArray(t)||0===t.length)return;let n=null!==(a=Y[e])&&void 0!==a?a:e.replace(/_/g," "),s=t.map(ee).filter(e=>e.length>0);0!==s.length&&S.push("".concat(n," affects ").concat(function(e){if(1===e.length){var a;return null!==(a=e[0])&&void 0!==a?a:""}if(2===e.length)return"".concat(e[0]," and ").concat(e[1]);let[t,...n]=e;return"".concat(t,", ").concat(n.slice(0,-1).join(", "),", and ").concat(n[n.length-1])}(s)))});let C=e=>{let a=e.trim().toLowerCase();return a in $?$[a]:e.replace(/[_-]+/g," ").toLowerCase().replace(/\b(\w)/g,e=>e.toUpperCase()).trim()},T="string"==typeof w.optimizer_winner?w.optimizer_winner.trim():"",D="string"==typeof w.optimizer?w.optimizer.trim():"",M=T.length?T:D.length?D:null,A=M?C(M):null,L=[];if(Array.isArray(w.optimizer_candidates)){let e=new Set;w.optimizer_candidates.forEach(a=>{if(!a||"object"!=typeof a)return;let t="string"==typeof a.optimizer?a.optimizer.trim():"";if(!t||e.has(t))return;e.add(t);let n="number"==typeof a.profit&&Number.isFinite(a.profit)?a.profit:null,s="number"==typeof a.success&&Number.isFinite(a.success)?a.success:null;L.push({id:t,label:C(t),profit:n,success:null==s?null:Math.max(0,Math.min(1,s)),isWinner:!!M&&t===M})}),L.sort((e,a)=>{let t="number"==typeof e.profit?e.profit:Number.NEGATIVE_INFINITY,n="number"==typeof a.profit?a.profit:Number.NEGATIVE_INFINITY;return n===t?e.label.localeCompare(a.label):n-t})}let R=e=>"number"==typeof e&&Number.isFinite(e)?Math.round(e):null,E=e=>"number"==typeof e&&Number.isFinite(e)?e:null,F=E(null!==(t=w.scenario_profit_p10)&&void 0!==t?t:null),P=E(null!==(n=w.scenario_profit_p50)&&void 0!==n?n:null),I=E(null!==(s=w.scenario_profit_p90)&&void 0!==s?s:null),B=E(null!==(i=w.profit_delta_p50)&&void 0!==i?i:null),V=E(null!==(l=w.expected_profit_raw)&&void 0!==l?l:null),O=E(null!==(r=w.baseline_profit)&&void 0!==r?r:null),H=null!==(c=E(null!==(o=w.profit_delta_expected)&&void 0!==o?o:null))&&void 0!==c?c:null!=V&&null!=O?V-O:null,G=E(null!==(d=w.worst_case_profit)&&void 0!==d?d:null),z=E(null!==(u=w.profit_lift)&&void 0!==u?u:null),W=R(null!==(m=w.evaluations)&&void 0!==m?m:Object.prototype.hasOwnProperty.call(w,"nfev")?w.nfev:null),U=null!==(_=R(null!==(g=null!==(h=w.iterations)&&void 0!==h?h:w.iterations_with_improvement)&&void 0!==g?g:null))&&void 0!==_?_:null,q=null!==(f=R(null!==(v=null!==(p=w.improvements)&&void 0!==p?p:w.iterations_with_improvement)&&void 0!==v?v:null))&&void 0!==f?f:null,K=E(null!==(y=w.projection_target)&&void 0!==y?y:null),Z=E(null!==(b=w.projection_residual_lower)&&void 0!==b?b:null),X=E(null!==(x=w.projection_residual_upper)&&void 0!==x?x:null),Q=E(null!==(j=w.success)&&void 0!==j?j:null),et=E(null!==(N=w.objective_value)&&void 0!==N?N:null),en="boolean"==typeof w.min_softened?w.min_softened:null==w.min_softened?null:!!w.min_softened;return{optimizerLabel:A,profitP10:F,profitP50:P,profitP90:I,profitP50Delta:B,profitP50DeltaDirection:ea(B),expectedProfit:V,expectedProfitDelta:H,expectedProfitDeltaDirection:ea(H),baselineProfit:O,worstCaseProfit:G,profitLift:z,profitLiftDirection:ea(z),bindingHighlights:S,evaluationCount:W,iterationCount:U,improvementCount:q,projectionTarget:K,projectionResidualLower:Z,projectionResidualUpper:X,successScore:Q,wasMinSoftened:en,objectiveValue:et,optimizerCandidates:L}})(ao),[ao]),aY=(0,c.useMemo)(()=>{if(!aQ)return null;let e=aQ.projectionResidualLower,a=aQ.projectionResidualUpper;if(null==e&&null==a)return null;let t=eA(null!=e?e:0),n=eA(null!=a?a:0);return"".concat(t,"/").concat(n)},[aQ]);(0,c.useEffect)(()=>{if(az||!aq){eZ.current=null,eQ.current=null;return}let e=ep(aq);eZ.current!==e&&(eZ.current=e,a5(eb,aq))},[a5,az,aq]),(0,c.useEffect)(()=>{let e=eX.current;e&&eq!==e.region&&(a5(ej,e),eX.current=null)},[a5,eq]),(0,c.useEffect)(()=>{if(!eY.isReady||!aE||!aL.length)return;let e=function(e,a){if(!a)return null;let t=a.trim().toLowerCase();if(!t.length)return null;for(let a of e){let e=z(a.region);if(t===q(a.region)||t===e.toLowerCase())return a.region}return null}(aL,aE);if(e){e!==eq&&eK(e);return}let a={...eY.query};delete a.region,eY.replace({pathname:eY.pathname,query:a},void 0,{shallow:!0,scroll:!1})},[eY,eY.query,aL,aE,eq]),(0,c.useEffect)(()=>{if(!eY.isReady)return;let e=eq?q(eq):null;if(e===aE)return;let a={...eY.query};e?a.region=e:delete a.region,eY.replace({pathname:eY.pathname,query:a},void 0,{shallow:!0,scroll:!1})},[eY,eY.query,eq,aE]),(0,c.useEffect)(()=>{eq&&(aL.some(e=>e.region===eq)||eK(null))},[eq,aL]);let aJ=null!==(n=null===(e=aB.nextEvent)||void 0===e?void 0:e.starts_at)&&void 0!==n?n:null,a$=(0,c.useMemo)(()=>(function(e){let{guardrails:a,alerts:t,generatedAt:n,now:s=new Date,staleThresholdMinutes:i=30}=e;if(!n)return"offline";let l=new Date(n);return Number.isNaN(l.getTime())||(s.getTime()-l.getTime())/6e4>i?"offline":t.critical>0||"breach"===a.overallStatus?"incident":"watch"===a.overallStatus?"watch":"brief"})({guardrails:aj,alerts:aD,generatedAt:null!=e6?e6:void 0}),[aj,aD,e6]),a0=(0,c.useMemo)(()=>aM.lastEscalatedAt?K(aM.lastEscalatedAt):null,[aM.lastEscalatedAt]),a1=(0,c.useMemo)(()=>{let e=aM.lastEscalationChannel;return e?e.charAt(0).toUpperCase()+e.slice(1):null},[aM.lastEscalationChannel]),a2=(0,c.useMemo)(()=>{var e;if(!aM.lastEscalatedAt)return"No escalations recorded this cycle.";let a=null!==(e=aM.lastEscalatedTarget)&&void 0!==e?e:"—",t=a1?" via ".concat(a1):"",n=a0?" \xb7 ".concat(a0):"";return"Last escalated to ".concat(a).concat(t).concat(n,".")},[aM.lastEscalatedAt,aM.lastEscalatedTarget,a1,a0]),a3=(0,c.useCallback)(e=>{eK(a=>a===e?null:e)},[]),a5=(0,c.useCallback)((e,a)=>{var t;let n=!Number.isFinite(null!=(t=window.innerWidth)?t:NaN)||(null!=t?t:0)<=0?"unknown":t<640?"mobile":t<1024?"tablet":"desktop",s=aW(a,n);eQ.current=s;let{event:i,payload:l}=e(a,{viewportBreakpoint:n,metadata:s});return!function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=new Date().toISOString();"function"==typeof window.dispatchEvent&&"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("analytics:track",{detail:{event:e,payload:a,timestamp:t}}));let n=window.dataLayer;Array.isArray(n)&&n.push({analyticsEvent:e,...a,timestamp:t})}(i,l),(0,R.aR)({tenantId:ek,event:i,payload:l,occurredAt:new Date().toISOString()}),{event:i,payload:l}},[aW]),a9=(0,c.useCallback)(e=>{a5(ex,e),eX.current=e,eK(e.region)},[a5,eK]),a4=(0,c.useCallback)(()=>{eK(null)},[]),{calloutText:a8,regionFocus:a6}=(0,c.useMemo)(()=>(function(e){let{focusedRegion:a,isRegionFiltering:t,weatherSummary:n,timelineLength:s,nextEventStart:i,regionSummary:l,now:r}=e,o=null;if(t){if(a){if(0===s)o="No weather events scheduled for ".concat(a,".");else{let e=i?" Next event begins ".concat(K(i,{now:r}),"."):"",t=n.highRiskCount>0?" ".concat(n.highRiskCount," high-risk alert").concat(1===n.highRiskCount?"":"s"," in view."):" No high-risk alerts in view.";o="Showing ".concat(1===s?"1 weather event":"".concat(s," weather events")," for ").concat(a,".").concat(e).concat(t)}}}else if(n.nextEvent){let e=i?K(i,{now:r}):K(n.nextEvent.starts_at,{now:r});o="Next event begins ".concat(e," \xb7 ").concat(n.highRiskCount," high-risk alerts in queue.")}else n.highRiskCount>0&&(o="".concat(n.highRiskCount," high-risk weather alerts in queue."));return{calloutText:o,regionFocus:t&&a&&l?{label:a,summary:l}:null}})({focusedRegion:eq,isRegionFiltering:az,weatherSummary:aB,timelineLength:aO.length,nextEventStart:aJ,regionSummary:null!=aU?aU:void 0}),[eq,az,aB,aO.length,aJ,aU]),a7=(0,c.useMemo)(()=>{let e=null!==aJ?"Next weather event begins ".concat(K(aJ),"."):aB.highRiskCount>0?"".concat(aB.highRiskCount," high-risk weather alerts in queue."):"No high-risk weather events in queue.";switch(a$){case"incident":return{title:"Incident mode",description:"Guardrail breach detected. Coordinate a fix in Plan before re-enabling Automation.",analyticsId:"dashboard.incident_mode",toneClass:L().modeBannerIncident,cta:(0,s.jsx)("button",{type:"button",className:"ds-button-tertiary",onClick:eJ,"data-analytics-id":"dashboard.incident_mode.guardrail_cta",children:"Jump to guardrails"})};case"watch":return{title:"Watchlist active",description:"Guardrails trending towards breach. Review spend deltas and connector lag. ".concat(e),analyticsId:"dashboard.watch_mode",toneClass:L().modeBannerWatch,cta:null};case"offline":return{title:"Telemetry paused",description:"Data is older than 30 minutes. Confirm ingestion health or refresh telemetry to resume live monitoring.",analyticsId:"dashboard.offline_mode",toneClass:L().modeBannerOffline,cta:null};default:return{title:"Morning brief",description:"All guardrails stable. ".concat(e),analyticsId:"dashboard.morning_brief",toneClass:L().modeBannerBrief,cta:null}}},[a$,aJ,aB.highRiskCount,eJ]),te="offline"===a$?"".concat(L().page," ").concat(L().pageOffline):L().page,ta=(0,c.useMemo)(()=>am.length>0?am[0].lastOccurredAt:null,[am]),tt=(0,c.useCallback)(async e=>{if(j(null),e5){p(a=>a?{...a,alerts:a.alerts.map(a=>a.id===e?{...a,acknowledged:!0}:a)}:a);return}S(e);try{await (0,R.EN)(ek,e),p(a=>a?{...a,alerts:a.alerts.map(a=>a.id===e?{...a,acknowledged:!0}:a)}:a)}catch(e){j(e instanceof Error?e.message:"Failed to acknowledge alert. Please try again.")}finally{S(null)}},[e5,j,p,S]),tn=(0,c.useCallback)(async e=>{j(null);let a="#weather-ops";if(e5){p(t=>t?{...t,alerts:t.alerts.map(t=>t.id===e?{...t,escalated_to:a}:t)}:t);return}C(e);try{await (0,R.Dv)(ek,e,{channel:"slack",target:a}),p(t=>t?{...t,alerts:t.alerts.map(t=>t.id===e?{...t,escalated_to:a}:t)}:t)}catch(e){j(e instanceof Error?e.message:"Failed to escalate alert. Please try again.")}finally{C(null)}},[e5,j,C,p]);return(0,s.jsxs)(u.A,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"WeatherOps Dashboard \xb7 WeatherVane"})}),(0,s.jsxs)("div",{className:te,"data-testid":"dashboard",children:[(0,s.jsxs)("header",{className:L().header,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"ds-eyebrow",children:"WeatherOps"}),(0,s.jsx)("h1",{className:"ds-display",children:"Guardrail & Weather Command Center"}),(0,s.jsx)("p",{className:"ds-body",children:"Track allocator guardrails, connector latency, and upcoming weather events so Automation stays one step ahead of risk."})]}),(0,s.jsxs)("div",{className:L().headerActions,children:[(0,s.jsx)("button",{type:"button",onClick:()=>{A(e=>e+1),ev(e=>e+1)},className:"ds-button","data-analytics-id":"dashboard.refresh",disabled:v,children:v?"Refreshing…":"Refresh telemetry"}),(0,s.jsx)(o(),{href:"/plan",className:"ds-button-secondary","data-analytics-id":"dashboard.guardrail_queue",children:"Review guardrail queue"})]})]}),a7?(0,s.jsxs)("section",{className:"".concat(L().modeBanner," ").concat(a7.toneClass),role:"status","aria-live":"polite","data-analytics-id":a7.analyticsId,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"ds-eyebrow",children:a7.title}),(0,s.jsx)("p",{className:"ds-body",children:a7.description})]}),a7.cta]}):null,y&&(0,s.jsxs)("div",{className:"".concat(L().banner," ds-surface-glass"),role:"alert",children:[(0,s.jsx)("strong",{className:"ds-label-strong",children:"Using demo telemetry."}),(0,s.jsx)("span",{children:y})]}),(0,s.jsxs)("section",{className:L().hero,children:[(0,s.jsxs)("div",{className:"".concat(L().heroCard," ds-surface"),children:[(0,s.jsx)("h2",{className:"ds-title",children:"Guardrail health"}),(0,s.jsx)("p",{className:"ds-body",children:0===Math.max(0,{guardrailCount:aw}.guardrailCount)?"No guardrails published yet. Publish guardrails in Plan to unlock live health tracking.":"breach"===aj.overallStatus||aj.breachCount>0?"Guardrail breach detected. Rally the owning team and coordinate a fix before Automation engine resumes spend.":"watch"===aj.overallStatus||aj.watchCount>0?"Guardrails are drifting. Align with Finance on pacing adjustments before the next allocator sync.":"Guardrails holding steady. Automation engine will surface new drift the moment it appears."}),(0,s.jsx)(eV,{stack:aN,onNavigate:eJ,summary:aj}),(0,s.jsxs)("dl",{className:L().heroMetrics,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Breaches"}),(0,s.jsx)("dd",{children:aj.breachCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Watchlist"}),(0,s.jsx)("dd",{children:aj.watchCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Healthy"}),(0,s.jsx)("dd",{children:aj.healthyCount})]})]}),(0,s.jsxs)("p",{className:"".concat(L().heroDelta," ds-caption"),children:["Avg delta ",aS]})]}),(0,s.jsx)("div",{className:L().guardrailGrid,children:0===aw?(0,s.jsxs)("article",{className:"".concat(L().emptyStateCard," ds-surface"),"data-analytics-id":"dashboard.guardrail.empty_state",children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Publish your first guardrail"}),(0,s.jsx)("p",{className:"ds-body",children:"Set guardrail thresholds in Plan to unlock live drift monitoring and incident automation here."}),(0,s.jsx)("div",{className:L().emptyStateActions,children:(0,s.jsx)(o(),{href:"/plan?focus=guardrails",className:"ds-button-tertiary","data-analytics-id":"dashboard.guardrail.empty_state.plan_cta",children:"Launch Plan"})})]}):ae.map(e=>{let a=eR(e.status);return(0,s.jsxs)("article",{className:"".concat(L().guardrailCard," ds-surface-glass"),"data-analytics-id":"dashboard.guardrail.".concat(e.name.toLowerCase().replace(/\s+/g,"-")),children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":a.tone,children:a.label}),(0,s.jsx)("h3",{className:"ds-label-strong",children:e.name})]}),(0,s.jsx)("p",{className:L().guardrailValue,children:function(e){let a=eC(e.value,e.unit),t=eC(e.target,e.unit);return"".concat(a," \xb7 target ").concat(t)}(e)}),e.notes?(0,s.jsx)("p",{className:"ds-caption",children:e.notes}):null,(0,s.jsxs)("p",{className:"".concat(L().guardrailDelta," ds-caption"),children:[eT(e.delta_pct)," vs yesterday"]})]},e.name)})})]}),(0,s.jsx)("section",{className:L().consensusSection,"aria-label":"Consensus telemetry",children:(0,s.jsxs)("div",{className:L().consensusGrid,children:[(0,s.jsx)("div",{children:U?(0,s.jsx)("div",{className:"".concat(L().consensusStatus," ds-surface-glass"),role:"status",children:(0,s.jsx)("p",{className:"ds-body",children:"Loading consensus telemetry…"})}):et?(0,s.jsxs)("div",{className:"".concat(L().consensusStatus," ds-surface-glass"),role:"alert",children:[(0,s.jsx)("p",{className:"ds-body",children:et}),(0,s.jsx)(M.P,{onClick:()=>ev(e=>e+1),children:"Retry consensus fetch"})]}):E?(0,s.jsx)(w,{workload:E,"data-testid":"consensus-summary"}):null}),(0,s.jsx)("div",{children:eO?(0,s.jsx)("div",{className:"".concat(L().consensusStatus," ds-surface-glass"),role:"status",children:(0,s.jsx)("p",{className:"ds-body",children:"Loading staffing telemetry…"})}):eG?(0,s.jsxs)("div",{className:"".concat(L().consensusStatus," ds-surface-glass"),role:"alert",children:[(0,s.jsx)("p",{className:"ds-body",children:eG}),(0,s.jsx)(M.P,{onClick:()=>eU(e=>e+1),children:"Retry staffing fetch"})]}):ey?(0,s.jsx)(D,{metrics:ey,"data-testid":"staffing-telemetry"}):null})]})}),ao?(0,s.jsxs)("section",{className:L().allocatorSection,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Allocator outlook"}),(0,s.jsx)("p",{className:"ds-body",children:"Surface guardrail-aware reallocations before they escalate into incidents."})]}),(0,s.jsxs)("div",{className:L().allocatorGrid,children:[(0,s.jsxs)("article",{className:"".concat(L().allocatorSummaryCard," ds-surface"),children:[(0,s.jsxs)("header",{className:L().allocatorSummaryHeader,children:[(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":aZ.tone,children:ao.mode.charAt(0).toUpperCase()+ao.mode.slice(1)}),(0,s.jsx)("p",{className:"ds-body",children:aZ.message})]}),(0,s.jsxs)("dl",{className:L().allocatorMetrics,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Spend after"}),(0,s.jsx)("dd",{children:eC(ao.total_spend)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Change vs baseline"}),(0,s.jsxs)("dd",{children:[eC(ao.total_spend_delta),(0,s.jsx)("span",{className:L().allocatorDelta,children:eT(ao.total_spend_delta_pct)})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Guardrail breaches"}),(0,s.jsx)("dd",{children:ao.guardrail_breaches})]})]}),aQ?(0,s.jsxs)("div",{className:L().allocatorDiagnostics,children:[(0,s.jsxs)("div",{className:L().allocatorDiagnosticsHeader,children:[(0,s.jsx)("span",{className:"ds-label-strong",children:"Optimizer evidence"}),aQ.optimizerLabel?(0,s.jsxs)("p",{className:"ds-caption",children:[aQ.optimizerLabel," winner"]}):null]}),(0,s.jsxs)("dl",{className:L().allocatorDiagnosticsMetrics,children:[(null!=aQ.baselineProfit||null!=aQ.expectedProfitDelta)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Baseline profit"}),(0,s.jsxs)("dd",{children:[null!=aQ.baselineProfit?eC(aQ.baselineProfit):"—",null!=aQ.expectedProfitDelta?(0,s.jsxs)("span",{className:eM(aQ.expectedProfitDeltaDirection),children:["Δ vs expected ",eC(aQ.expectedProfitDelta)]}):null]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"P50 profit"}),(0,s.jsxs)("dd",{children:[null!=aQ.profitP50?eC(aQ.profitP50):"—",null!=aQ.profitP50Delta?(0,s.jsxs)("span",{className:eM(aQ.profitP50DeltaDirection),children:["Δ ",eC(aQ.profitP50Delta)]}):null]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Expected profit"}),(0,s.jsxs)("dd",{children:[null!=aQ.expectedProfit?eC(aQ.expectedProfit):"—",null!=aQ.profitLift?(0,s.jsxs)("span",{className:eM(aQ.profitLiftDirection),children:["Lift ",eC(aQ.profitLift)]}):null]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Worst-case profit"}),(0,s.jsx)("dd",{children:null!=aQ.worstCaseProfit?eC(aQ.worstCaseProfit):"—"})]}),(null!=aQ.profitP10||null!=aQ.profitP90)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Profit range (P10 - P90)"}),(0,s.jsx)("dd",{children:null!=aQ.profitP10&&null!=aQ.profitP90?"".concat(eC(aQ.profitP10)," - ").concat(eC(aQ.profitP90)):null!=aQ.profitP10?">= ".concat(eC(aQ.profitP10)):null!=aQ.profitP90?"<= ".concat(eC(aQ.profitP90)):"—"})]})]}),(null!=aQ.evaluationCount||null!=aQ.iterationCount||null!=aQ.improvementCount||null!=aQ.projectionTarget||aY||null!=aQ.wasMinSoftened||null!=aQ.objectiveValue)&&(0,s.jsxs)("dl",{className:L().allocatorDiagnosticsMeta,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Solver evaluations"}),(0,s.jsxs)("dd",{children:[null!=aQ.evaluationCount?en(aQ.evaluationCount):"—",null!=aQ.successScore?(0,s.jsxs)("span",{className:L().allocatorDelta,children:["Confidence"," ",eD(Math.max(0,Math.min(1,aQ.successScore)))]}):null]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Solver iterations"}),(0,s.jsxs)("dd",{children:[null!=aQ.iterationCount?en(aQ.iterationCount):"—",null!=aQ.improvementCount?(0,s.jsxs)("span",{className:L().allocatorDelta,children:[en(aQ.improvementCount)," ","improvements"]}):null]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Projection target"}),(0,s.jsxs)("dd",{children:[null!=aQ.projectionTarget?eC(aQ.projectionTarget):"—",aY?(0,s.jsxs)("span",{className:L().allocatorDelta,children:["Residual ",aY]}):null]})]}),null!=aQ.wasMinSoftened?(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Min guardrail"}),(0,s.jsx)("dd",{children:aQ.wasMinSoftened?"Softened":"Exact"})]}):null,null!=aQ.objectiveValue?(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{children:"Objective value"}),(0,s.jsx)("dd",{children:eC(aQ.objectiveValue)})]}):null]}),aQ.bindingHighlights.length?(0,s.jsx)("ul",{className:L().allocatorBindings,children:aQ.bindingHighlights.map(e=>(0,s.jsx)("li",{children:e},e))}):null,aQ.optimizerCandidates.length?(0,s.jsxs)("div",{className:L().allocatorOptimizers,children:[(0,s.jsx)("span",{className:"ds-label-strong",children:"Solver comparison"}),(0,s.jsx)("ul",{className:L().allocatorOptimizerList,children:aQ.optimizerCandidates.map(e=>(0,s.jsxs)("li",{className:[L().allocatorOptimizerItem,e.isWinner?L().allocatorOptimizerWinner:""].filter(Boolean).join(" "),children:[(0,s.jsxs)("div",{className:L().allocatorOptimizerHeader,children:[(0,s.jsx)("span",{className:"ds-caption",children:e.label}),e.isWinner?(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":"success",children:"Winner"}):null]}),(0,s.jsxs)("div",{className:L().allocatorOptimizerMetrics,children:[(0,s.jsx)("span",{className:"ds-body-strong",children:null!=e.profit?eC(e.profit):"—"}),(0,s.jsx)("span",{className:L().allocatorDelta,children:null!=e.success?"Success ".concat(eD(e.success)):"Success —"})]})]},e.id))})]}):null]}):null,ao.notes.length?(0,s.jsx)("p",{className:"".concat(L().allocatorNote," ds-caption"),children:ao.notes[0]}):null]}),(0,s.jsxs)("div",{className:L().allocatorRecommendations,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Priority adjustments"}),aX.length?(0,s.jsx)("ul",{children:aX.map(e=>{var a;let t="critical"===e.severity?"critical":"warning"===e.severity?"caution":"info";return(0,s.jsxs)("li",{className:"".concat(L().allocatorRecommendationCard," ds-surface-glass"),"data-analytics-id":"dashboard.allocator.recommendation.".concat(e.platform.toLowerCase().replace(/\\s+/g,"-")),children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":t,children:"critical"===e.severity?"Critical":"warning"===e.severity?"Watch":"Info"}),(0,s.jsx)("h4",{className:"ds-label-strong",children:e.platform})]}),(0,s.jsxs)("p",{className:L().allocatorRecommendationValue,children:[eC(e.spend_delta),(0,s.jsx)("span",{className:L().allocatorDelta,children:eT(e.spend_delta_pct)})]}),(0,s.jsx)("p",{className:"ds-caption",children:null!==(a=e.top_guardrail)&&void 0!==a?a:"Allocator adjustment"})]},"".concat(e.platform,"-").concat(t))})}):(0,s.jsx)("p",{className:"ds-caption",children:"No allocator adjustments are queued for review."})]})]})]}):null,ar.length>0||al.length>0?(0,s.jsxs)("section",{className:L().contextSection,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Telemetry context"}),(0,s.jsx)("p",{className:"ds-body",children:"Automation tags highlight active guardrails and ingestion caveats for this tenant."})]}),al.length?(0,s.jsx)("div",{className:L().tagList,"data-analytics-id":"dashboard.context_tags",children:al.map(e=>(0,s.jsx)("span",{className:L().tagChip,children:e},e))}):null,ar.length?(0,s.jsx)("ul",{className:L().contextList,"data-analytics-id":"dashboard.context_warnings",children:ar.map(e=>{let a=function(e){switch((null!=e?e:"").toLowerCase()){case"critical":return{tone:"critical",label:"Critical"};case"warning":return{tone:"caution",label:"Warning"};case"success":return{tone:"success",label:"Success"};default:return{tone:"info",label:"Info"}}}("string"==typeof e.severity?e.severity:"info"),t="string"==typeof e.code?e.code.replace(/_/g," "):"Context warning";return(0,s.jsxs)("li",{className:"".concat(L().contextCard," ds-surface-glass"),children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":a.tone,children:a.label}),(0,s.jsx)("h3",{className:"ds-label-strong",children:t})]}),(0,s.jsx)("p",{className:"ds-body",children:e.message})]},"".concat(e.code,"-").concat(e.message))})}):null]}):null,(0,s.jsxs)("section",{className:L().trackers,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Spend & revenue trackers"}),(0,s.jsx)("p",{className:"ds-body",children:"Monitor multi-channel pacing and share anomalies with Finance before they escalate."})]}),(0,s.jsx)("div",{className:L().trackerGrid,children:aC?ai.map(e=>{let a=e.change_pct>=0?"positive":"negative";return(0,s.jsxs)("article",{className:"".concat(L().trackerCard," ds-surface-glass"),"data-analytics-id":"dashboard.spend_hover.".concat(e.name.toLowerCase().replace(/\s+/g,"-")),children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:e.name}),(0,s.jsx)("span",{className:"ds-caption",children:e.channel})]}),(0,s.jsx)("p",{className:L().trackerValue,children:eC(e.value)}),(0,s.jsxs)("p",{className:"".concat(L().trackerDelta," ds-caption"),children:[eT(e.change_pct)," vs target"," ",e.target?eC(e.target):""]}),(0,s.jsx)(eI,{values:e.sparkline,ariaLabel:"".concat(e.name," trend"),tone:"positive"===a?"positive":0===e.change_pct?"default":"negative"})]},e.name)}):(0,s.jsxs)("article",{className:"".concat(L().emptyStateCard," ds-surface"),"data-analytics-id":"dashboard.trackers.empty_state","data-size":"compact",children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Connect pacing trackers"}),(0,s.jsx)("p",{className:"ds-body",children:"Hook up revenue and spend data sources to spotlight anomalies before they hit Finance."})]})})]}),ac.length?(0,s.jsxs)("section",{className:L().weatherKpiSection,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Weather KPIs"}),(0,s.jsx)("p",{className:"ds-body",children:"Track weather-driven impact on demand and lead time before it hits guardrails."})]}),(0,s.jsx)("div",{className:L().weatherKpiGrid,children:ac.map(e=>{let a=e.delta_pct&&e.delta_pct>0?"positive":e.delta_pct&&e.delta_pct<0?"negative":"default";return(0,s.jsxs)("article",{className:"".concat(L().weatherKpiCard," ds-surface-glass"),"data-analytics-id":"dashboard.weather_kpi.".concat(e.id),children:[(0,s.jsx)("header",{children:(0,s.jsx)("h3",{className:"ds-label-strong",children:e.label})}),(0,s.jsx)("p",{className:L().weatherKpiValue,children:function(e){switch(e.unit){case"usd":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e.value>=1e3?0:2}).format(e.value);case"pct":return"".concat(e.value.toFixed(1),"%");case"hours":return"".concat(e.value.toFixed(1),"h");case"index":return e.value.toFixed(1);default:return e.value.toLocaleString("en-US")}}(e)}),(0,s.jsx)("p",{className:"".concat(L().weatherKpiDelta," ds-caption"),children:null!==e.delta_pct&&void 0!==e.delta_pct?eT(e.delta_pct):"—"}),(0,s.jsx)(eI,{values:e.sparkline,ariaLabel:"".concat(e.label," trend"),tone:a}),(0,s.jsx)("p",{className:"ds-caption",children:e.description})]},e.id)})})]}):null,(0,s.jsxs)("section",{className:L().weatherSection,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Weather risks & timeline"}),(0,s.jsx)("p",{className:"ds-body",children:"Coordinate proactive moves with Priya and Leo — highlight risk windows before guardrails drift."})]}),(0,s.jsxs)("div",{className:L().regionFilters,role:"toolbar","aria-label":"Filter weather events by region","data-filtering":az?"true":"false","data-selected-region":null!=eq?eq:"",children:[(0,s.jsxs)("button",{type:"button",className:"".concat(L().regionFilterButton," ").concat(az?"":L().regionFilterButtonActive),onClick:a4,"aria-pressed":!az,"aria-label":"All regions. ".concat(aG),title:aG,"data-analytics-id":"dashboard.weather_focus.region.all","data-severity":"all","data-active":az?"false":"true",children:[(0,s.jsx)("span",{className:L().regionFilterLabel,children:"All regions"}),(0,s.jsxs)("span",{className:L().regionFilterMeta,children:[aH," ",1===aH?"event":"events"]})]}),aL.map(e=>{var a;let t=eq===e.region,n=q(e.region),i=aR[e.region],l=i?"".concat(e.region,". ").concat(i):e.region;return(0,s.jsxs)("button",{type:"button",className:"".concat(L().regionFilterButton," ").concat(t?L().regionFilterButtonActive:""),onClick:()=>a3(e.region),"aria-pressed":t,"aria-label":l,title:null!=i?i:e.region,"data-analytics-id":"dashboard.weather_focus.region.".concat(n),"data-severity":null!==(a=e.highestSeverity)&&void 0!==a?a:"low","data-active":t?"true":"false",children:[(0,s.jsx)("span",{className:L().regionFilterLabel,children:e.region}),(0,s.jsxs)("span",{className:L().regionFilterMeta,children:[e.eventCount," ",1===e.eventCount?"event":"events"]}),e.highRiskCount>0?(0,s.jsxs)("span",{className:L().regionFilterPriority,children:[e.highRiskCount," high-risk"]}):null]},e.region)})]}),!az&&aq?(0,s.jsxs)("div",{className:L().regionSuggestionBanner,role:"status","aria-live":"polite","data-analytics-id":"dashboard.weather_focus.suggestion","data-severity":null!==(i=aq.severity)&&void 0!==i?i:"low",children:[(0,s.jsxs)("div",{className:L().regionSuggestionText,children:[(0,s.jsx)("span",{className:L().regionSuggestionRegion,children:aq.region}),(0,s.jsx)("span",{className:L().regionSuggestionMeta,children:aq.summary}),(0,s.jsx)("span",{className:L().regionSuggestionReason,children:aq.reason})]}),(0,s.jsx)("button",{type:"button",className:"".concat(L().regionSuggestionAction," ds-button-tertiary"),onClick:()=>a9(aq),"data-analytics-id":"dashboard.weather_focus.suggestion.focus","aria-label":"Focus on ".concat(aq.region,". ").concat(aq.reason),children:"Focus this region"})]}):null,az||aq?null:(0,s.jsx)("div",{className:L().regionSuggestionBanner,role:"status","aria-live":"polite","data-analytics-id":"dashboard.weather_focus.suggestion.idle","data-variant":"idle",children:(0,s.jsxs)("div",{className:L().regionSuggestionText,children:[(0,s.jsx)("span",{className:L().regionSuggestionRegion,children:aK.heading}),(0,s.jsx)("span",{className:L().regionSuggestionMeta,children:aK.detail}),(0,s.jsx)("span",{className:L().regionSuggestionReason,children:aK.caption})]})}),(0,s.jsxs)("section",{className:L().suggestionTelemetrySection,"aria-labelledby":"suggestion-telemetry-heading","data-analytics-id":"dashboard.weather_focus.telemetry",children:[(0,s.jsxs)("div",{className:L().suggestionTelemetryHeader,children:[(0,s.jsx)("p",{id:"suggestion-telemetry-heading",className:"ds-eyebrow",children:"Suggestion engagement"}),(0,s.jsx)("span",{className:"ds-caption",children:ta?"Last seen ".concat(K(ta,{now:e7})):"No recent telemetry"})]}),ap&&ah?(0,s.jsxs)("dl",{className:L().suggestionTelemetryOverview,children:[ag?(0,s.jsxs)("div",{className:L().suggestionTelemetryTopSignal,"data-confidence-level":null!==(r=ag.confidenceLevel)&&void 0!==r?r:void 0,children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Top signal"}),(0,s.jsxs)("dd",{children:[(0,s.jsxs)("div",{className:L().suggestionTelemetryTopSignalHeader,children:[(0,s.jsx)("span",{className:L().suggestionTelemetryTopSignalLabel,children:ag.region}),ag.highRiskBadge?(0,s.jsx)("span",{className:L().suggestionTelemetryRiskBadge,"data-level":ag.highRiskSeverity,title:ag.highRiskDetail,children:ag.highRiskBadge}):null]}),ag.summary?(0,s.jsx)("p",{className:L().suggestionTelemetryTopSignalSummary,children:ag.summary}):null,ag.meta?(0,s.jsx)("span",{className:L().suggestionTelemetryTopSignalMeta,children:ag.meta}):null]})]}):null,(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Signals tracked"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:en(ah.totalSuggestions)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Views"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:en(ah.totalViewCount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Interactions"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:en(ah.totalInteractions)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Top high-risk alerts"}),(0,s.jsxs)("dd",{className:"".concat(L().suggestionTelemetryValue," ").concat(L().suggestionTelemetryHighRiskValue),"data-level":a_.severity,children:[(0,s.jsx)("span",{"aria-hidden":"true",className:L().suggestionTelemetryValueNumber,children:a_.value}),(0,s.jsx)("span",{className:"sr-only",children:"Top high-risk alerts. ".concat(a_.assistiveText)}),a_.badge?(0,s.jsx)("span",{className:L().suggestionTelemetryRiskBadge,"data-level":a_.severity,children:a_.badge}):null,(0,s.jsx)("span",{className:L().suggestionTelemetryHighRiskDetail,children:a_.supportingText})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Top events tracked"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:null!==ah.topEventCount?en(ah.topEventCount):"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Avg focus"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:null!==ah.averageFocusRate?eD(ah.averageFocusRate):"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Avg dismiss"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:null!==ah.averageDismissRate?eD(ah.averageDismissRate):"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Avg engagement"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:null!==ah.averageEngagementRate?eD(ah.averageEngagementRate):"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Top signal confidence"}),(0,s.jsx)("dd",{className:"".concat(L().suggestionTelemetryValue," ").concat(L().suggestionTelemetryConfidence),"data-confidence-level":null!==(m=ah.topConfidenceLevel)&&void 0!==m?m:void 0,children:ah.topConfidenceLabel})]})]}):null,0===am.length?(0,s.jsx)("p",{className:"".concat(L().suggestionTelemetryEmpty," ds-caption"),children:"No suggestion telemetry recorded yet. WeatherOps will capture engagement once operators interact with focus banners."}):(0,s.jsx)("ol",{className:L().suggestionTelemetryList,children:am.map(e=>{let a="unknown"===e.guardrailStatus?"Guardrail posture unknown":"Guardrail ".concat(e.guardrailStatus),t="demo"===e.tenantMode?"Demo mode":"live"===e.tenantMode?"Live mode":null,n="dense"===e.layoutVariant?"Dense layout":"stacked"===e.layoutVariant?"Stacked layout":null,i=[a,t,e.ctaShown?"CTA surfaced":"CTA hidden",n].filter(Boolean),l=K(e.lastOccurredAt,{now:e7}),r=eD(e.focusRate),o=eD(e.dismissRate),c=eD(e.engagementRate),d=es(e.highRiskSeverity,e.highRiskCount);if(e.tenantCount>0){let{sample:a,remainder:t}=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!Array.isArray(e)||0===e.length)return{sample:[],remainder:0};let t="number"==typeof a&&Number.isFinite(a)?Math.max(0,Math.trunc(a)):0;if(0===t)return{sample:[],remainder:e.length};let n=e.slice(0,t),s=Math.max(0,e.length-n.length);return{sample:n,remainder:s}}(e.tenantNames,2);if(a.length>0){let n=en(e.tenantCount),s=a.join(", ");t>0&&(s="".concat(s," +").concat(t," more"));let l=1===e.tenantCount&&0===t?"Tenant coverage: ".concat(s):"Tenant coverage: ".concat(n," (").concat(s,")");i.push(l)}}return d.countLabel&&!d.badge&&i.push(d.countLabel),(0,s.jsxs)("li",{className:"".concat(L().suggestionTelemetryItem," ds-surface-glass"),children:[(0,s.jsxs)("div",{className:L().suggestionTelemetryCopy,children:[(0,s.jsxs)("div",{className:L().suggestionTelemetryRegionRow,children:[(0,s.jsx)("span",{className:L().suggestionTelemetryRegion,children:e.region}),d.badge?(0,s.jsx)("span",{className:L().suggestionTelemetryRiskBadge,"data-level":d.severity,title:d.detail,children:d.badge}):null]}),(0,s.jsx)("p",{className:L().suggestionTelemetrySummary,children:e.summary}),(0,s.jsx)("p",{className:L().suggestionTelemetryMeta,children:i.length>0?i.join(" \xb7 "):"Telemetry metadata unavailable"}),(0,s.jsxs)("p",{className:L().suggestionTelemetryMeta,children:[d.detail," \xb7 Events tracked: ",en(e.eventCount)," \xb7 Last seen ",l]})]}),(0,s.jsxs)("dl",{className:L().suggestionTelemetryStats,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Views"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:e.viewCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Focuses"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:e.focusCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Dismisses"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:e.dismissCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Focus rate"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:r})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Dismiss rate"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:o})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Engagement"}),(0,s.jsx)("dd",{className:L().suggestionTelemetryValue,children:c})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"ds-caption",children:"Signal confidence"}),(0,s.jsx)("dd",{className:"".concat(L().suggestionTelemetryValue," ").concat(L().suggestionTelemetryConfidence),"data-confidence-level":e.engagementConfidenceLevel,children:e.engagementConfidenceLabel})]})]})]},e.signature)})})]}),a6?(0,s.jsxs)("div",{className:L().regionSummaryBanner,role:"status","aria-live":"polite","data-analytics-id":"dashboard.weather_focus.selection_summary",children:[(0,s.jsxs)("div",{className:L().regionSummaryText,children:[(0,s.jsx)("span",{className:L().regionSummaryRegion,children:a6.label}),(0,s.jsx)("span",{className:L().regionSummaryMeta,children:a6.summary})]}),(0,s.jsx)("button",{type:"button",className:"".concat(L().regionSummaryClear," ds-button-tertiary"),onClick:a4,"data-analytics-id":"dashboard.weather_focus.clear_summary",children:"Clear"})]}):null,(0,s.jsxs)("div",{className:L().weatherGrid,children:[(0,s.jsx)(eB,{events:an,selectedRegion:eq,onRegionSelect:a3,regionSummaries:aR}),(0,s.jsx)("ol",{className:L().timeline,"data-analytics-id":"dashboard.weather_timeline","data-filtering":az?"true":"false","data-selected-region":null!=eq?eq:"",children:0===aO.length?(0,s.jsxs)("li",{className:"".concat(L().timelineEmpty," ds-surface-glass"),children:[(0,s.jsx)("p",{className:"ds-body",children:az&&eq?"No forecasted weather events are pressuring ".concat(eq," right now. We will flag new risk windows the moment forecasts shift."):"All clear — no upcoming weather events are threatening spend. Automation will surface the next risk window automatically."}),(0,s.jsx)("p",{className:"ds-caption",children:"Weather telemetry refreshes every 15 minutes or sooner during incidents."}),az?(0,s.jsx)("button",{type:"button",className:"ds-button-tertiary",onClick:a4,"data-analytics-id":"dashboard.weather_focus.clear","data-active":az?"true":"false",children:"Show all regions"}):null]}):aO.map(e=>{let{event:a,regionLabel:t,regionSlug:n,isActive:i}=e,l=K(a.starts_at),r=function(e){switch(e){case"high":return{tone:"critical",label:"High"};case"medium":return{tone:"caution",label:"Medium"};default:return{tone:"info",label:"Low"}}}(a.severity),o=a.id.toLowerCase().replace(/[^a-z0-9]+/g,"-"),c=aR[t],d=[a.title,t,c,"Severity ".concat(r.label),"Starts ".concat(l)].filter(Boolean).join(". ");return(0,s.jsx)("li",{className:[L().timelineItem,"ds-surface-glass",i?L().timelineItemActive:""].filter(Boolean).join(" "),"data-active":i?"true":"false","data-region":o,"data-severity":a.severity,"data-analytics-id":"dashboard.weather_timeline.".concat(o),children:(0,s.jsxs)("button",{type:"button",className:L().timelineItemButton,onClick:()=>a3(t),"aria-pressed":i,"aria-label":d,title:null!=c?c:t,"data-active":i?"true":"false","data-analytics-id":"dashboard.weather_timeline.".concat(o),"data-region":o,"data-region-label":n,children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":r.tone,children:r.label}),(0,s.jsx)("h3",{className:"ds-label-strong",children:a.title})]}),(0,s.jsx)("p",{className:"ds-body",children:a.description}),(0,s.jsxs)("p",{className:"ds-caption",children:[t," \xb7 starts ",l]})]})},a.id)})})]}),a8?(0,s.jsx)("p",{className:"".concat(L().weatherCallout," ds-caption"),children:a8}):null]}),(0,s.jsxs)("section",{className:L().automationSection,"data-analytics-id":"dashboard.automation_status_view",children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Automation uptime"}),(0,s.jsx)("p",{className:"ds-body",children:"Confirm Automation handoffs remain safe. Incident history rolls up to guardrail callouts above."})]}),(0,s.jsx)("div",{className:L().automationGrid,children:ak?as.map(e=>{let a=function(e){switch(e){case"degraded":return{tone:"caution",label:"Degraded"};case"paused":return{tone:"critical",label:"Paused"};default:return{tone:"success",label:"Normal"}}}(e.status);return(0,s.jsxs)("article",{className:"".concat(L().automationCard," ds-surface-glass"),"data-analytics-id":"dashboard.automation_status.".concat(e.name.toLowerCase().replace(/\\s+/g,"-")),children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:e.name}),(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":a.tone,children:a.label})]}),(0,s.jsxs)("p",{className:L().automationValue,children:[e.uptime_pct.toFixed(1),"%"]}),(0,s.jsxs)("p",{className:"ds-caption",children:[e.incidents_7d," incidents last 7d \xb7 last at ",K(e.last_incident_at)]}),e.notes?(0,s.jsx)("p",{className:"ds-body",children:e.notes}):null]},e.name)}):(0,s.jsxs)("article",{className:"".concat(L().emptyStateCard," ds-surface"),"data-analytics-id":"dashboard.automation_status.empty_state","data-size":"compact",children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"No automation lanes configured"}),(0,s.jsx)("p",{className:"ds-body",children:"Wire Automation lanes in the worker config to track uptime and incident history here."})]})})]}),(0,s.jsxs)("section",{className:L().coverageSection,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsxs)("div",{className:L().sectionHeaderRow,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Data coverage"}),ay?(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":ay.tone,children:ay.label}):null]}),(0,s.jsxs)("p",{className:"ds-body",children:["Trailing ",null!==(h=null==af?void 0:af.windowDays)&&void 0!==h?h:90,"-day completeness across sales, spend, and weather joins."]})]}),af?ax?(0,s.jsx)("div",{className:L().coverageGrid,children:ab.map(e=>{var a;let t=eE(e.status),n=eD(e.coverageRatio),i=e.latestDateIso?K(e.latestDateIso,{now:e7}):null,l=e.name&&e.name.length?e.name:e.key,r=l.charAt(0).toUpperCase()+l.slice(1),o="number"==typeof e.geocodedRatio?eD(Math.max(0,Math.min(e.geocodedRatio,1))):null;return(0,s.jsxs)("article",{className:"".concat(L().coverageCard," ds-surface-glass"),"data-analytics-id":"dashboard.coverage.".concat(e.key),children:[(0,s.jsxs)("header",{className:L().coverageCardHeader,children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:r}),(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":t.tone,children:t.label})]}),(0,s.jsx)("p",{className:L().coverageValue,children:n}),(0,s.jsxs)("p",{className:"ds-caption",children:[e.observedDays," of ",e.windowDays," days captured",e.missingDays>0?" \xb7 Missing ".concat(e.missingDays," day").concat(1===e.missingDays?"":"s"):""]}),(0,s.jsxs)("p",{className:"ds-caption",children:["Latest ",null!==(a=e.latestDateRaw)&&void 0!==a?a:"unknown",i?" \xb7 ".concat(i):""]}),o?(0,s.jsxs)("p",{className:"ds-caption",children:["Geocoded orders ",o]}):null,e.issues.length>0?(0,s.jsx)("ul",{className:L().coverageIssues,children:e.issues.map(e=>(0,s.jsx)("li",{className:"ds-caption",children:e},e))}):(0,s.jsx)("p",{className:"".concat(L().coverageNoIssues," ds-caption"),children:"No coverage issues detected."})]},e.key)})}):(0,s.jsxs)("div",{className:"".concat(L().emptyStateCard," ds-surface"),"data-analytics-id":"dashboard.coverage.waiting","data-size":"compact",children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Waiting for coverage snapshot"}),(0,s.jsx)("p",{className:"ds-body",children:"Run the coverage validator to capture sales, spend, and weather completeness."})]}):(0,s.jsxs)("div",{className:"".concat(L().emptyStateCard," ds-surface"),"data-analytics-id":"dashboard.coverage.missing","data-size":"compact",children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"No coverage telemetry yet"}),(0,s.jsx)("p",{className:"ds-body",children:"Trigger the tenant coverage validation job to populate this snapshot."})]})]}),(0,s.jsxs)("section",{className:L().ingestionSection,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Ingestion telemetry"}),(0,s.jsx)("p",{className:"ds-body",children:"Keep connectors inside SLA so guardrails and forecasts stay fresh."})]}),(0,s.jsx)("div",{className:L().ingestionSummary,children:aT?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"ds-body",children:["Average lag ",Math.round(aA.averageLagMinutes)," min \xb7"," ",aA.outOfSlaCount," out of SLA"]}),aA.slowestConnector?(0,s.jsxs)("p",{className:"ds-caption",children:["Worst offender: ",aA.slowestConnector.name," (",eL(aA.slowestConnector),")"]}):(0,s.jsx)("p",{className:"ds-caption",children:"All connectors are within SLA. Keep an eye on sync freshness during peak weather events."})]}):(0,s.jsx)("p",{className:"ds-body",children:"No connectors reporting yet. Connect ingestion pipelines to monitor SLA drift in real time."})}),aT?(0,s.jsxs)("table",{className:"".concat(L().ingestionTable," ds-surface-glass"),children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"Connector"}),(0,s.jsx)("th",{scope:"col",children:"Source"}),(0,s.jsx)("th",{scope:"col",children:"Lag"}),(0,s.jsx)("th",{scope:"col",children:"Status"}),(0,s.jsx)("th",{scope:"col",children:"Updated"})]})}),(0,s.jsx)("tbody",{children:at.map(e=>{let a=function(e){switch(e){case"delayed":return{tone:"caution",label:"Delayed"};case"failed":return{tone:"critical",label:"Failed"};case"syncing":return{tone:"info",label:"Syncing"};default:return{tone:"success",label:"Healthy"}}}(e.status);return(0,s.jsxs)("tr",{"data-analytics-id":"dashboard.ingestion.".concat(e.name.toLowerCase().replace(/\s+/g,"-")),children:[(0,s.jsx)("th",{scope:"row",children:e.name}),(0,s.jsx)("td",{children:e.source}),(0,s.jsx)("td",{children:eL(e)}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":a.tone,children:a.label})}),(0,s.jsx)("td",{children:K(e.last_synced_at)})]},e.name)})})]}):(0,s.jsxs)("div",{className:"".concat(L().emptyStateCard," ds-surface"),"data-analytics-id":"dashboard.ingestion.empty_state","data-size":"compact",children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:"Awaiting first ingestion sync"}),(0,s.jsx)("p",{className:"ds-body",children:"Kick off connector onboarding or refresh telemetry to populate ingestion health."})]})]}),(0,s.jsxs)("section",{className:L().alertSection,children:[(0,s.jsxs)("header",{className:L().sectionHeader,children:[(0,s.jsx)("h2",{className:"ds-title",children:"Alert inbox"}),(0,s.jsx)("p",{className:"ds-body",children:"Triage and escalate incidents. Critical alerts pause Automation until acknowledged."})]}),x?(0,s.jsxs)("div",{className:"".concat(L().banner," ds-surface-glass"),role:"alert",children:[(0,s.jsx)("strong",{className:"ds-label-strong",children:"Alert action failed."}),(0,s.jsx)("span",{children:x})]}):null,(0,s.jsxs)("div",{className:L().alertSummary,role:"status",children:[(0,s.jsxs)("p",{className:"ds-body",children:[aD.critical," critical \xb7 ",aD.warning," warnings \xb7 ",aD.info," briefs"]}),(0,s.jsxs)("p",{className:"ds-caption",children:[aD.acknowledged," acknowledged in the last cycle."]})]}),(0,s.jsxs)("div",{className:L().alertEscalationSummary,children:[(0,s.jsxs)("p",{className:"ds-body",children:[aM.totalEscalated," escalations \xb7 ",aM.activeCount," active"]}),(0,s.jsx)("p",{className:"ds-caption",children:a2})]}),(0,s.jsx)("ul",{className:L().alertList,children:(null!==(g=null==_?void 0:_.alerts)&&void 0!==g?g:[]).map(e=>{let a=function(e){switch(e){case"critical":return{tone:"critical",label:"Critical"};case"warning":return{tone:"caution",label:"Warning"};default:return{tone:"info",label:"Info"}}}(e.severity),t=e.escalation_channel&&e.escalation_channel.length?e.escalation_channel.charAt(0).toUpperCase()+e.escalation_channel.slice(1):null;return(0,s.jsxs)("li",{className:"".concat(L().alertCard," ds-surface-glass"),"data-analytics-id":"dashboard.alert.".concat(e.id),children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("span",{className:"ds-badge ".concat(L().badgeUpper),"data-tone":a.tone,children:a.label}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"ds-label-strong",children:e.title}),(0,s.jsxs)("p",{className:"ds-caption",children:["Raised ",K(e.occurred_at)]})]})]}),(0,s.jsx)("p",{className:"ds-body",children:e.detail}),e.related_objects.length?(0,s.jsxs)("p",{className:"ds-caption",children:["Linked: ",e.related_objects.join(", ")]}):null,(0,s.jsxs)("div",{className:L().alertActions,children:[(0,s.jsx)("button",{type:"button",className:"ds-button-tertiary","data-analytics-id":"dashboard.alert_ack",onClick:()=>tt(e.id),disabled:e.acknowledged||N===e.id,"aria-busy":N===e.id,children:N===e.id?"Acknowledging…":e.acknowledged?"Acknowledged":"Acknowledge"}),(0,s.jsx)("button",{type:"button",className:"ds-button","data-analytics-id":"dashboard.alert_escalate",onClick:()=>tn(e.id),disabled:!!e.escalated_to||k===e.id,"aria-busy":k===e.id,children:k===e.id?"Escalating…":e.escalated_to?"Escalated":"Escalate via Slack"})]}),e.escalated_to?(0,s.jsxs)("p",{className:"".concat(L().alertMetaNote," ds-caption"),children:["Escalated to ",e.escalated_to,t?" via ".concat(t):"",e.escalated_at?" \xb7 ".concat(K(e.escalated_at)):""]}):null,e.acknowledged&&e.acknowledged_at?(0,s.jsxs)("p",{className:"".concat(L().alertMetaNote," ds-caption"),children:["Acknowledged ",K(e.acknowledged_at)]}):null]},e.id)})})]}),"offline"===a$?(0,s.jsx)("div",{className:L().offlineScrim,"aria-hidden":"true","data-analytics-id":"dashboard.offline_overlay"}):null]})]})}},878:function(e){e.exports={root:"consensus-summary-card_root__a3Dn8",header:"consensus-summary-card_header__ldgR1",meta:"consensus-summary-card_meta__V_dJp",grid:"consensus-summary-card_grid__pDLjl",column:"consensus-summary-card_column__3hnrl",tiers:"consensus-summary-card_tiers__akiSf",signals:"consensus-summary-card_signals__NoSHl",decisionMix:"consensus-summary-card_decisionMix__yL7e8",tierItem:"consensus-summary-card_tierItem__xsBa9",tierHeader:"consensus-summary-card_tierHeader__QE7Mk",tierName:"consensus-summary-card_tierName__mKiZR",tierDuration:"consensus-summary-card_tierDuration__Xoj9h",participants:"consensus-summary-card_participants__Kwurc",tierFootnote:"consensus-summary-card_tierFootnote__cXT67",signalItem:"consensus-summary-card_signalItem__QvuzF",signalName:"consensus-summary-card_signalName__QQXZJ",signalThreshold:"consensus-summary-card_signalThreshold__Cfzbm",signalAction:"consensus-summary-card_signalAction__9rIxS",decisionLabel:"consensus-summary-card_decisionLabel__TcFSu",decisionValue:"consensus-summary-card_decisionValue__Jy6BA",execution:"consensus-summary-card_execution__uRu9e",empty:"consensus-summary-card_empty__fojX5"}},1682:function(e){e.exports={retryButton:"retry-button_retryButton__857bg",retryButtonLoading:"retry-button_retryButtonLoading__h_n3Q",retryButtonSpinner:"retry-button_retryButtonSpinner__jIZZ_","retry-button-spin":"retry-button_retry-button-spin__xpbOc",retryButtonLabel:"retry-button_retryButtonLabel__Tfn2J"}},7667:function(e){e.exports={root:"staffing-telemetry-panel_root__Ryoam",header:"staffing-telemetry-panel_header__oreXb",meta:"staffing-telemetry-panel_meta__aBOZn",grid:"staffing-telemetry-panel_grid__axSwA",summaryColumn:"staffing-telemetry-panel_summaryColumn__tOXqR",historyColumn:"staffing-telemetry-panel_historyColumn__PPGfN",guidanceColumn:"staffing-telemetry-panel_guidanceColumn__mr1fo",decisionList:"staffing-telemetry-panel_decisionList__N0bxw",tokenList:"staffing-telemetry-panel_tokenList__UGZyM",criticList:"staffing-telemetry-panel_criticList__LV_zL",historyList:"staffing-telemetry-panel_historyList__S6Zry",profileList:"staffing-telemetry-panel_profileList__bGBmy",signalList:"staffing-telemetry-panel_signalList__jznMa",decisionType:"staffing-telemetry-panel_decisionType__pNphA",decisionCount:"staffing-telemetry-panel_decisionCount__L6TnO",tokenName:"staffing-telemetry-panel_tokenName__M7CMz",tokenValue:"staffing-telemetry-panel_tokenValue__FUfKC",criticSummary:"staffing-telemetry-panel_criticSummary__itWQy",criticStat:"staffing-telemetry-panel_criticStat__VeDh3",criticItem:"staffing-telemetry-panel_criticItem__dKAGi",criticHeader:"staffing-telemetry-panel_criticHeader__ns7zn",criticIdentity:"staffing-telemetry-panel_criticIdentity__5sKo3",criticName:"staffing-telemetry-panel_criticName__q5VB_",criticTitle:"staffing-telemetry-panel_criticTitle__RczVp",criticStatus:"staffing-telemetry-panel_criticStatus__qSf0q",criticSummaryText:"staffing-telemetry-panel_criticSummaryText__mlYtU",criticFooter:"staffing-telemetry-panel_criticFooter__VVTfM",historyItem:"staffing-telemetry-panel_historyItem__qGjXV",historyHeader:"staffing-telemetry-panel_historyHeader__EcGeW",historyType:"staffing-telemetry-panel_historyType__S2Af0",historyTimestamp:"staffing-telemetry-panel_historyTimestamp__sbyyp",historyMeta:"staffing-telemetry-panel_historyMeta__nwCUs",historyStatus:"staffing-telemetry-panel_historyStatus__UgFAU",profileItem:"staffing-telemetry-panel_profileItem__B_Rqh",profileHeader:"staffing-telemetry-panel_profileHeader__kRy95",profileName:"staffing-telemetry-panel_profileName__lKfJU",profileDurations:"staffing-telemetry-panel_profileDurations__l2FSI",profileParticipants:"staffing-telemetry-panel_profileParticipants__8uCOc",signalItem:"staffing-telemetry-panel_signalItem__Z0WOi",signalHeader:"staffing-telemetry-panel_signalHeader__gN70g",signalName:"staffing-telemetry-panel_signalName__vnoCB",signalThreshold:"staffing-telemetry-panel_signalThreshold__x6mxp",signalAction:"staffing-telemetry-panel_signalAction_____Fm"}},5374:function(e){e.exports={page:"dashboard_page__eiVm0",pageOffline:"dashboard_pageOffline__sQKx4",header:"dashboard_header__cmRzz",headerActions:"dashboard_headerActions__o4iPW",modeBanner:"dashboard_modeBanner__SYYV_",modeBannerBrief:"dashboard_modeBannerBrief__wqzOU",modeBannerWatch:"dashboard_modeBannerWatch__DUbgX",modeBannerIncident:"dashboard_modeBannerIncident__8U7sA",modeBannerOffline:"dashboard_modeBannerOffline__HswlZ",banner:"dashboard_banner__L_AiI",hero:"dashboard_hero__gZi3g",heroCard:"dashboard_heroCard__t9Fsl",consensusSection:"dashboard_consensusSection__g_r1G",consensusGrid:"dashboard_consensusGrid__Dbm8T",consensusStatus:"dashboard_consensusStatus__XHHgq",guardrailBarContainer:"dashboard_guardrailBarContainer__DGa9b",guardrailBarInteractive:"dashboard_guardrailBarInteractive__8giaX",guardrailBarSegment:"dashboard_guardrailBarSegment__wvQ4R",guardrailBarSegmenthealthy:"dashboard_guardrailBarSegmenthealthy__QhGX7",guardrailBarSegmentwatch:"dashboard_guardrailBarSegmentwatch__oLxSA",guardrailBarSegmentbreach:"dashboard_guardrailBarSegmentbreach__jCoM8",guardrailBarLegend:"dashboard_guardrailBarLegend___P3AV",guardrailLegendDot:"dashboard_guardrailLegendDot__O_P4M",guardrailLegendDothealthy:"dashboard_guardrailLegendDothealthy__lc_Oh",guardrailLegendDotwatch:"dashboard_guardrailLegendDotwatch__nP9fB",guardrailLegendDotbreach:"dashboard_guardrailLegendDotbreach__Ww3Fq",guardrailLegendDelta:"dashboard_guardrailLegendDelta__gph2T",heroMetrics:"dashboard_heroMetrics__PXtvS",heroDelta:"dashboard_heroDelta__Vj31Y",guardrailGrid:"dashboard_guardrailGrid__vitZH",guardrailCard:"dashboard_guardrailCard__qWE2h",badgeUpper:"dashboard_badgeUpper__TBXUr",guardrailValue:"dashboard_guardrailValue__gn_kp",guardrailDelta:"dashboard_guardrailDelta__6S4ES",trackers:"dashboard_trackers__zrrFb",allocatorSection:"dashboard_allocatorSection__MtFFL",allocatorGrid:"dashboard_allocatorGrid__oPgkn",allocatorSummaryCard:"dashboard_allocatorSummaryCard__uRTTr",allocatorSummaryHeader:"dashboard_allocatorSummaryHeader__Zs9fD",allocatorMetrics:"dashboard_allocatorMetrics__l_naV",allocatorDiagnostics:"dashboard_allocatorDiagnostics__sDCYG",allocatorDiagnosticsHeader:"dashboard_allocatorDiagnosticsHeader__Som7d",allocatorDiagnosticsMetrics:"dashboard_allocatorDiagnosticsMetrics__DO4Gy",allocatorDiagnosticsMeta:"dashboard_allocatorDiagnosticsMeta__uz8ba",allocatorBindings:"dashboard_allocatorBindings__cPk6N",allocatorOptimizers:"dashboard_allocatorOptimizers__Rhrkk",allocatorOptimizerList:"dashboard_allocatorOptimizerList__KDX1j",allocatorOptimizerItem:"dashboard_allocatorOptimizerItem__7cdiV",allocatorOptimizerWinner:"dashboard_allocatorOptimizerWinner__p94zr",allocatorOptimizerHeader:"dashboard_allocatorOptimizerHeader__T_r_r",allocatorOptimizerMetrics:"dashboard_allocatorOptimizerMetrics__7xgcN",allocatorDelta:"dashboard_allocatorDelta__h38Xj",allocatorDeltaPositive:"dashboard_allocatorDeltaPositive___6Qq5",allocatorDeltaNegative:"dashboard_allocatorDeltaNegative__oDj4w",allocatorNote:"dashboard_allocatorNote__qVHSM",allocatorRecommendations:"dashboard_allocatorRecommendations__i7_6c",allocatorRecommendationCard:"dashboard_allocatorRecommendationCard__OaKAV",allocatorRecommendationValue:"dashboard_allocatorRecommendationValue__t2zKV",sectionHeader:"dashboard_sectionHeader__VxCdb",sectionHeaderRow:"dashboard_sectionHeaderRow__oWGXb",trackerGrid:"dashboard_trackerGrid__BgXRH",weatherKpiSection:"dashboard_weatherKpiSection__IMNOx",weatherKpiGrid:"dashboard_weatherKpiGrid__jft_t",weatherKpiCard:"dashboard_weatherKpiCard__3ORcA",weatherKpiValue:"dashboard_weatherKpiValue__RrWRu",weatherKpiDelta:"dashboard_weatherKpiDelta__CrFdd",trackerCard:"dashboard_trackerCard__485_I",trackerValue:"dashboard_trackerValue__vodtN",trackerDelta:"dashboard_trackerDelta__exmFj",sparkline:"dashboard_sparkline__OFhMW",sparklineDefault:"dashboard_sparklineDefault__4jLzs",sparklinePositive:"dashboard_sparklinePositive__VXQ9j",sparklineNegative:"dashboard_sparklineNegative__vLAsh",sparklinePlaceholder:"dashboard_sparklinePlaceholder__emH6_",weatherSection:"dashboard_weatherSection__L17Tf",regionFilters:"dashboard_regionFilters__wzspa",regionFilterButton:"dashboard_regionFilterButton__xf8TW",regionFilterButtonActive:"dashboard_regionFilterButtonActive__ZUiYr",regionFilterLabel:"dashboard_regionFilterLabel__pquuy",regionFilterMeta:"dashboard_regionFilterMeta__1u5bK",regionFilterPriority:"dashboard_regionFilterPriority__ZWYVM",regionSuggestionBanner:"dashboard_regionSuggestionBanner__Tts9Z",regionSuggestionText:"dashboard_regionSuggestionText__ZbQzc",regionSuggestionRegion:"dashboard_regionSuggestionRegion__tiaZN",regionSuggestionMeta:"dashboard_regionSuggestionMeta__5fOtq",regionSuggestionReason:"dashboard_regionSuggestionReason__UCDho",regionSuggestionAction:"dashboard_regionSuggestionAction__rIFyq",suggestionTelemetrySection:"dashboard_suggestionTelemetrySection__yWrb8",suggestionTelemetryHeader:"dashboard_suggestionTelemetryHeader__vzFPU",suggestionTelemetryOverview:"dashboard_suggestionTelemetryOverview__Q7Gac",suggestionTelemetryTopSignal:"dashboard_suggestionTelemetryTopSignal__WxSQy",suggestionTelemetryTopSignalHeader:"dashboard_suggestionTelemetryTopSignalHeader__B2hhz",suggestionTelemetryTopSignalLabel:"dashboard_suggestionTelemetryTopSignalLabel__RPz4o",suggestionTelemetryTopSignalSummary:"dashboard_suggestionTelemetryTopSignalSummary__Q9Eez",suggestionTelemetryTopSignalMeta:"dashboard_suggestionTelemetryTopSignalMeta__ztpAq",suggestionTelemetryEmpty:"dashboard_suggestionTelemetryEmpty__mobqF",suggestionTelemetryList:"dashboard_suggestionTelemetryList__19CEA",suggestionTelemetryItem:"dashboard_suggestionTelemetryItem__7kA_e",suggestionTelemetryCopy:"dashboard_suggestionTelemetryCopy__GZGvg",suggestionTelemetryRegionRow:"dashboard_suggestionTelemetryRegionRow__gfxrO",suggestionTelemetryRegion:"dashboard_suggestionTelemetryRegion__wFcbR",suggestionTelemetryRiskBadge:"dashboard_suggestionTelemetryRiskBadge__JZK2x",suggestionTelemetrySummary:"dashboard_suggestionTelemetrySummary__kHGzS",suggestionTelemetryMeta:"dashboard_suggestionTelemetryMeta__8vKwZ",suggestionTelemetryStats:"dashboard_suggestionTelemetryStats__Mb4qR",suggestionTelemetryValue:"dashboard_suggestionTelemetryValue__yCwCt",suggestionTelemetryHighRiskValue:"dashboard_suggestionTelemetryHighRiskValue__IyHx5",suggestionTelemetryValueNumber:"dashboard_suggestionTelemetryValueNumber__yO4cX",suggestionTelemetryHighRiskDetail:"dashboard_suggestionTelemetryHighRiskDetail__5n5Ip",suggestionTelemetryConfidence:"dashboard_suggestionTelemetryConfidence__y_o_r",regionSummaryBanner:"dashboard_regionSummaryBanner__btHur",regionSummaryText:"dashboard_regionSummaryText__aMmx9",regionSummaryRegion:"dashboard_regionSummaryRegion__JrDcG",regionSummaryMeta:"dashboard_regionSummaryMeta__jelPH",regionSummaryClear:"dashboard_regionSummaryClear__a_t7u",contextSection:"dashboard_contextSection__CmAYf",tagList:"dashboard_tagList__K43NZ",tagChip:"dashboard_tagChip__bBSuL",contextList:"dashboard_contextList__9o6Fz",contextCard:"dashboard_contextCard__pNOJa",weatherGrid:"dashboard_weatherGrid__ksuiF",mapShell:"dashboard_mapShell__TrZlH",mapGradient:"dashboard_mapGradient__ZiXjN",mapMarker:"dashboard_mapMarker__721VQ",mapMarkerPulse:"dashboard_mapMarkerPulse__yi9_M",pulse:"dashboard_pulse__Pnu8T",mapMarkerDot:"dashboard_mapMarkerDot__Dw70v",mapMarkerDimmed:"dashboard_mapMarkerDimmed__R1xNw",mapMarkerActive:"dashboard_mapMarkerActive__QCZbx",mapMarkerlow:"dashboard_mapMarkerlow__q1EiD",mapMarkermedium:"dashboard_mapMarkermedium__YJVIi",mapMarkerhigh:"dashboard_mapMarkerhigh__ekT_C",timeline:"dashboard_timeline__VMbJ5",timelineItem:"dashboard_timelineItem__l0byM",timelineItemButton:"dashboard_timelineItemButton__xKgQJ",timelineItemActive:"dashboard_timelineItemActive__hdbtm",timelineEmpty:"dashboard_timelineEmpty__Nw466",weatherCallout:"dashboard_weatherCallout__8u7q9",automationSection:"dashboard_automationSection__frq79",ingestionSection:"dashboard_ingestionSection__kkiqD",alertSection:"dashboard_alertSection__nvQme",coverageSection:"dashboard_coverageSection__vhrbn",coverageGrid:"dashboard_coverageGrid__x7yKu",coverageCard:"dashboard_coverageCard__V4kg5",coverageCardHeader:"dashboard_coverageCardHeader__NVSws",coverageValue:"dashboard_coverageValue__SCIUz",coverageIssues:"dashboard_coverageIssues__9eWej",coverageNoIssues:"dashboard_coverageNoIssues__Ws_rn",automationGrid:"dashboard_automationGrid__WzC8_",automationCard:"dashboard_automationCard__1qKFq",automationValue:"dashboard_automationValue__rRv06",ingestionSummary:"dashboard_ingestionSummary__03_U6",ingestionTable:"dashboard_ingestionTable__PjS_D",alertSummary:"dashboard_alertSummary__SHo9P",alertEscalationSummary:"dashboard_alertEscalationSummary__vuLQx",alertList:"dashboard_alertList__0598H",alertCard:"dashboard_alertCard__RwU9t",alertActions:"dashboard_alertActions__nxjtk",alertMetaNote:"dashboard_alertMetaNote__ChpEP",offlineScrim:"dashboard_offlineScrim__syJIE"}}},function(e){e.O(0,[717,570,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);