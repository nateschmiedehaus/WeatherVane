(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[789],{9759:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scenarios",function(){return n(9820)}])},1162:function(e,a,n){"use strict";n.d(a,{Y:function(){return o}});let s=e=>{let a=new Date;return a.setHours(0,0,0,0),a.setDate(a.getDate()+e),a.toISOString().slice(0,10)},t={meta:{channel:"Meta Advantage+",headline:"Meta Advantage+ warm weather audiences ready for surge",supporting:["Heatwave cohorts historically lift Meta conversion rate 18-24%","Creative set `Sunrise Splash` optimized for high UV index days"]},google:{channel:"Google Search",headline:"High-intent queries climbing ahead of weather swing",supporting:["Weather-triggered bid rules show +32% impression share during anomalies","Branded queries hold steady; non-brand 'cooler deals' up 44%"]},email:{channel:"Klaviyo Email",headline:"Weather-conditioned lifecycle campaign primed for max reach",supporting:["Segment `Heat Relief VIP` shows 58% open rate during >95\xb0F streaks","Pre-approved copy variation and assets already localized for TX + AZ"]},pos:{channel:"Shopify POS",headline:"In-store traffic spikes with localized forecast signage",supporting:["Geofenced push notifications lift footfall 21% during cold snaps","Inventory buffer holds 4.2 days of surge-ready stock in top stores"]}},i={manual:{label:"Manual mode (review every recommendation)",guardrail:"Guardrails stay enforced; no automated pushes without sign-off."},assist:{label:"Assist mode (one-click approvals)",guardrail:"Assist queue batches approvals at 7am local time; guardrails re-check before push."},automation:{label:"Automation engine mode (hands-off within limits)",guardrail:"Automation engine respects daily delta caps and resets to Assist when guardrail breaches occur."}},r=[{plan_date:s(1),geo_group_id:"Texas \xb7 Gulf Region",category:"Cooling \xb7 Summer Essentials",channel:"Meta Advantage+",recommended_spend:4200,expected_revenue:{p10:6800,p50:11200,p90:14800},expected_roas:{p10:1.6,p50:2.67,p90:3.52},confidence:"HIGH",assumptions:["Historical conversion lift persists above 95\xb0F heat index"],rationale:{primary_driver:"Heatwave (Δ +11\xb0F) with dew point surge lifting beverage demand",supporting_factors:["Three-day forecast with sustained UV index ≥8","Meta Advantage+ audiences historically convert 22% better during heat anomalies","Inventory levels at 96% of safety stock threshold"],confidence_level:"HIGH",data_quality:"Weather + commerce backtest coverage 98%",assumptions:["Creative set localized for TX already approved"],risks:["Heat index above 105\xb0F can reduce in-store traffic if not paired with delivery CTA"]}},{plan_date:s(2),geo_group_id:"Colorado Front Range",category:"Outerwear \xb7 Cold Weather",channel:"Google Search",recommended_spend:2600,expected_revenue:{p10:4100,p50:7200,p90:9300},expected_roas:{p10:1.55,p50:2.77,p90:3.58},confidence:"MEDIUM",assumptions:["Snow advisory triggers same-day demand spike"],rationale:{primary_driver:"Incoming cold snap (Δ -16\xb0F) with advisory issued",supporting_factors:["Search demand for 'lightweight parka' up 41% vs seasonal baseline","Merchandising dashboards show 14 days of stock coverage","Google Smart Bidding historical lift +18% under similar weather anomalies"],confidence_level:"MEDIUM",data_quality:"Weather coverage 96%; Google Ads attribution window overlapping sale period",assumptions:["Courier capacity confirmed for overnight shipping"],risks:["Blizzard severity could delay fulfillment, reducing realized lift"]}},{plan_date:s(3),geo_group_id:"Pacific Northwest",category:"Rainwear \xb7 Commuter",channel:"Email \xb7 Klaviyo",recommended_spend:1100,expected_revenue:{p10:2200,p50:3600,p90:4500},expected_roas:{p10:2,p50:3.27,p90:4.09},confidence:"HIGH",assumptions:["Lifecycle drip campaign ready with weather conditional step"],rationale:{primary_driver:'Atmospheric river event delivering 1.8" rain in Seattle metro',supporting_factors:["Rain-triggered automation historically drives 32% click-to-open lift","SMS follow-up variant already QA’d with compliance team","Merch mix includes new breathable trench inventory"],confidence_level:"HIGH",data_quality:"Email + SMS attribution pipeline verified (92% open tracking coverage)",assumptions:["No deliverability degradation from recent sale blast"],risks:["Must throttle sends if engagement dips below 18% to maintain inbox placement"]}},{plan_date:s(4),geo_group_id:"Florida Peninsula",category:"Travel \xb7 Accessories",channel:"Meta Advantage+",recommended_spend:1500,expected_revenue:{p10:2e3,p50:3200,p90:4300},expected_roas:{p10:1.33,p50:2.13,p90:2.87},confidence:"LOW",assumptions:["Tropical storm watch remains downgraded"],rationale:{primary_driver:"Transient humidity spike with improved beach conditions after storm clears",supporting_factors:["Travel accessories cohort shows propensity shift +12%","Paid social creative refresh scheduled with new summer narrative","Airline bookings trending +7% week-over-week across Miami / Tampa"],confidence_level:"LOW",data_quality:"Weather forecast volatility \xb120%; campaign cohort limited to 180 conversions",assumptions:["Storm center continues moving east; no renewed warnings"],risks:["Rapid weather reversal could nullify demand spike"]}},{plan_date:s(5),geo_group_id:"New York Metro",category:"Essentials \xb7 Rain Gear",channel:"Google Search",recommended_spend:1800,expected_revenue:{p10:2500,p50:3900,p90:5200},expected_roas:{p10:1.39,p50:2.17,p90:2.89},confidence:"MEDIUM",assumptions:["Transit alerts drive commuter prep purchases"],rationale:{primary_driver:"Back-to-back rainfall events with flood advisory",supporting_factors:["Branded umbrella queries already up 33%","Creative set `Storm Ready` flagged green in QA","NY Metro heavy rainfall typically increases AOV 12%"],confidence_level:"MEDIUM",data_quality:"Attribution mix contains 45-day lookback; minimal missing conversions",assumptions:["Logistics team confirms expedited shipping thresholds met"],risks:["Flooding disruptions can impact warehouse dispatch SLAs"]}}];function o(e){let a=t[e.primaryChannel],n=r.map((n,s)=>0===s?{...n,channel:a.channel,rationale:{...n.rationale,primary_driver:a.headline,supporting_factors:a.supporting}}:"meta"===e.primaryChannel&&"Meta Advantage+"===n.channel||"google"===e.primaryChannel&&"Google Search"===n.channel||"email"===e.primaryChannel&&n.channel.includes("Email")?n:"pos"===e.primaryChannel&&n.geo_group_id.includes("Texas")?{...n,channel:"Shopify POS \xb7 Local activation",rationale:{...n.rationale,supporting_factors:["Localized signage kit scheduled for dawn delivery","POS loyalty notifications set to trigger at doors-open","In-store associates briefed on weather-specific offers"]}}:n);return{tenant_id:"demo-tour",generated_at:new Date().toISOString(),horizon_days:7,slices:n,context_tags:["demo","calm-theme","channel:".concat(e.primaryChannel),"automation:".concat(e.automationComfort)],data_context:{metadata:{dataset_rows:{orders:2340,campaigns:58,weather_events:12},weather_source:"open-meteo \xb7 synthetic forecast (demo)"}},context_warnings:[{code:"demo-automation-mode",message:i[e.automationComfort].label,severity:"info",tags:["demo","automation"]},{code:"demo-guardrail-reminder",message:i[e.automationComfort].guardrail,severity:"warning",tags:["demo","guardrail"]}],incrementality_summary:{treatment_mean:3.08,control_mean:2.54,absolute_lift:.54,lift:.212,p_value:.018,conf_low:.18,conf_high:.3,sample_size_treatment:420,sample_size_control:410,generated_at:new Date().toISOString(),is_significant:!0}}}},9820:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return em}});var s,t,i=n(5893),r=n(7294),o=n(9008),c=n.n(o),l=n(1664),d=n.n(l),m=n(2570),u=n(9182),p=n.n(u);let h={HIGH:1,MEDIUM:.6,LOW:.3},_={HIGH:"rgba(31, 195, 146, 0.24)",MEDIUM:"rgba(255, 184, 0, 0.24)",LOW:"rgba(255, 122, 122, 0.24)"},g={HIGH:"rgba(31, 195, 146, 0.48)",MEDIUM:"rgba(255, 184, 0, 0.48)",LOW:"rgba(255, 122, 122, 0.48)"},v=(e,a)=>(1-h[e.confidence])*(e.baseRoi&&e.scenarioRoi?Math.abs(e.scenarioRoi-e.baseRoi)/Math.max(e.baseRoi,.01):0)*(1+Math.abs(a-1)),f=e=>.4*Math.abs(e.deltaSpend)+.6*Math.abs(e.deltaRevenue),x=(e,a)=>{let n=h[e.confidence],s=Math.abs(a-1);return n>=.9&&s<=.15?"low":n>=.6&&s<=.25?"medium":"high"};function b(e){let{outcome:a,adjustments:n,showConfidenceBands:s=!0,showWeatherImpact:t=!0}=e,o=(0,r.useMemo)(()=>a.channels.map(e=>{var a;let s=null!==(a=n[e.channel])&&void 0!==a?a:1;return{channel:e.channel,confidence:e.confidence,impactScore:f(e),riskLevel:x(e,s),weatherSensitivity:v(e,s)}}),[a.channels,n]),c=(0,r.useMemo)(()=>Math.max(...o.map(e=>e.impactScore),1),[o]),l=(0,r.useMemo)(()=>Math.max(...o.map(e=>e.weatherSensitivity),.1),[o]);return(0,i.jsxs)("div",{className:p().overlayContainer,role:"region","aria-label":"Scenario overlay analysis",children:[(0,i.jsxs)("header",{className:p().overlayHeader,children:[(0,i.jsx)("h3",{className:"ds-subtitle",children:"Scenario overlay analysis"}),(0,i.jsx)("p",{className:"ds-caption",children:"Visual indicators show confidence levels, weather sensitivity, and impact magnitude for each channel adjustment."})]}),s&&(0,i.jsxs)("section",{className:p().confidenceBands,"aria-labelledby":"confidence-legend",children:[(0,i.jsx)("h4",{id:"confidence-legend",className:"ds-caption",style:{fontWeight:600},children:"Confidence bands"}),(0,i.jsx)("div",{className:p().bandGrid,children:o.map(e=>(0,i.jsxs)("div",{className:p().bandItem,style:{backgroundColor:_[e.confidence],borderLeft:"4px solid ".concat(g[e.confidence])},children:[(0,i.jsx)("span",{className:"ds-body-strong",children:e.channel}),(0,i.jsxs)("div",{className:p().bandMeta,children:[(0,i.jsx)("span",{className:"".concat(p().confidencePill," ").concat(p()["confidence".concat(e.confidence)]),children:e.confidence}),(0,i.jsxs)("span",{className:"ds-caption",children:[e.riskLevel," risk"]})]})]},"confidence-".concat(e.channel)))})]}),t&&(0,i.jsxs)("section",{className:p().weatherImpact,"aria-labelledby":"weather-impact-legend",children:[(0,i.jsx)("h4",{id:"weather-impact-legend",className:"ds-caption",style:{fontWeight:600},children:"Weather sensitivity indicators"}),(0,i.jsx)("p",{className:"ds-caption",style:{opacity:.72,marginTop:"0.5rem"},children:"Wider bars indicate higher weather exposure. Low-confidence channels with large adjustments show elevated sensitivity."}),(0,i.jsx)("div",{className:p().impactBars,children:o.sort((e,a)=>a.weatherSensitivity-e.weatherSensitivity).map(e=>{let a=e.weatherSensitivity/l*100;return(0,i.jsxs)("div",{className:p().impactRow,children:[(0,i.jsx)("span",{className:"ds-body",style:{minWidth:"140px"},children:e.channel}),(0,i.jsx)("div",{className:p().barContainer,children:(0,i.jsx)("div",{className:p().impactBar,style:{width:"".concat(Math.max(a,2),"%"),backgroundColor:e.weatherSensitivity>.6*l?"rgba(255, 122, 122, 0.48)":e.weatherSensitivity>.3*l?"rgba(255, 184, 0, 0.48)":"rgba(31, 195, 146, 0.48)"},"aria-label":"".concat(e.channel," weather sensitivity: ").concat(a.toFixed(0),"%")})}),(0,i.jsxs)("span",{className:"ds-caption",style:{minWidth:"50px",textAlign:"right"},children:[a.toFixed(0),"%"]})]},"impact-".concat(e.channel))})})]}),(0,i.jsxs)("section",{className:p().impactChart,"aria-labelledby":"impact-chart-legend",children:[(0,i.jsx)("h4",{id:"impact-chart-legend",className:"ds-caption",style:{fontWeight:600},children:"Impact magnitude"}),(0,i.jsx)("p",{className:"ds-caption",style:{opacity:.72,marginTop:"0.5rem"},children:"Channels with larger deltas (spend + revenue weighted) have greater influence on overall scenario outcomes."}),(0,i.jsx)("div",{className:p().impactBars,children:o.sort((e,a)=>a.impactScore-e.impactScore).map(e=>{let a=e.impactScore/c*100;return(0,i.jsxs)("div",{className:p().impactRow,children:[(0,i.jsx)("span",{className:"ds-body",style:{minWidth:"140px"},children:e.channel}),(0,i.jsx)("div",{className:p().barContainer,children:(0,i.jsx)("div",{className:p().impactBar,style:{width:"".concat(Math.max(a,2),"%"),backgroundColor:"rgba(81, 120, 255, 0.48)"},"aria-label":"".concat(e.channel," impact: ").concat(a.toFixed(0),"%")})}),(0,i.jsxs)("span",{className:"ds-caption",style:{minWidth:"50px",textAlign:"right"},children:[a.toFixed(0),"%"]})]},"magnitude-".concat(e.channel))})})]})]})}let y=["export_type","generated_at","horizon_days","total_base_spend","total_scenario_spend","delta_spend","total_base_revenue","total_scenario_revenue","delta_revenue","base_roi","scenario_roi","weighted_confidence"],j=["channel","confidence","base_spend","base_revenue","base_roi","scenario_spend","scenario_revenue","scenario_roi","delta_spend","delta_revenue","adjustment_multiplier"],N=["recommendation_id","label","description","tags","channel","multiplier","rationale","confidence"],S=e=>"number"==typeof e&&Number.isFinite(e)?e.toString():"",w=e=>{if(""===e)return"";if(/[",\n]/.test(e)){let a=e.replace(/"/g,'""');return'"'.concat(a,'"')}return e},R=e=>"number"==typeof e&&Number.isFinite(e)?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e):"$0",C=e=>{if(!Number.isFinite(e))return"0%";let a=Math.round((e-1)*100);return 0===a?"0%":"".concat(a>0?"+":"").concat(a,"%")},M=e=>"number"!=typeof e||!Number.isFinite(e)||e<=0?"0.0x":"".concat(e.toFixed(2),"x"),k=(e,a,n)=>{let s=e.summary;return[y.join(","),["scenario_summary",new Date().toISOString(),n.toString(),S(s.totalBaseSpend),S(s.totalScenarioSpend),S(s.deltaSpend),S(s.totalBaseRevenue),S(s.totalScenarioRevenue),S(s.deltaRevenue),S(s.baseRoi),S(s.scenarioRoi),s.weightedConfidence].map(w).join(",")].join("\n")},I=(e,a)=>[j.join(","),...e.channels.map(e=>{var n;let s=null!==(n=a[e.channel])&&void 0!==n?n:1;return[e.channel,e.confidence,S(e.baseSpend),S(e.baseRevenue),S(e.baseRoi),S(e.scenarioSpend),S(e.scenarioRevenue),S(e.scenarioRoi),S(e.deltaSpend),S(e.deltaRevenue),S(s)]}).map(e=>e.map(w).join(","))].join("\n"),B=e=>{let a=N.join(","),n=[];return e.forEach(e=>{e.adjustments.forEach(a=>{n.push([e.id,e.label,e.description,e.tags.join("; "),a.channel,S(a.multiplier),a.rationale,a.confidence])})}),[a,...n.map(e=>e.map(w).join(","))].join("\n")},E=(e,a,n,s,t)=>{let i=[];return i.push("[SCENARIO SUMMARY]"),i.push(k(e,s,t)),i.push(""),i.push("[CHANNEL DETAILS]"),i.push(I(e,n)),i.push(""),a.length>0&&(i.push("[RECOMMENDATIONS]"),i.push(B(a))),i.join("\n")},A=(e,a)=>{let n=e.replace(/[^a-zA-Z0-9_-]/g,"-")||"tenant",s=new Date().toISOString().replace(/\.\d{3}Z$/,"Z").replace(/:/g,"-");return"weathervane-scenario-".concat(n,"-").concat(s,".").concat("csv"===a?"csv":"pptx.json")},H=(e,a,n,s,t)=>{let i=[];i.push({slideType:"title",title:"WeatherVane Scenario Analysis",subtitle:"".concat(s," • ").concat(t,"-day horizon • ").concat(new Date().toLocaleDateString()),content:[]});let r=e.summary;return i.push({slideType:"summary",title:"Scenario Impact Summary",content:[{type:"metric",data:{label:"Base Spend",value:R(r.totalBaseSpend),sentiment:"neutral"}},{type:"metric",data:{label:"Scenario Spend",value:R(r.totalScenarioSpend),delta:R(r.deltaSpend),sentiment:r.deltaSpend>=0?"positive":"negative"}},{type:"metric",data:{label:"Base Revenue (p50)",value:R(r.totalBaseRevenue),sentiment:"neutral"}},{type:"metric",data:{label:"Scenario Revenue (p50)",value:R(r.totalScenarioRevenue),delta:R(r.deltaRevenue),sentiment:r.deltaRevenue>=0?"positive":"negative"}},{type:"metric",data:{label:"Scenario ROI",value:M(r.scenarioRoi),sentiment:"positive"}},{type:"metric",data:{label:"Confidence Level",value:r.weightedConfidence,sentiment:"neutral"}}]}),i.push({slideType:"channel_detail",title:"Channel-by-Channel Impact",content:[{type:"table",data:{headers:["Channel","Adjustment","Δ Spend","Δ Revenue","Scenario ROI"],rows:e.channels.map(e=>{var a;return[e.channel,C(null!==(a=n[e.channel])&&void 0!==a?a:1),R(e.deltaSpend),R(e.deltaRevenue),M(e.scenarioRoi)]})}}]}),i.push({slideType:"chart",title:"Spend Allocation Changes",content:[{type:"chart_reference",data:{chartType:"waterfall",title:"Channel Spend Deltas",dataPoints:e.channels.map(e=>({label:e.channel,value:e.deltaSpend}))}}]}),a.forEach(e=>{i.push({slideType:"recommendation",title:e.label,subtitle:e.description,content:[{type:"text",data:"Tags: ".concat(e.tags.join(", "))},{type:"table",data:{headers:["Channel","Adjustment","Rationale"],rows:e.adjustments.map(e=>[e.channel,C(e.multiplier),e.rationale])}}]})}),i},T=e=>JSON.stringify({version:"1.0",generatedAt:new Date().toISOString(),slides:e},null,2),F=(e,a,n)=>{let s=new Blob([e],{type:n}),t=URL.createObjectURL(s),i=document.createElement("a");i.href=t,i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)};function D(e){let{outcome:a,recommendations:n,adjustments:s,tenantId:t,horizonDays:o,className:c,analyticsId:l="scenario.export",onExport:d}=e,[m,u]=(0,r.useState)(!1),p=(0,r.useCallback)(()=>{if(!a)return;let e=E(a,n,s,t,o),i=A(t,"csv");d?d(e,i,"csv"):F(e,i,"text/csv;charset=utf-8;"),u(!1)},[a,n,s,t,o,d]),h=(0,r.useCallback)(()=>{if(!a)return;let e=T(H(a,n,s,t,o)),i=A(t,"pptx");d?d(e,i,"pptx"):F(e,i,"application/json;charset=utf-8;"),u(!1)},[a,n,s,t,o,d]),_=!a;return(0,i.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,i.jsx)("button",{type:"button",onClick:()=>u(!m),className:c,"data-analytics-id":l,disabled:_,"aria-label":"Export scenario analysis","aria-expanded":m,"aria-haspopup":"true",children:"Export scenario →"}),m&&(0,i.jsxs)("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.5rem",minWidth:"220px",backgroundColor:"var(--ds-surface-default, rgba(20, 20, 24, 0.96))",border:"1px solid var(--ds-border-subtle, rgba(255, 255, 255, 0.12))",borderRadius:"0.5rem",boxShadow:"0 4px 16px rgba(0,0,0,0.24)",zIndex:10,overflow:"hidden"},role:"menu","aria-label":"Export format options",children:[(0,i.jsxs)("button",{type:"button",onClick:p,style:{display:"block",width:"100%",padding:"0.75rem 1rem",textAlign:"left",border:"none",backgroundColor:"transparent",color:"inherit",cursor:"pointer",fontSize:"0.875rem",transition:"background 120ms ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.08)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},"data-analytics-id":"".concat(l,".csv"),role:"menuitem",children:[(0,i.jsx)("strong",{style:{display:"block",marginBottom:"0.25rem"},children:"Export CSV"}),(0,i.jsx)("span",{style:{display:"block",fontSize:"0.75rem",opacity:.72},children:"Complete scenario analysis"})]}),(0,i.jsxs)("button",{type:"button",onClick:h,style:{display:"block",width:"100%",padding:"0.75rem 1rem",textAlign:"left",border:"none",borderTop:"1px solid var(--ds-border-subtle, rgba(255, 255, 255, 0.08))",backgroundColor:"transparent",color:"inherit",cursor:"pointer",fontSize:"0.875rem",transition:"background 120ms ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.08)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},"data-analytics-id":"".concat(l,".pptx"),role:"menuitem",children:[(0,i.jsx)("strong",{style:{display:"block",marginBottom:"0.25rem"},children:"Export PowerPoint Data"}),(0,i.jsx)("span",{style:{display:"block",fontSize:"0.75rem",opacity:.72},children:"JSON format for presentation tools"})]})]})]})}var L=n(2404),O=n.n(L);function U(e){let{isOpen:a,onClose:n,onSave:s,isSaving:t=!1}=e,[o,c]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[p,h]=(0,r.useState)([]),_=()=>{let e=m.trim();e&&!p.includes(e)&&(h([...p,e]),u(""))},g=e=>{h(p.filter(a=>a!==e))},v=async e=>{e.preventDefault(),o.trim()&&(await s(o,l,p),c(""),d(""),h([]),u(""))};return a?(0,i.jsx)("div",{className:O().overlay,onClick:n,children:(0,i.jsxs)("div",{className:O().modal,onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("header",{className:O().header,children:[(0,i.jsx)("h2",{className:"ds-title",children:"Save scenario"}),(0,i.jsx)("button",{type:"button",onClick:n,className:O().closeButton,"aria-label":"Close dialog",disabled:t,children:"\xd7"})]}),(0,i.jsxs)("form",{onSubmit:v,className:O().form,children:[(0,i.jsxs)("div",{className:O().formGroup,children:[(0,i.jsxs)("label",{htmlFor:"scenario-name",className:"ds-body-strong",children:["Scenario name ",(0,i.jsx)("span",{className:O().required,children:"*"})]}),(0,i.jsx)("input",{id:"scenario-name",type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"e.g., High-confidence expansion Q4",className:O().input,required:!0,disabled:t,autoFocus:!0})]}),(0,i.jsxs)("div",{className:O().formGroup,children:[(0,i.jsx)("label",{htmlFor:"scenario-description",className:"ds-body-strong",children:"Description"}),(0,i.jsx)("textarea",{id:"scenario-description",value:l,onChange:e=>d(e.target.value),placeholder:"What assumptions or context drove this scenario?",className:O().textarea,rows:3,disabled:t})]}),(0,i.jsxs)("div",{className:O().formGroup,children:[(0,i.jsx)("label",{htmlFor:"scenario-tags",className:"ds-body-strong",children:"Tags"}),(0,i.jsxs)("div",{className:O().tagInput,children:[(0,i.jsx)("input",{id:"scenario-tags",type:"text",value:m,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),_())},placeholder:"Add tag (press Enter)",className:O().input,disabled:t}),(0,i.jsx)("button",{type:"button",onClick:_,className:O().addTagButton,disabled:t||!m.trim(),children:"Add tag"})]}),p.length>0&&(0,i.jsx)("div",{className:O().tagList,role:"list",children:p.map(e=>(0,i.jsxs)("span",{className:O().tag,role:"listitem",children:[e,(0,i.jsx)("button",{type:"button",onClick:()=>g(e),className:O().removeTagButton,"aria-label":"Remove tag ".concat(e),disabled:t,children:"\xd7"})]},e))})]}),(0,i.jsxs)("div",{className:O().actions,children:[(0,i.jsx)("button",{type:"button",onClick:n,className:O().cancelButton,disabled:t,children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:O().saveButton,disabled:t||!o.trim(),children:t?"Saving...":"Save scenario"})]})]})]})}):null}var W=n(941),G=n.n(W);function P(e){let{snapshots:a,onLoad:n,onDelete:s,loading:t=!1}=e,[o,c]=(0,r.useState)(null),l=e=>{let a=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}).format(a)},d=e=>null===e?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),m=e=>null===e||e<=0?"—":"".concat(e.toFixed(2),"x");return t?(0,i.jsx)("div",{className:G().root,children:(0,i.jsx)("p",{className:"ds-body",role:"status",children:"Loading saved scenarios..."})}):0===a.length?(0,i.jsx)("div",{className:G().root,children:(0,i.jsx)("p",{className:"ds-body",role:"status",children:"No saved scenarios yet. Adjust channels and click “Save scenario” to create your first snapshot."})}):(0,i.jsx)("div",{className:G().root,children:(0,i.jsx)("div",{className:G().snapshotList,role:"list",children:a.map(e=>{let a=o===e.id,t=Object.keys(e.adjustments).length;return(0,i.jsxs)("article",{className:"".concat(G().snapshotCard," ").concat(a?G().expanded:""),role:"listitem",children:[(0,i.jsxs)("header",{className:G().cardHeader,children:[(0,i.jsxs)("div",{className:G().cardTitle,children:[(0,i.jsx)("h3",{className:"ds-subtitle",children:e.name}),(0,i.jsx)("span",{className:"ds-caption",children:l(e.created_at)})]}),(0,i.jsxs)("div",{className:G().cardActions,children:[(0,i.jsx)("button",{type:"button",onClick:()=>n(e),className:G().loadButton,"aria-label":"Load scenario ".concat(e.name),children:"Load scenario"}),(0,i.jsx)("button",{type:"button",onClick:()=>c(a?null:e.id||null),className:G().expandButton,"aria-label":a?"Collapse details":"Expand details","aria-expanded":a,children:a?"−":"+"})]})]}),e.description&&(0,i.jsx)("p",{className:"".concat(G().description," ds-caption"),children:e.description}),e.tags.length>0&&(0,i.jsx)("div",{className:G().tags,role:"list",children:e.tags.map(e=>(0,i.jsx)("span",{className:G().tag,role:"listitem",children:e},e))}),(0,i.jsxs)("dl",{className:G().summary,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"ds-caption",children:"Channels adjusted"}),(0,i.jsx)("dd",{className:"ds-body-strong",children:t})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"ds-caption",children:"Scenario spend"}),(0,i.jsx)("dd",{className:"ds-body-strong",children:d(e.total_scenario_spend)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"ds-caption",children:"Scenario ROI"}),(0,i.jsx)("dd",{className:"ds-body-strong",children:m(e.scenario_roi)})]})]}),a&&(0,i.jsxs)("div",{className:G().details,children:[(0,i.jsx)("h4",{className:"ds-body-strong",children:"Channel adjustments"}),(0,i.jsx)("dl",{className:G().adjustments,children:Object.entries(e.adjustments).map(e=>{let[a,n]=e,s=Math.round((n-1)*100);return(0,i.jsxs)("div",{className:G().adjustmentRow,children:[(0,i.jsx)("dt",{className:"ds-caption",children:a}),(0,i.jsxs)("dd",{className:"ds-body-strong ".concat(s>=0?G().positive:G().negative),children:[s>0?"+":"",s,"%"]})]},a)})}),(0,i.jsx)("div",{className:G().detailActions,children:(0,i.jsx)("button",{type:"button",onClick:()=>e.id&&s(e.id),className:G().deleteButton,children:"Delete scenario"})})]})]},e.id)})})})}var z=n(6091),q=n(1162),Q=n(8301),V=n.n(Q);let X=["LOW","MEDIUM","HIGH"],Y={HIGH:3,MEDIUM:2,LOW:1},Z={HIGH:1,MEDIUM:.6,LOW:.3},K={HIGH:.05,MEDIUM:.15,LOW:.3},J="MEDIUM";function $(e,a){return e.reduce((e,n)=>{let s=a(n);return e+("number"==typeof s&&Number.isFinite(s)?s:0)},0)}function ee(e,a){return Number.isFinite(e)&&!(e<=0)&&Number.isFinite(a)?a/e:null}function ea(e){return e.baseRoi&&Number.isFinite(e.baseRoi)?e.baseRoi:e.spend<=0?0:e.revenue/e.spend}function en(e,a){let{increase:n,bump:s}=a;return!Number.isFinite(s)||s<=0?[]:e.map(e=>{let a=ea(e),t=Number.isFinite(a)&&a>0?"".concat(a.toFixed(1),"x ROI"):"ROI signal building";return{channel:e.channel,multiplier:n?1+s:1-s,confidence:e.confidence,rationale:"".concat(n?"Increase":"Reduce"," by ").concat(Math.round(100*s),"% (").concat(t,", ").concat(function(e){switch(e){case"HIGH":return"high";case"MEDIUM":return"moderate";default:return"low"}}(e.confidence)," confidence).")}})}function es(e){if(!e.channels.length)return[];let a=e.channels.map(e=>ea(e)).filter(e=>Number.isFinite(e)&&e>0),n=a.length>0?a.reduce((e,a)=>e+a,0)/a.length:0,s=e.channels.map(e=>Z[e.confidence]),t=s.reduce((e,a)=>e+a,0)/s.length,i=e.channels.filter(e=>{let a=ea(e),s=Z[e.confidence];return a>=n&&s>=Math.max(t,.55)}),r=[...e.channels].sort((e,a)=>ea(a)-ea(e));0===i.length&&r.length>0&&i.push(r[0]);let o=e.channels.filter(e=>{let a=ea(e);return Z[e.confidence]<=Math.max(t-.05,.45)||a<=.85*n});0===o.length&&r.length>0&&o.push(r[r.length-1]);let c=[];if(r.length>=2){let e=r[0],a=r[r.length-1];e.channel!==a.channel&&(c=[e,a])}let l=[{id:"accelerate_high_confidence",label:"Accelerate high-confidence reach",description:"Increase exposure on channels with resilient ROI and strong weather confidence.",adjustments:en(i,{increase:!0,bump:.15}),tags:["growth","high-confidence"]},{id:"stabilise_low_signal",label:"Stabilise low-signal spend",description:"Dial back budget from channels showing weak ROI or low confidence until telemetry firms up.",adjustments:en(o,{increase:!1,bump:.1}),tags:["risk","confidence"]}];if(2===c.length){let[e,a]=c;l.push({id:"rebalance_mix",label:"Rebalance mix for weather swings",description:"Shift budget toward resilient performers while easing pressure on softer channels.",adjustments:[...en([e],{increase:!0,bump:.12}),...en([a],{increase:!1,bump:.08})],tags:["balanced","mix-shift"]})}return l}var et=n(3454);let ei=null!==(s=et.env.NEXT_PUBLIC_TENANT_ID)&&void 0!==s?s:"demo-tenant",er=Number(null!==(t=et.env.NEXT_PUBLIC_PLAN_HORIZON)&&void 0!==t?t:"7");function eo(e){return"number"==typeof e&&Number.isFinite(e)?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:Math.abs(e)>=1e3?0:2}).format(e):"—"}function ec(e){if(!Number.isFinite(e))return"0%";let a=Math.round((e-1)*100);return 0===a?"0%":"".concat(a>0?"+":"").concat(a,"%")}function el(e){return"number"!=typeof e||!Number.isFinite(e)||e<=0?"—":"".concat(e.toFixed(e>=10?1:2),"x")}function ed(e){switch(e){case"HIGH":return"High confidence";case"MEDIUM":return"Moderate confidence";default:return"Low confidence"}}function em(){let[e,a]=(0,r.useState)(null),[n,s]=(0,r.useState)(null),[t,o]=(0,r.useState)({}),[l,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[_,g]=(0,r.useState)(!1),[v,f]=(0,r.useState)([]),[x,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[S,w]=(0,r.useState)(!1),[R,C]=(0,r.useState)([]),[M,k]=(0,r.useState)(!1),[I,B]=(0,r.useState)(null),[E,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=!1;return async function(){u(!0);try{let n=await (0,z.Eo)(ei,er);if(e)return;a(n),g(!1)}catch(n){if(e)return;a((0,q.Y)()),h(n instanceof Error?n.message:"Failed to load live plan data. Showing demo scenario instead."),g(!0)}finally{e||u(!1)}}(),()=>{e=!0}},[]),(0,r.useEffect)(()=>{if(!e){s(null),o({});return}let a=function(e){let a=new Map;for(let s of e.slices){var n;let e=(null===(n=s.channel)||void 0===n?void 0:n.trim())||"Unassigned channel",t=a.get(e);t?t.push(s):a.set(e,[s])}let s=Array.from(a.entries()).map(e=>{let[a,n]=e,s=$(n,e=>e.recommended_spend),t=$(n,e=>{var a,n;return null!==(n=null===(a=e.expected_revenue)||void 0===a?void 0:a.p50)&&void 0!==n?n:null});return{channel:a,spend:s,revenue:t,confidence:function(e){var a;if(0===e.length)return J;let n=Math.min(...e.map(e=>{var a;return Y[(a=e.confidence)&&("HIGH"===a||"MEDIUM"===a||"LOW"===a)?a:J]}));return null!==(a=X.find(e=>Y[e]===n))&&void 0!==a?a:J}(n),baseRoi:ee(s,t)}});s.sort((e,a)=>a.spend-e.spend);let t=s.reduce((e,a)=>e+a.spend,0),i=s.reduce((e,a)=>e+a.revenue,0);return{channels:s,totalSpend:t,totalRevenue:i,horizonDays:e.horizon_days}}(e);s(a);let n={};a.channels.forEach(e=>{n[e.channel]=1}),o(n),f([]),y(null),N(null)},[e]),(0,r.useEffect)(()=>{if(!n){f([]),y(null);return}let e=!1;return async function(){try{if(_){let a=es(n);e||(f(a),y(0===a.length?"No scenario recommendations available for the current plan.":null));return}let a=await (0,z.XT)(ei,er);if(e)return;let s=a.recommendations.length?a.recommendations:es(n);f(s),y(0===s.length?"Scenario recommendations unavailable for the current telemetry.":null)}catch(t){if(e)return;let a=es(n);f(a);let s=t instanceof Error?t.message:"Unable to load scenario recommendations.";y(a.length?"".concat(s," Using locally generated scenario mix."):"".concat(s," Scenario recommendations unavailable."))}}(),()=>{e=!0}},[n,_]),(0,r.useEffect)(()=>{let e=!1;return async function(){k(!0),B(null);try{let a=await (0,z.ko)(ei);e||C(a.snapshots)}catch(a){e||B(a instanceof Error?a.message:"Failed to load saved scenarios.")}finally{e||k(!1)}}(),()=>{e=!0}},[]);let H=async(e,a,s)=>{if(n){A(!0);try{let n=await (0,z.E2)(ei,e,t,er,a,s);C(e=>[n,...e]),w(!1)}catch(a){let e=a instanceof Error?a.message:"Failed to save scenario.";alert("Error saving scenario: ".concat(e))}finally{A(!1)}}},T=async e=>{if(confirm("Delete this saved scenario?"))try{await (0,z.Zn)(ei,e),C(a=>a.filter(a=>a.id!==e))}catch(a){let e=a instanceof Error?a.message:"Failed to delete scenario.";alert("Error deleting scenario: ".concat(e))}},F=(0,r.useMemo)(()=>n?function(e,a){let n=e.channels.map(e=>{var n,s,t;let i;let r=Number.isFinite(t=null!==(n=a[e.channel])&&void 0!==n?n:1)?Math.max(0,t):1,o=r-1,c=null!==(s=K[e.confidence])&&void 0!==s?s:K.MEDIUM;(!Number.isFinite(i=o>=0?1+o*(1-c):1+o*(1+c))||i<0)&&(i=0);let l=e.spend*r,d=e.revenue*i,m=e.spend,u=e.revenue;return{channel:e.channel,confidence:e.confidence,baseSpend:m,baseRevenue:u,scenarioSpend:l,scenarioRevenue:d,deltaSpend:l-m,deltaRevenue:d-u,baseRoi:e.baseRoi,scenarioRoi:ee(l,d)}}),s=e.totalSpend,t=e.totalRevenue,i=n.reduce((e,a)=>e+a.scenarioSpend,0),r=n.reduce((e,a)=>e+a.scenarioRevenue,0);return{summary:{totalBaseSpend:s,totalScenarioSpend:i,totalBaseRevenue:t,totalScenarioRevenue:r,deltaSpend:i-s,deltaRevenue:r-t,baseRoi:ee(s,t),scenarioRoi:ee(i,r),weightedConfidence:function(e,a){if(!Number.isFinite(a)||a<=0)return J;let n=e.reduce((e,n)=>e+n.scenarioSpend/a*Y[n.confidence],0);return n>=2.5?"HIGH":n>=1.75?"MEDIUM":"LOW"}(n,i)},channels:n}}(n,t):null,[n,t]),L=(0,r.useMemo)(()=>{var e;return null!==(e=null==F?void 0:F.summary)&&void 0!==e?e:null},[F]),O=L?L.deltaSpend:0,W=L?L.deltaRevenue:0,G=(e,a)=>{let n=Number.isFinite(a)?a/100:1;o(a=>({...a,[e]:n})),N(null)},Q=e=>{if(!n)return;let a={};n.channels.forEach(n=>{let s=e.adjustments.find(e=>e.channel===n.channel);a[n.channel]=s?s.multiplier:1}),o(a),N(e.id)};return(0,i.jsxs)(m.A,{children:[(0,i.jsx)(c(),{children:(0,i.jsx)("title",{children:"WeatherVane \xb7 Scenario builder"})}),(0,i.jsxs)("div",{className:V().root,children:[(0,i.jsxs)("section",{className:"".concat(V().hero," ds-surface-glass"),children:[(0,i.jsxs)("div",{className:V().heroHeader,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"ds-title",children:"Scenario builder"}),(0,i.jsx)("p",{className:"ds-body",children:"Adjust channel exposure to explore weather-driven “what if” cases. Use this to brief Priya and Sarah on projected spend, revenue, and confidence before approving plan changes."})]}),(0,i.jsxs)("div",{className:V().heroActions,children:[F&&(0,i.jsx)(D,{outcome:F,recommendations:v,adjustments:t,tenantId:ei,horizonDays:er,className:V().exportButton}),(0,i.jsx)("button",{type:"button",onClick:()=>w(!0),className:V().saveButton,children:"Save scenario"}),(0,i.jsx)("button",{type:"button",onClick:()=>{if(!n)return;let e={};n.channels.forEach(a=>{e[a.channel]=1}),o(e),N(null)},className:V().resetButton,children:"Reset adjustments"}),(0,i.jsx)(d(),{href:"/plan",className:V().planLink,children:"Back to plan"})]})]}),_&&(0,i.jsxs)("p",{className:"".concat(V().fallbackNotice," ds-caption"),role:"status",children:["Showing demo plan baseline. ",null!=p?p:"Live plan data unavailable; using seeded telemetry."]}),l&&(0,i.jsx)("p",{className:"ds-body",role:"status",children:"Loading latest plan…"}),L&&(0,i.jsx)("div",{className:V().summaryGrid,"aria-live":"polite",children:(()=>{let e=L.totalBaseSpend>0?L.totalScenarioSpend/L.totalBaseSpend:1,a=L.totalBaseRevenue>0?L.totalScenarioRevenue/L.totalBaseRevenue:1;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("article",{className:V().summaryCard,children:[(0,i.jsx)("span",{className:"ds-caption",children:"Base spend"}),(0,i.jsx)("strong",{className:"ds-display-small",children:eo(L.totalBaseSpend)})]}),(0,i.jsxs)("article",{className:V().summaryCard,children:[(0,i.jsx)("span",{className:"ds-caption",children:"Scenario spend"}),(0,i.jsx)("strong",{className:"ds-display-small",children:eo(L.totalScenarioSpend)}),(0,i.jsxs)("span",{className:"".concat(V().deltaBadge," ").concat(O>=0?V().deltaPositive:V().deltaNegative),children:[eo(O)," (",ec(e),")"]})]}),(0,i.jsxs)("article",{className:V().summaryCard,children:[(0,i.jsx)("span",{className:"ds-caption",children:"Base revenue (p50)"}),(0,i.jsx)("strong",{className:"ds-display-small",children:eo(L.totalBaseRevenue)})]}),(0,i.jsxs)("article",{className:V().summaryCard,children:[(0,i.jsx)("span",{className:"ds-caption",children:"Scenario revenue (p50)"}),(0,i.jsx)("strong",{className:"ds-display-small",children:eo(L.totalScenarioRevenue)}),(0,i.jsxs)("span",{className:"".concat(V().deltaBadge," ").concat(W>=0?V().deltaPositive:V().deltaNegative),children:[eo(W)," (",ec(a),")"]})]}),(0,i.jsxs)("article",{className:V().summaryCard,children:[(0,i.jsx)("span",{className:"ds-caption",children:"Scenario ROI"}),(0,i.jsx)("strong",{className:"ds-display-small",children:el(L.scenarioRoi)}),(0,i.jsx)("span",{className:"".concat(V().confidenceBadge," ds-caption"),children:ed(L.weightedConfidence)})]})]})})()})]}),(0,i.jsxs)("section",{className:"".concat(V().recommendations," ds-surface"),children:[(0,i.jsx)("header",{className:V().recommendationsHeader,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"ds-title",children:"Recommended scenarios"}),(0,i.jsx)("p",{className:"ds-body",children:"Atlas surfaces mixes balancing ROI with weather confidence. Apply a recommendation to pre-fill sliders, then fine-tune channel weights before sharing with stakeholders."})]})}),x&&(0,i.jsx)("p",{className:"".concat(V().recommendationsNotice," ds-caption"),role:"status",children:x}),!x&&0===v.length&&(0,i.jsx)("p",{className:"ds-body",role:"status",children:"Scenario recommendations will appear once telemetry contains sufficient coverage."}),(0,i.jsx)("div",{className:V().recommendationGrid,children:v.map(e=>{let a=e.id===j;return(0,i.jsxs)("article",{className:"".concat(V().recommendationCard," ").concat(a?V().recommendationCardActive:""),children:[(0,i.jsxs)("header",{className:V().recommendationCardHeader,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"ds-subtitle",children:e.label}),(0,i.jsx)("p",{className:"ds-caption",children:e.description})]}),(0,i.jsx)("div",{className:V().recommendationTags,role:"list",children:e.tags.map(e=>(0,i.jsx)("span",{role:"listitem",className:V().recommendationTag,children:e},e))})]}),(0,i.jsx)("dl",{className:V().recommendationAdjustments,children:e.adjustments.map(a=>(0,i.jsxs)("div",{className:V().adjustmentRow,children:[(0,i.jsx)("dt",{children:a.channel}),(0,i.jsxs)("dd",{children:[(0,i.jsx)("span",{className:V().adjustmentMultiplier,children:ec(a.multiplier)}),(0,i.jsx)("span",{className:V().adjustmentRationale,children:a.rationale})]})]},"".concat(e.id,"-").concat(a.channel)))}),(0,i.jsx)("button",{type:"button",onClick:()=>Q(e),className:V().applyRecommendationButton,"aria-pressed":a,children:a?"Applied":"Apply scenario"})]},e.id)})})]}),(0,i.jsxs)("section",{className:"".concat(V().controls," ds-surface-glass"),children:[(0,i.jsxs)("header",{children:[(0,i.jsx)("h2",{className:"ds-title",children:"Channel adjustments"}),(0,i.jsx)("p",{className:"ds-body",children:"Set the expected demand shift for each channel. Sliders scale recommended spend, while revenue is adjusted using confidence-weighted lift assumptions."})]}),!n&&!l&&(0,i.jsx)("p",{className:"ds-body",role:"status",children:"Scenario baseline unavailable. Refresh to retry."}),null==n?void 0:n.channels.map(e=>{var a,n;let s=null!==(a=t[e.channel])&&void 0!==a?a:1,r=function(e){let a=Math.round(100*e);return Number.isFinite(a)?Math.min(130,Math.max(70,a)):100}(s),o=null==F?void 0:F.channels.find(a=>a.channel===e.channel);return(0,i.jsxs)("div",{className:V().controlRow,children:[(0,i.jsxs)("div",{className:V().controlHeader,children:[(0,i.jsx)("strong",{className:"ds-body-strong",children:e.channel}),(0,i.jsx)("span",{className:"ds-caption",children:ed(e.confidence)})]}),(0,i.jsxs)("div",{className:V().sliderRow,children:[(0,i.jsx)("label",{htmlFor:"scenario-".concat(e.channel),className:"ds-caption",children:"Demand shift"}),(0,i.jsx)("input",{id:"scenario-".concat(e.channel),type:"range",min:70,max:130,step:1,value:r,onChange:a=>G(e.channel,Number(a.target.value)),className:V().slider,"aria-valuetext":ec(s)}),(0,i.jsx)("span",{className:"ds-body-strong",children:ec(s)})]}),(0,i.jsxs)("dl",{className:V().channelStats,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"ds-caption",children:"Base spend"}),(0,i.jsx)("dd",{className:"ds-body-strong",children:eo(e.spend)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"ds-caption",children:"Scenario spend"}),(0,i.jsx)("dd",{className:"ds-body-strong",children:eo(null!==(n=null==o?void 0:o.scenarioSpend)&&void 0!==n?n:e.spend*s)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"ds-caption",children:"Base ROI"}),(0,i.jsx)("dd",{className:"ds-body-strong",children:el(e.baseRoi)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"ds-caption",children:"Scenario ROI"}),(0,i.jsx)("dd",{className:"ds-body-strong",children:el(null==o?void 0:o.scenarioRoi)})]})]})]},e.channel)})]}),F&&(0,i.jsxs)("section",{className:"".concat(V().outcome," ds-surface-card"),children:[(0,i.jsxs)("header",{className:V().outcomeHeader,children:[(0,i.jsx)("h2",{className:"ds-title",children:"Scenario impact"}),(0,i.jsx)("p",{className:"ds-body",children:"Review aggregate deltas by channel before exporting or sharing this outlook."})]}),(0,i.jsxs)("div",{className:V().outcomeTable,role:"table","aria-label":"Scenario channel impact",children:[(0,i.jsxs)("div",{className:"".concat(V().tableRow," ").concat(V().tableHead),role:"row",children:[(0,i.jsx)("span",{role:"columnheader",children:"Channel"}),(0,i.jsx)("span",{role:"columnheader",children:"Δ Spend"}),(0,i.jsx)("span",{role:"columnheader",children:"Δ Revenue"}),(0,i.jsx)("span",{role:"columnheader",children:"Scenario ROI"})]}),F.channels.map(e=>(0,i.jsxs)("div",{className:V().tableRow,role:"row",children:[(0,i.jsx)("span",{className:"ds-body-strong",role:"cell",children:e.channel}),(0,i.jsx)("span",{role:"cell",className:e.deltaSpend>=0?V().deltaPositive:V().deltaNegative,children:eo(e.deltaSpend)}),(0,i.jsx)("span",{role:"cell",className:e.deltaRevenue>=0?V().deltaPositive:V().deltaNegative,children:eo(e.deltaRevenue)}),(0,i.jsx)("span",{role:"cell",children:e.scenarioRoi?"".concat(e.scenarioRoi.toFixed(2),"x"):"—"})]},"outcome-".concat(e.channel)))]}),(0,i.jsxs)("footer",{className:V().outcomeFooter,children:[(0,i.jsx)("p",{className:"ds-body",children:"Once aligned with stakeholders, record the decision in Stories and approve updated plan cards. The consensus engine will capture this scenario as supporting evidence."}),(0,i.jsx)(d(),{href:"/stories?source=scenarios",className:V().storyLink,children:"Capture scenario in Stories →"})]})]}),F&&(0,i.jsx)(b,{outcome:F,adjustments:t,showConfidenceBands:!0,showWeatherImpact:!0}),(0,i.jsxs)("section",{className:"".concat(V().savedScenarios," ds-surface"),children:[(0,i.jsxs)("header",{children:[(0,i.jsx)("h2",{className:"ds-title",children:"Saved scenarios"}),(0,i.jsx)("p",{className:"ds-body",children:"Load a previous scenario to compare or iterate on earlier analyses."})]}),I&&(0,i.jsx)("p",{className:"".concat(V().snapshotsError," ds-caption"),role:"status",children:I}),(0,i.jsx)(P,{snapshots:R,onLoad:e=>{o(e.adjustments),N(null)},onDelete:T,loading:M})]})]}),(0,i.jsx)(U,{isOpen:S,onClose:()=>w(!1),onSave:H,isSaving:E})]})}},941:function(e){e.exports={root:"load-scenario-panel_root__m0mki",snapshotList:"load-scenario-panel_snapshotList__u1ZNS",snapshotCard:"load-scenario-panel_snapshotCard__UKzsE",expanded:"load-scenario-panel_expanded__3YGcQ",cardHeader:"load-scenario-panel_cardHeader__ornxw",cardTitle:"load-scenario-panel_cardTitle__f_tvN",cardActions:"load-scenario-panel_cardActions__RG8Mn",loadButton:"load-scenario-panel_loadButton__JPFXW",expandButton:"load-scenario-panel_expandButton__g3fRk",description:"load-scenario-panel_description__F8Cjm",tags:"load-scenario-panel_tags__j6CXU",tag:"load-scenario-panel_tag__2ZZAs",summary:"load-scenario-panel_summary__y_p__",details:"load-scenario-panel_details__cYNjE",slideDown:"load-scenario-panel_slideDown__cAFtN",adjustments:"load-scenario-panel_adjustments__a4VFW",adjustmentRow:"load-scenario-panel_adjustmentRow__DBBUT",positive:"load-scenario-panel_positive__5vdkp",negative:"load-scenario-panel_negative__kNsI8",detailActions:"load-scenario-panel_detailActions__BFd4o",deleteButton:"load-scenario-panel_deleteButton__9xQk4"}},2404:function(e){e.exports={overlay:"save-scenario-modal_overlay__n9st6",fadeIn:"save-scenario-modal_fadeIn__peJXV",modal:"save-scenario-modal_modal__j7aPg",slideUp:"save-scenario-modal_slideUp__ZTzKB",header:"save-scenario-modal_header__jje8k",closeButton:"save-scenario-modal_closeButton__UEnCO",form:"save-scenario-modal_form__3UCEA",formGroup:"save-scenario-modal_formGroup__qMn7t",required:"save-scenario-modal_required__GUCPQ",input:"save-scenario-modal_input__wGpQ9",textarea:"save-scenario-modal_textarea__InFTM",tagInput:"save-scenario-modal_tagInput__tN3nA",addTagButton:"save-scenario-modal_addTagButton__ECrvv",tagList:"save-scenario-modal_tagList__vfbC2",tag:"save-scenario-modal_tag__qSn7u",removeTagButton:"save-scenario-modal_removeTagButton__Nn_Qk",actions:"save-scenario-modal_actions__mgRfr",cancelButton:"save-scenario-modal_cancelButton__GYvWW",saveButton:"save-scenario-modal_saveButton__ouQln"}},9182:function(e){e.exports={overlayContainer:"scenario-overlay_overlayContainer__F3LBT",overlayHeader:"scenario-overlay_overlayHeader__xSbrv",confidenceBands:"scenario-overlay_confidenceBands__zKxRa",bandGrid:"scenario-overlay_bandGrid__HiKy3",bandItem:"scenario-overlay_bandItem__OaDbr",bandMeta:"scenario-overlay_bandMeta__zLape",confidencePill:"scenario-overlay_confidencePill__RxYCA",confidenceHIGH:"scenario-overlay_confidenceHIGH__EQDhC",confidenceMEDIUM:"scenario-overlay_confidenceMEDIUM__b8A5A",confidenceLOW:"scenario-overlay_confidenceLOW___cWMW",weatherImpact:"scenario-overlay_weatherImpact__SM_Zh",impactChart:"scenario-overlay_impactChart__E0YPW",impactBars:"scenario-overlay_impactBars__8l4vQ",impactRow:"scenario-overlay_impactRow__vxAGJ",barContainer:"scenario-overlay_barContainer__bDa2O",impactBar:"scenario-overlay_impactBar__DRGqX"}},8301:function(e){e.exports={root:"scenarios_root__TskNR",hero:"scenarios_hero__Tglgf",heroHeader:"scenarios_heroHeader__6e_yT",heroActions:"scenarios_heroActions___RqA7",exportButton:"scenarios_exportButton__fmAYS",saveButton:"scenarios_saveButton__YJoKN",resetButton:"scenarios_resetButton__MOpPi",planLink:"scenarios_planLink__BmBNl",fallbackNotice:"scenarios_fallbackNotice__6d0XL",summaryGrid:"scenarios_summaryGrid__4TDhI",summaryCard:"scenarios_summaryCard__Q_mdU",deltaBadge:"scenarios_deltaBadge__PegXy",deltaPositive:"scenarios_deltaPositive__3dyuo",deltaNegative:"scenarios_deltaNegative__cWQET",confidenceBadge:"scenarios_confidenceBadge__rWW_s",recommendations:"scenarios_recommendations__Ci8HW",recommendationsHeader:"scenarios_recommendationsHeader__MJWcU",recommendationsNotice:"scenarios_recommendationsNotice__WPxTp",recommendationGrid:"scenarios_recommendationGrid__Y7pEa",recommendationCard:"scenarios_recommendationCard__U4cou",recommendationCardActive:"scenarios_recommendationCardActive__Qi78Q",recommendationCardHeader:"scenarios_recommendationCardHeader__Q9Q8i",recommendationTags:"scenarios_recommendationTags__wF9q_",recommendationTag:"scenarios_recommendationTag__tblQh",recommendationAdjustments:"scenarios_recommendationAdjustments__Bv5UI",adjustmentRow:"scenarios_adjustmentRow__u7grd",adjustmentMultiplier:"scenarios_adjustmentMultiplier__t_pyY",adjustmentRationale:"scenarios_adjustmentRationale__xr_y9",applyRecommendationButton:"scenarios_applyRecommendationButton__VBdiv",controls:"scenarios_controls__Wq34W",controlRow:"scenarios_controlRow__3CKBv",controlHeader:"scenarios_controlHeader__zm5bV",sliderRow:"scenarios_sliderRow__wxcju",slider:"scenarios_slider__CcQD0",channelStats:"scenarios_channelStats__5F1Xy",outcome:"scenarios_outcome__VWVl4",outcomeHeader:"scenarios_outcomeHeader__UNOoC",outcomeTable:"scenarios_outcomeTable__oWAn5",tableRow:"scenarios_tableRow__vHC2X",tableHead:"scenarios_tableHead__q0Za1",outcomeFooter:"scenarios_outcomeFooter__duVJk",storyLink:"scenarios_storyLink__cIVKQ",savedScenarios:"scenarios_savedScenarios__l7qt0",snapshotsError:"scenarios_snapshotsError__3sQ8L"}}},function(e){e.O(0,[717,570,888,774,179],function(){return e(e.s=9759)}),_N_E=e.O()}]);