(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{6241:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalog",function(){return a(9965)}])},5795:function(e,t,a){"use strict";a.d(t,{O:function(){return o}});var n=a(5893),s=a(7294),l=a(5201),r=a.n(l);function o(e){let{title:t="Data context",tags:a=[],warnings:l=[]}=e,o=(0,s.useId)();if(0===a.length&&0===l.length)return null;let c=l.some(e=>"string"==typeof e.severity&&"critical"===e.severity.toLowerCase()),i=e=>{let t="string"==typeof e?e.toLowerCase():"";return"critical"===t?r().warningCritical:"warning"===t?r().warningCaution:r().warningInfo};return(0,n.jsxs)("section",{className:"".concat(r().panel," ds-surface-panel"),"aria-labelledby":o,role:"region",children:[(0,n.jsxs)("div",{className:r().header,children:[(0,n.jsx)("h3",{id:o,className:"".concat(r().heading," ds-title"),children:t}),c&&(0,n.jsx)("span",{className:"ds-badge","data-tone":"critical",children:"Action needed"})]}),a.length>0&&(0,n.jsx)("p",{className:"".concat(r().tags," ds-caption"),children:a.join(", ")}),l.length>0&&(0,n.jsx)("ul",{className:r().warningList,"aria-live":"polite",children:l.map(e=>{var t;return(0,n.jsxs)("li",{className:"".concat(r().warningItem," ").concat(i(e.severity)),children:[(0,n.jsx)("strong",{className:"ds-caption",children:(null!==(t=e.severity)&&void 0!==t?t:"warning").toUpperCase()}),(0,n.jsx)("span",{className:"ds-body",children:e.message})]},e.code)})})]})}},918:function(e,t,a){"use strict";a.d(t,{P:function(){return c}});var n=a(5893),s=a(7294),l=function(){for(var e,t,a=0,n="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=function e(t){var a,n,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(n=e(t[a]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=t);return n},r=a(1682),o=a.n(r);let c=(0,s.forwardRef)((e,t)=>{let{className:a,type:s,loading:r=!1,loadingText:c,disabled:i,children:d,..._}=e,u=!!r,g=u&&null!=c?c:d;return(0,n.jsx)("button",{..._,ref:t,type:null!=s?s:"button",className:l("ds-body-strong",o().retryButton,u&&o().retryButtonLoading,a),disabled:i||u,"data-loading":u||void 0,"aria-busy":!!u||void 0,children:u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{"aria-hidden":!0,className:o().retryButtonSpinner}),(0,n.jsx)("span",{className:o().retryButtonLabel,children:g})]}):g})});c.displayName="RetryButton"},9965:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n,s,l=a(5893),r=a(7294),o=a(9008),c=a.n(o),i=a(2570),d=a(5795),_=a(918),u=a(1009),g=a.n(u),h=a(6091),m=a(3454);let x=null!==(n=m.env.NEXT_PUBLIC_TENANT_ID)&&void 0!==n?n:"demo-tenant",p=Number(null!==(s=m.env.NEXT_PUBLIC_PLAN_HORIZON)&&void 0!==s?s:"7");function y(){var e,t,a,n,s,o,u;let[m,y]=(0,r.useState)(null),[j,N]=(0,r.useState)(!0),[b,v]=(0,r.useState)(null),[f,w]=(0,r.useState)(0),L=(0,r.useCallback)(()=>{let e=!0;return N(!0),(0,h.pV)(x,p).then(t=>{e&&(y(t),v(null))}).catch(t=>{var a;e&&v(null!==(a=t.message)&&void 0!==a?a:"Failed to load catalog")}).finally(()=>{e&&N(!1)}),()=>{e=!1}},[]);(0,r.useEffect)(()=>L(),[L,f]);let S=null!==(t=null==m?void 0:m.categories)&&void 0!==t?t:[],B=(null==m?void 0:m.generated_at)?function(e){let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}(m.generated_at):"—",C=null!==(a=null==m?void 0:m.context_tags)&&void 0!==a?a:[],O=null!==(n=null==m?void 0:m.context_warnings)&&void 0!==n?n:[],k=null!==(s=null==m?void 0:null===(e=m.data_context)||void 0===e?void 0:e.metadata)&&void 0!==s?s:{},I=null!==(o=k.weather_source)&&void 0!==o?o:"unknown",E=null!==(u=k.dataset_rows)&&void 0!==u?u:{};return(0,l.jsxs)(i.A,{children:[(0,l.jsx)(c(),{children:(0,l.jsx)("title",{children:"WeatherVane \xb7 Catalog"})}),(0,l.jsxs)("div",{className:g().root,children:[(0,l.jsxs)("section",{className:g().header,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"ds-title",children:"Catalog & ad tagging"}),(0,l.jsx)("p",{className:"ds-body",children:"Approve suggested weather & seasonal tags, sync them back to Shopify metafields, and see which ads are available for each run."})]}),(0,l.jsxs)("aside",{className:g().meta,children:[(0,l.jsxs)("dl",{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"ds-caption",children:"Generated"}),(0,l.jsx)("dd",{className:"ds-body-strong",children:B})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"ds-caption",children:"Entries"}),(0,l.jsx)("dd",{className:"ds-body-strong",children:S.length})]})]}),(0,l.jsx)("button",{type:"button",className:"".concat(g().metaButton," ds-pill ds-body-strong"),children:"Sync tags to Shopify"})]})]}),j&&(0,l.jsx)("p",{className:"".concat(g().status," ds-body"),role:"status","aria-live":"polite",children:"Loading catalog tags…"}),b&&(0,l.jsxs)("div",{className:g().error,role:"alert",children:[(0,l.jsx)("p",{className:"ds-body",children:b}),(0,l.jsx)(_.P,{onClick:()=>w(e=>e+1),children:"Retry loading catalog"})]}),!j&&!b&&(0,l.jsxs)("section",{className:g().contextSection,children:[(0,l.jsx)(d.O,{tags:C,warnings:O}),(0,l.jsxs)("div",{className:g().contextMeta,children:[(0,l.jsxs)("div",{className:g().metaRow,children:[(0,l.jsx)("span",{className:"".concat(g().metaLabel," ds-caption"),children:"Weather source"}),(0,l.jsx)("span",{className:"".concat(g().metaValue," ds-body-strong"),children:I})]}),Object.keys(E).length>0&&(0,l.jsx)("dl",{className:g().datasetStats,children:Object.entries(E).map(e=>{let[t,a]=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"ds-caption",children:t}),(0,l.jsx)("dd",{className:"ds-body-strong",children:"number"==typeof a?a.toLocaleString():String(null!=a?a:"—")})]},t)})})]})]}),!j&&!b&&(0,l.jsxs)("section",{className:g().list,children:[S.map(e=>(0,l.jsxs)("article",{children:[(0,l.jsxs)("header",{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"ds-title",children:e.name}),(0,l.jsxs)("p",{className:"".concat(g().metaLine," ds-caption"),children:[e.geo_group_id," \xb7 ",e.channel]})]}),(0,l.jsx)("span",{className:"".concat(g().statusBadge," ds-caption"),children:e.status})]}),(0,l.jsxs)("dl",{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"ds-caption",children:"Weather tags"}),(0,l.jsx)("dd",{className:"ds-body",children:e.weather_tags.join(", ")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"ds-caption",children:"Season tags"}),(0,l.jsx)("dd",{className:"ds-body",children:e.season_tags.join(", ")||"—"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("dt",{className:"ds-caption",children:"Lift"}),(0,l.jsx)("dd",{className:"ds-body",children:e.lift})]})]}),(0,l.jsx)("button",{type:"button",className:"".concat(g().manageButton," ds-pill ds-body-strong"),children:"Manage ads"})]},"".concat(e.geo_group_id,"-").concat(e.name,"-").concat(e.channel))),!S.length&&(0,l.jsxs)("article",{className:g().placeholder,children:[(0,l.jsx)("h3",{className:"ds-title",children:"No tagged categories yet"}),(0,l.jsx)("p",{className:"ds-body",children:"Run tagging to discover weather-season combinations that move revenue. Approved tags sync back to Shopify and drive ad pairing suggestions."})]})]})]})]})}},5201:function(e){e.exports={panel:"context-panel_panel___QoO_",header:"context-panel_header__5j9dX",heading:"context-panel_heading__XERy_",tags:"context-panel_tags__cmUxz",warningList:"context-panel_warningList__Pls7N",warningItem:"context-panel_warningItem__kOu5x",warningInfo:"context-panel_warningInfo__NqfqL",warningCaution:"context-panel_warningCaution__XpMI7",warningCritical:"context-panel_warningCritical__joYO7",assignmentTable:"context-panel_assignmentTable__PLb2G",assignmentHeader:"context-panel_assignmentHeader__au_cv",assignmentRow:"context-panel_assignmentRow__ceDZw",summaryCard:"context-panel_summaryCard__cjOQY",summaryHeader:"context-panel_summaryHeader__IV8pS",liftValue:"context-panel_liftValue__h99_6",summaryGrid:"context-panel_summaryGrid__c2EOC",summaryMeta:"context-panel_summaryMeta___j10H",keyStats:"context-panel_keyStats__h_eYX",bodyCopy:"context-panel_bodyCopy__GZgZ0"}},1682:function(e){e.exports={retryButton:"retry-button_retryButton__857bg",retryButtonLoading:"retry-button_retryButtonLoading__h_n3Q",retryButtonSpinner:"retry-button_retryButtonSpinner__jIZZ_","retry-button-spin":"retry-button_retry-button-spin__xpbOc",retryButtonLabel:"retry-button_retryButtonLabel__Tfn2J"}},1009:function(e){e.exports={root:"catalog_root__1UMJU",header:"catalog_header__q2CAE",meta:"catalog_meta__Hszqj",metaButton:"catalog_metaButton__D9qks",status:"catalog_status__8jM40",error:"catalog_error__7C7dD",contextSection:"catalog_contextSection__kpe4y",contextMeta:"catalog_contextMeta__4RIiy",metaRow:"catalog_metaRow__2k_m0",metaLabel:"catalog_metaLabel__o6ecW",metaValue:"catalog_metaValue__VOxOd",datasetStats:"catalog_datasetStats__HfsNj",list:"catalog_list__biO7s",metaLine:"catalog_metaLine__akOov",statusBadge:"catalog_statusBadge__G_ZbS",manageButton:"catalog_manageButton__ZQpP_",placeholder:"catalog_placeholder__vL63U"}}},function(e){e.O(0,[717,570,589,888,774,179],function(){return e(e.s=6241)}),_N_E=e.O()}]);