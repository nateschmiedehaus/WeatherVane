# Plan: GOL Tier-1: Finite Grid + Canonical Rules

**Task ID:** AUTO-GOL-T1
**Date:** 2025-11-10
**Generated by:** Wave 0 Autopilot

## Approach

Based on analysis of similar implementations:
- src/analytics/task_outcome_builder.ts

**Implementation approach:**
1. Identify the correct module for this functionality
2. Follow existing patterns in that module
3. Add comprehensive error handling
4. Include appropriate tests

## PLAN-authored Tests

- Tests authored during PLAN to validate forced execution mode before IMPLEMENT.
- File(s): `tools/wvo_mcp/src/wave0/__tests__/forced_execution.test.ts`

  - **Unit: Forced task selection** — Given `WAVE0_FORCE_TASK_ID=1` and `TASK_ID=AUTO-GOL-T1`, when `Wave0Runner.getNextTask()` executes, then it returns AUTO-GOL-T1 (no remediation / undefined results).
  - **Unit: Remediation bypass** — Given `WAVE0_SKIP_REMEDIATION=1`, when `StigmergicEnforcer.enforcePhaseCompletion()` detects concerns, then it logs bypass and approves without creating roadmap entries.
  - **Unit: Semantic bypass** — Given `WVO_DISABLE_SEMANTIC_ENFORCER=1`, when `SemanticEnforcer.initialize()` is called, then it exits early (no indexing, no EISDIR).

- Integration + manual validation steps planned:
  - `npm --prefix tools/wvo_mcp run wave0 -- --once` (forced run)
  - `ps aux | grep -E "run_wave0|npm run wave0"` (single-instance watchdog)
  - `WVO_STATE_ROOT=$PWD/state/autopilot/wave0 node tools/wvo_mcp/scripts/check_end_steps.mjs`
  - `WVO_STATE_ROOT=$PWD/state/autopilot/wave0 node tools/wvo_mcp/scripts/check_scas.mjs`
  - `WVO_STATE_ROOT=$PWD/state/autopilot/wave0 node tools/wvo_mcp/scripts/check_provenance.mjs --task AUTO-GOL-T1`

- Coverage summary: 3 unit tests + 1 live integration scenario + 5 manual commands. Authored during PLAN; tracked in `tools/wvo_mcp/src/wave0/__tests__/forced_execution.test.ts`.

## Via Negativa Analysis

Before adding new code:
- Check if existing functionality can be extended
- Look for code that can be deleted or simplified
- Ensure we're not duplicating existing capabilities

## Files to Modify

Estimated changes:
- 1-2 new files for implementation
- 1 test file
- Possible updates to 1-2 existing files
- Total LOC: ~100-150 (within micro-batching limits)
