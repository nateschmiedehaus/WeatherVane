## Current Focus
### Strategy Alignment
- 2025-10-15: Atlas and Dana operate from the multi-agent charter (`docs/orchestration/multi_agent_charter.md`); consensus engine docs/telemetry stay the canonical governance reference.
- 2025-10-15: Consensus simulation harness (`tools/wvo_mcp/scripts/run_consensus_simulation.mjs`) keeps `experiments/orchestration/simulation_report.md` fresh so staffing and delegation loops remain verifiable.

### MCP Platform (domain: mcp)
- Zero-downtime upgrade bundle (E6 + E10) stays sequenced together; today’s slice tightens preflight guardrails by enforcing `.nvmrc` + package `engines` versions before any promotion.
- Worker manager scaffolding now supports hot-swapping active/canary processes with RPC timeouts and tests (`tools/wvo_mcp/src/worker/worker_manager.ts`, `worker_manager.test.ts`).
- 2025-10-16: Audited Codex MCP front-end handlers and worker RPCs—no remaining direct `SessionContext` usage; reran `bash tools/wvo_mcp/scripts/run_integrity_tests.sh` to refresh baseline evidence.
- 2025-10-16: Ran focused vitest suites (`npm run test -- worker_manager`, `npm run test -- worker_entry`) to confirm WorkerManager RPC handling and worker entry runTool path post-refactor.
- Maintain failover telemetry, command allow-list, compact prompts, and coordinator visibility as the baseline safety rails.

### WeatherVane Product (domain: product)
- Allocator/ads automation now unblocked; keep design_system/allocator critics in the default suite to protect regression risk.
- Wire the Meta marketing client into automation flows and hold M3.3/M3.4 deliverables until design coverage unlocks.
- 2025-10-16: Restored design_system/allocator/exec_review critic availability in roadmap; T4.1.x/T11.2.x reopened as pending for the next product loop.
- 2025-10-16 (Atlas): Product loop still blocked—design_system/exec_review/allocator critics remain capability-skipped; escalated to Director Dana for uplift.
- 2025-10-16: Creative response modelling now reports spend distribution + guardrail triggers (API/schema/UI refreshed, experiments/creative/response_scores.json regenerated). design_system critic still capability-skipped, so exit evidence pending Dana’s uplift.

## Guardrails & System Decisions
- MCP command execution uses allow-list + deny-list; keep pytest coverage tight when editing guardrails.
- State machine correlation IDs and compact prompt mode remain the defaults; use `ts-node tools/wvo_mcp/scripts/live_flags.ts set PROMPT_MODE verbose` to rollback if needed.
- Upgrade preflight now fails when Node/npm deviate from `.nvmrc` or package `engines`, preventing unsafe promotions.
- Coordinator failover telemetry surfaces via `orchestrator_status` and must stay green before rolling releases.

## Risks
- Provider CLIs and token heuristics may drift; schedule smoke checks with failover + cost_perf critics.
- TypeScript build is not auto-run in this sandbox; execute `npm run build --prefix tools/wvo_mcp` before packaging releases.
- Monitor design_system critic availability; rerun suites frequently so T3.3.x/T3.4.x remain eligible for promotion.

## Next actions
### MCP Platform (domain: mcp)
- Finish E6 + E10 planning artifacts and stage PHASE-5A follow-ups only after upgrade guardrails ship end-to-end.
- Map WorkerManager follow-ups: enrich worker_health telemetry, integrate canary harness, and wire resilience auto-restart/escalation.
- Capture fresh autopilot e2e + performance benchmarks after substantive MCP changes so critics stay green.
- Default to product work each loop; fall back to MCP only when the product queue is blocked per `plan_next`.

### WeatherVane Product (domain: product)
- Re-run leakage + design_system critics when capability profiles recover before closing weather + UX tasks.
- Keep Meta/Google automation memos current and record blockers in `state/task_memos`.
- Prefer vertical slices that end in critic evidence; log blockers via `plan_update` when suites remain unavailable.

### Autopilot Captain Persona — Atlas & Director Dana
- Re-evaluate domain focus every cycle; escalate structural critic gaps to Dana instead of bypassing exit criteria.
- Run Network Navigator each session start (restart MCP if it fails) to guarantee connectivity.
- Log consensus decisions into `state/context.md` once the consensus engine goes live so `org_pm` stays aligned.
- 2025-10-16: Documented escalation for Dana (`docs/orchestration/director_dana_escalation_2025-10-16.md`) covering capability-gated critics blocking product work; awaiting uplift before resuming T4.1.x/T11.2.x.

## Critic Personas (aliases)
_Trimmed for token efficiency (startup); full history preserved in `state/backups/context/context-2025-10-16T13-40-38-502Z.md`._

## plans
_Trimmed for token efficiency (startup); full history preserved in `state/backups/context/context-2025-10-16T13-40-38-502Z.md`._

## Current Focus
### WeatherVane Product (domain: product)
- 2025-10-16: Re-ran RL shadow mode pytest suite and refreshed `experiments/rl/shadow_mode.json`; allocator critic still capability-skipped so T4.1.8 remains blocked pending uplift.

- 2025-10-16: Reran creative response Prefect flow (`PYTHONPATH=. python apps/worker/run.py demo-tenant --creative-report`) so `experiments/creative/response_scores.json` now captures spend distribution + guardrail counts. design_system critic remains capability-skipped, so T4.1.9 cannot record exit evidence until Dana restores coverage.
- 2025-10-16: Integrity harness failed on known `tests/test_mcp_tools.py::test_mcp_tool_inventory_and_dry_run_parity` dry-run parity assertion; no regressions observed in product slice.
### WeatherVane Product (domain: product)
- 2025-10-16 (Atlas): Unable to progress T4.1.x slices; design_system and allocator critics remain capability-skipped. Logged blocker and pivoting to MCP enablement per loop.

- 2025-10-16: Design_system critic still capability-skipped (network_navigator run succeeded); Atlas to keep product slices on hold while waiting for Director Dana uplift.
- 2025-10-16 (Atlas): Product loop remains blocked—design_system and allocator critics still capability-skipped, so no promotable T4.1.x slices this cycle; pivoting to MCP enablement per loop discipline.
- 2025-10-16 (Atlas): Attempted to advance T4.1.9 but design_system critic remains capability-skipped; logging blocker and pivoting to MCP enablement per loop discipline.
- 2025-10-16 (Atlas): T6.2.4 blocked; allocator critic still capability-skipped, so API rate limiting slice cannot record exit evidence until Director Dana restores coverage.
- 2025-10-16: Attempted to start T4.1.10 but allocator/design_system critics remain capability-skipped; re-escalating to Dana and pivoting to MCP unblockers per loop discipline.
- 2025-10-16: Ran upgrade_preflight + manager_self_check vitest suites and refreshed integrity harness; preflight guardrail aborted on git_clean as expected (dirty worktree from legacy diffs), leaving state/quality/upgrade_gates.json updated for Manager self-check evidence.

- 2025-10-16: Added `tools/wvo_mcp/scripts/live_flags.ts` CLI to seed/manage runtime flags via SQLite and refreshed docs/status references away from legacy env toggles.
### WeatherVane Product (domain: product)
- 2025-10-16 (Atlas, current cycle): Product queue remains blocked—design_system and allocator critics still capability-skipped. Logging blocker and pivoting to MCP enablement via plan_next(mcp).

### MCP Platform (domain: mcp)
- 2025-10-16 (Atlas): Front-end now proxies all tools through WorkerManager; worker_health surfaces live snapshots. T6.4.2 ready for critic evidence once design_system returns.
### WeatherVane Product (domain: product)
- 2025-10-16 (Atlas): design_system/allocator critics still capability-skipped; logged blocker and pivoting to MCP enablement per loop discipline.

### MCP Platform (domain: mcp)
- 2025-10-16 (Atlas): Advancing T6.4.3 to harden worker dry-run safeguards so canary workers block mutations until Dana restores high-capability critics.

## Plans
_Trimmed for token efficiency (startup); full history preserved in `state/backups/context/context-2025-10-16T13-40-38-502Z.md`._

- 2025-10-16 (Atlas): Advanced T6.4.3 by making worker dry-run truly read-only (SettingsStore guards + token trims disabled) and refreshed coverage via `npm run test --prefix tools/wvo_mcp -- live_flags` + `PYTHONPATH=. pytest tests/test_worker_dry_run.py`; consolidated integrity harness still flags the existing Autopilot JSON parse failure (`src/tests/autopilot_e2e.test.ts`).