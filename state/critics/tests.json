{
  "critic": "tests",
  "code": 0,
  "stdout": "PYTHONPATH=.deps:. pytest apps tests\n============================= test session starts ==============================\nplatform darwin -- Python 3.10.12, pytest-8.4.2, pluggy-1.6.0\nrootdir: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0\nasyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 234 items\n\ntests/api/onboarding/test_progress.py ....                               [  1%]\ntests/api/test_ad_push_routes.py ....                                    [  3%]\ntests/api/test_dashboard_service.py .                                    [  3%]\ntests/api/test_plan_routes.py ..                                         [  4%]\ntests/apps/model/test_baseline.py ...                                    [  5%]\ntests/apps/model/test_causal_uplift.py ....                              [  7%]\ntests/apps/model/test_creative_response.py ..                            [  8%]\ntests/apps/model/test_train.py .                                         [  8%]\ntests/apps/model/test_ts_training.py ..                                  [  9%]\ntests/apps/test_ad_push_repository.py ..                                 [ 10%]\ntests/apps/test_adaptive_scheduler.py ...                                [ 11%]\ntests/apps/test_allocator_rollback_executor.py ..                        [ 12%]\ntests/apps/test_dq_monitoring.py .....                                   [ 14%]\ntests/apps/test_google_ads.py ....                                       [ 16%]\ntests/apps/test_meta_ads.py ........                                     [ 20%]\ntests/apps/test_meta_sandbox_executor.py ..                              [ 20%]\ntests/model/test_ensemble.py ..                                          [ 21%]\ntests/model/test_performance_tracker.py ...                              [ 23%]\ntests/model/test_quantile_calibration.py ....                            [ 24%]\ntests/model/test_uplift.py ..                                            [ 25%]\ntests/shared/diffs/test_ad_push.py ...                                   [ 26%]\ntests/shared/libs/test_hardware_probe.py ....                            [ 28%]\ntests/test_ads_ingestion.py .                                            [ 29%]\ntests/test_ads_ingestor_fixtures.py .                                    [ 29%]\ntests/test_allocator.py ..                                               [ 30%]\ntests/test_allocator_hf_response.py ..                                   [ 31%]\ntests/test_allocator_routes.py ..                                        [ 32%]\ntests/test_allocator_stress.py ..                                        [ 32%]\ntests/test_audit.py .                                                    [ 33%]\ntests/test_automation_notifications.py ..                                [ 34%]\ntests/test_automation_service_contracts.py ..                            [ 35%]\ntests/test_catalog.py ..                                                 [ 35%]\ntests/test_catalog_service_contracts.py .                                [ 36%]\ntests/test_command_allowlist.py .....                                    [ 38%]\ntests/test_confidence_metrics.py ...                                     [ 39%]\ntests/test_context_tags.py .                                             [ 40%]\ntests/test_context_warnings.py ....                                      [ 41%]\ntests/test_creative_route.py .                                           [ 42%]\ntests/test_data_context.py .                                             [ 42%]\ntests/test_feature_builder.py .....                                      [ 44%]\ntests/test_feature_generators.py ..                                      [ 45%]\ntests/test_feature_validation.py ....                                    [ 47%]\ntests/test_geocoding.py .....                                            [ 49%]\ntests/test_geocoding_coverage.py .                                       [ 50%]\ntests/test_geocoding_coverage_cli.py ...                                 [ 51%]\ntests/test_geocoding_validation.py ....                                  [ 52%]\ntests/test_google_ads_connector.py ..                                    [ 53%]\ntests/test_health.py .                                                   [ 54%]\ntests/test_incremental_ingestion.py .                                    [ 54%]\ntests/test_incrementality.py ........                                    [ 58%]\ntests/test_ingestion_flow.py .                                           [ 58%]\ntests/test_lake_writer.py ...                                            [ 59%]\ntests/test_marketing_mix_solver.py ..                                    [ 60%]\ntests/test_mcp_tools.py ..                                               [ 61%]\ntests/test_meta_connector.py ...                                         [ 62%]\ntests/test_metrics_cleanup.py ..                                         [ 63%]\ntests/test_model_pipeline.py .                                           [ 64%]\ntests/test_onboarding_contracts.py .                                     [ 64%]\ntests/test_plan_service_context.py ..                                    [ 65%]\ntests/test_plan_service_contracts.py ..                                  [ 66%]\ntests/test_poc_flow.py .                                                 [ 66%]\ntests/test_poc_flow_integration.py s                                     [ 67%]\ntests/test_poc_flow_integration_ads.py .                                 [ 67%]\ntests/test_poc_pipeline_stub_data.py ....                                [ 69%]\ntests/test_privacy.py ..                                                 [ 70%]\ntests/test_promo_ingestion.py .                                          [ 70%]\ntests/test_publish_observability.py ..                                   [ 71%]\ntests/test_rate_limiting.py ...                                          [ 72%]\ntests/test_reporting.py ..                                               [ 73%]\ntests/test_retention.py ...                                              [ 74%]\ntests/test_rl_shadow_mode.py ......                                      [ 77%]\ntests/test_rl_shadow_pipeline.py .                                       [ 77%]\ntests/test_saturation_fairness.py ..                                     [ 78%]\ntests/test_schema_validation.py ......                                   [ 81%]\ntests/test_secrets_check.py ..                                           [ 82%]\ntests/test_secrets_inventory.py ...                                      [ 83%]\ntests/test_settings.py ...                                               [ 84%]\ntests/test_shopify_connector.py ...                                      [ 85%]\ntests/test_shopify_ingestion.py .                                        [ 86%]\ntests/test_shopify_ingestor.py .                                         [ 86%]\ntests/test_smoke_harness.py ...                                          [ 88%]\ntests/test_state_persistence.py .                                        [ 88%]\ntests/test_state_store.py ..                                             [ 89%]\ntests/test_stories.py ..                                                 [ 90%]\ntests/test_story_service_contracts.py .                                  [ 90%]\ntests/test_tagging.py .                                                  [ 91%]\ntests/test_telemetry_summary.py ..                                       [ 91%]\ntests/test_weather_cache.py ..                                           [ 92%]\ntests/test_weather_coordinates.py ..                                     [ 93%]\ntests/test_weather_coverage.py ..                                        [ 94%]\ntests/test_worker_cli.py ......                                          [ 97%]\ntests/test_worker_context.py .                                           [ 97%]\ntests/test_worker_logging.py ..                                          [ 98%]\ntests/worker/ingest_to_plan_live/test_live_connectors.py ss              [ 99%]\ntests/worker/test_ad_push_preflight.py ..                                [100%]\n\n=============================== warnings summary ===============================\n../../miniforge3/lib/python3.10/site-packages/starlette/formparsers.py:10\n  /Volumes/BigSSD4/nathanielschmiedehaus/miniforge3/lib/python3.10/site-packages/starlette/formparsers.py:10: PendingDeprecationWarning: Please use `import python_multipart` instead.\n    import multipart\n\n.deps/pydantic/v1/env_settings.py:101\n  /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/.deps/pydantic/v1/env_settings.py:101: FutureWarning: aliases are no longer used by BaseSettings to define which environment variables to read. Instead use the \"env\" field setting. See https://pydantic-docs.helpmanual.io/usage/settings/#environment-variable-names\n    warnings.warn(\n\n.deps/pydantic/_internal/_config.py:291\n  /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/.deps/pydantic/_internal/_config.py:291: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)\n\n.deps/pydantic/_internal/_generate_schema.py:312: 28 warnings\ntests/api/onboarding/test_progress.py: 8 warnings\ntests/api/test_ad_push_routes.py: 8 warnings\ntests/api/test_plan_routes.py: 3 warnings\n  /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/.deps/pydantic/_internal/_generate_schema.py:312: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.9/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/\n    warnings.warn(\n\ntests/test_poc_flow_integration_ads.py::test_pipeline_uses_ads_connectors\ntests/test_worker_context.py::test_worker_flow_emits_context_tags\n  /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/.deps/sklearn/metrics/_regression.py:1211: UndefinedMetricWarning: R^2 score is not well-defined with less than two samples.\n    warnings.warn(msg, UndefinedMetricWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n================= 231 passed, 3 skipped, 52 warnings in 32.77s =================\nnpm test --prefix apps/web || true\n\n> weathervane-web@0.1.0 test\n> vitest run\n\n\n RUN  v2.1.1 /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/apps/web\n\n ✓ ../../tests/web/test_dashboard.spec.ts  (4 tests) 2ms\n ✓ ../../tests/web/test_plan_page.spec.ts  (3 tests) 2ms\n\n Test Files  2 passed (2)\n      Tests  7 passed (7)\n   Start at  19:39:02\n   Duration  544ms (transform 53ms, setup 0ms, collect 57ms, tests 5ms, environment 0ms, prepare 83ms)\n\npython -m shared.observability.metrics --base-dir tmp/metrics\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251014T003639Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251014T003703Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251014T003705Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251014T003836Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251014T003859Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251014T003901Z",
  "stderr": "\u001b[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.\u001b[39m\n/Volumes/BigSSD4/nathanielschmiedehaus/miniforge3/lib/python3.10/runpy.py:126: RuntimeWarning: 'shared.observability.metrics' found in sys.modules after import of package 'shared.observability', but prior to execution of 'shared.observability.metrics'; this may result in unpredictable behaviour\n  warn(RuntimeWarning(msg))",
  "passed": true,
  "analysis": null,
  "git_sha": "31548e1c9ba25b8b0f94df5d6f596ec1be26414a",
  "timestamp": "2025-10-14T00:39:03.311Z"
}