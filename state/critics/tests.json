{
  "critic": "tests",
  "code": 0,
  "stdout": "\n== Python test suite ==\n============================= test session starts ==============================\nplatform darwin -- Python 3.10.12, pytest-8.4.2, pluggy-1.6.0\nrootdir: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane\nconfigfile: pyproject.toml\nplugins: anyio-4.11.0, asyncio-1.2.0\nasyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 622 items\n\ntests/allocator/test_weather_constraints.py ..................           [  2%]\ntests/api/onboarding/test_progress.py ....                               [  3%]\ntests/api/test_ad_push_routes.py ....                                    [  4%]\ntests/api/test_dashboard_analytics.py ....                               [  4%]\ntests/api/test_dashboard_service.py ........                             [  6%]\ntests/api/test_onboarding_routes.py ..................                   [  9%]\ntests/api/test_operations_consensus.py ..                                [  9%]\ntests/api/test_operations_orchestration_metrics.py ..                    [  9%]\ntests/api/test_plan_routes.py .......                                    [ 10%]\ntests/api/test_scenario_snapshot_service.py ..............               [ 13%]\ntests/apps/allocator/test_weather_aware_allocation.py .................. [ 15%]\n.                                                                        [ 16%]\ntests/apps/api/test_consensus_service.py .                               [ 16%]\ntests/apps/api/test_orchestration_metrics_service.py ..                  [ 16%]\ntests/apps/api/test_plan_scenario_recommendations.py ..                  [ 16%]\ntests/apps/api/test_weather_route.py ..                                  [ 17%]\ntests/apps/model/test_baseline.py ...                                    [ 17%]\ntests/apps/model/test_causal_uplift.py ....                              [ 18%]\ntests/apps/model/test_creative_response.py ...                           [ 18%]\ntests/apps/model/test_train.py ...                                       [ 19%]\ntests/apps/model/test_ts_training.py ..                                  [ 19%]\ntests/apps/test_ad_push_repository.py ..                                 [ 19%]\ntests/apps/test_adaptive_scheduler.py ...                                [ 20%]\ntests/apps/test_allocator_rollback_cli.py ..                             [ 20%]\ntests/apps/test_allocator_rollback_executor.py ..                        [ 21%]\ntests/apps/test_dq_monitoring.py .....                                   [ 21%]\ntests/apps/test_google_ads.py ....                                       [ 22%]\ntests/apps/test_meta_ads.py ........                                     [ 23%]\ntests/apps/test_meta_sandbox_executor.py ..                              [ 24%]\ntests/apps/test_modeling_data_watch.py ...                               [ 24%]\ntests/apps/test_weather_guardrail_watch.py ..                            [ 24%]\ntests/features/test_product_features.py ...                              [ 25%]\ntests/ingestion/test_product_taxonomy.py ......                          [ 26%]\ntests/model/test_calibration_report.py ............                      [ 28%]\ntests/model/test_ensemble.py ...                                         [ 28%]\ntests/model/test_feature_catalog.py ..........                           [ 30%]\ntests/model/test_mmm_lightweight.py ...                                  [ 30%]\ntests/model/test_performance_tracker.py ...                              [ 31%]\ntests/model/test_quantile_calibration.py ....                            [ 31%]\ntests/model/test_train_weather_mmm.py ..................                 [ 34%]\ntests/model/test_uplift.py ..                                            [ 35%]\ntests/model/test_weather_aware_allocation_integration.py .....           [ 36%]\ntests/model/test_weather_brand_scenarios.py .                            [ 36%]\ntests/model/test_weather_constraints_integration.py .....                [ 36%]\ntests/model/test_weather_elasticity_analysis.py ........................ [ 40%]\n                                                                         [ 40%]\ntests/modeling/test_mmm_backtests.py ...                                 [ 41%]\ntests/security/test_run_security_checks.py .....                         [ 42%]\ntests/shared/diffs/test_ad_push.py ...                                   [ 42%]\ntests/shared/libs/causal/test_weather_shock.py ...                       [ 43%]\ntests/shared/libs/test_autonomous_simulation.py ..                       [ 43%]\ntests/shared/libs/test_cache_warming.py ...                              [ 43%]\ntests/shared/libs/test_hardware_probe.py ....                            [ 44%]\ntests/shared/services/test_onboarding_telemetry.py ....................  [ 47%]\ntests/shared/services/test_scenario_builder.py ...                       [ 48%]\ntests/shared/test_dashboard_analytics_ingestion.py ...                   [ 48%]\ntests/shared/test_dashboard_analytics_service.py ...                     [ 49%]\ntests/shared/test_dashboard_analytics_summary.py ....                    [ 49%]\ntests/shared/test_data_quality_baselines.py ...                          [ 50%]\ntests/shared/test_data_quality_validation.py ....                        [ 50%]\ntests/test_ads_ingestion.py .                                            [ 51%]\ntests/test_ads_ingestor_fixtures.py .                                    [ 51%]\ntests/test_allocator.py ...............                                  [ 53%]\ntests/test_allocator_hf_response.py ...                                  [ 54%]\ntests/test_allocator_optimizer.py ........                               [ 55%]\ntests/test_allocator_routes.py ...                                       [ 55%]\ntests/test_allocator_service.py ......                                   [ 56%]\ntests/test_allocator_stress.py ..                                        [ 57%]\ntests/test_audit.py .                                                    [ 57%]\ntests/test_automation_notifications.py ..                                [ 57%]\ntests/test_automation_service_contracts.py ..                            [ 58%]\ntests/test_catalog.py ..                                                 [ 58%]\ntests/test_catalog_service_contracts.py .                                [ 58%]\ntests/test_command_allowlist.py .....                                    [ 59%]\ntests/test_confidence_metrics.py ...                                     [ 59%]\ntests/test_context_tags.py .                                             [ 59%]\ntests/test_context_warnings.py ....                                      [ 60%]\ntests/test_creative_route.py .                                           [ 60%]\ntests/test_data_context.py .                                             [ 60%]\ntests/test_feature_builder.py ........                                   [ 62%]\ntests/test_feature_generators.py ..                                      [ 62%]\ntests/test_feature_validation.py ....                                    [ 63%]\ntests/test_geocoding.py .....                                            [ 63%]\ntests/test_geocoding_coverage.py .                                       [ 64%]\ntests/test_geocoding_coverage_cli.py ...                                 [ 64%]\ntests/test_geocoding_validation.py ....                                  [ 65%]\ntests/test_google_ads_connector.py ..                                    [ 65%]\ntests/test_health.py .                                                   [ 65%]\ntests/test_incremental_ingestion.py .                                    [ 65%]\ntests/test_incrementality.py ........                                    [ 67%]\ntests/test_incrementality_integration.py .................               [ 69%]\ntests/test_ingestion_flow.py .                                           [ 70%]\ntests/test_lake_writer.py ...                                            [ 70%]\ntests/test_marketing_mix_solver.py ..                                    [ 70%]\ntests/test_mcp_tools.py ....                                             [ 71%]\ntests/test_meta_connector.py ...                                         [ 72%]\ntests/test_metrics_cleanup.py ..                                         [ 72%]\ntests/test_model_pipeline.py .                                           [ 72%]\ntests/test_onboarding_contracts.py .                                     [ 72%]\ntests/test_plan_service_context.py ..                                    [ 72%]\ntests/test_plan_service_contracts.py ..                                  [ 73%]\ntests/test_poc_flow.py .                                                 [ 73%]\ntests/test_poc_flow_integration.py s                                     [ 73%]\ntests/test_poc_flow_integration_ads.py .                                 [ 73%]\ntests/test_poc_pipeline_stub_data.py .....                               [ 74%]\ntests/test_privacy.py ..                                                 [ 74%]\ntests/test_promo_ingestion.py .                                          [ 75%]\ntests/test_publish_observability.py ..                                   [ 75%]\ntests/test_rate_limiting.py ......                                       [ 76%]\ntests/test_report_service_contracts.py ..                                [ 76%]\ntests/test_reporting.py ..                                               [ 77%]\ntests/test_reports.py ..                                                 [ 77%]\ntests/test_retention.py ...                                              [ 77%]\ntests/test_rl_shadow_mode.py .........                                   [ 79%]\ntests/test_rl_shadow_pipeline.py .                                       [ 79%]\ntests/test_saturation_fairness.py ..                                     [ 79%]\ntests/test_schema_validation.py ......                                   [ 80%]\ntests/test_secrets_check.py ..                                           [ 81%]\ntests/test_secrets_inventory.py ...                                      [ 81%]\ntests/test_settings.py ...                                               [ 81%]\ntests/test_shopify_connector.py ...                                      [ 82%]\ntests/test_shopify_ingestion.py .                                        [ 82%]\ntests/test_shopify_ingestor.py .                                         [ 82%]\ntests/test_smoke_harness.py ...                                          [ 83%]\ntests/test_state_persistence.py .                                        [ 83%]\ntests/test_state_store.py ..                                             [ 83%]\ntests/test_stories.py ..                                                 [ 84%]\ntests/test_story_service_contracts.py .                                  [ 84%]\ntests/test_tagging.py .                                                  [ 84%]\ntests/test_telemetry_summary.py ..                                       [ 84%]\ntests/test_weather_backtest.py ..                                        [ 85%]\ntests/test_weather_baseline.py ..                                        [ 85%]\ntests/test_weather_cache.py ..                                           [ 85%]\ntests/test_weather_coordinates.py ..                                     [ 86%]\ntests/test_weather_coverage.py ..                                        [ 86%]\ntests/test_weather_mmm_inference.py .........                            [ 87%]\ntests/test_worker_cli.py ......                                          [ 88%]\ntests/test_worker_context.py .                                           [ 88%]\ntests/test_worker_dry_run.py .                                           [ 89%]\ntests/test_worker_logging.py ..                                          [ 89%]\ntests/tools/test_activity_feed_agents.py .                               [ 89%]\ntests/tools/test_autopilot_console_menu.py ....                          [ 90%]\ntests/tools/test_autopilot_policy_sim.py .                               [ 90%]\ntests/tools/test_autopilot_status_line.py .                              [ 90%]\ntests/tools/test_offline_summary.py .                                    [ 90%]\ntests/tools/wvo_mcp/scripts/test_causal_critic.py ..                     [ 90%]\ntests/tools/wvo_mcp/scripts/test_modeling_reality_critic.py ...          [ 91%]\ntests/tools/wvo_mcp/test_account_manager.py ...........................  [ 95%]\ntests/tools/wvo_mcp/test_account_manager_integration.py .............    [ 97%]\ntests/worker/ingest_to_plan_live/test_live_connectors.py ss              [ 98%]\ntests/worker/test_ad_push_preflight.py ..                                [ 98%]\ntests/worker/test_dashboard_suggestion_telemetry.py .......              [ 99%]\ntests/worker/test_tenant_coverage.py ..                                  [100%]\n\n=============================== warnings summary ===============================\n../../miniforge3/lib/python3.10/site-packages/starlette/formparsers.py:10\n  /Volumes/BigSSD4/nathanielschmiedehaus/miniforge3/lib/python3.10/site-packages/starlette/formparsers.py:10: PendingDeprecationWarning: Please use `import python_multipart` instead.\n    import multipart\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n================== 619 passed, 3 skipped, 1 warning in 40.11s ==================\n\n== Web unit tests ==\n\n> weathervane-web@0.1.0 test\n> vitest run\n\n\n RUN  v2.1.1 /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/apps/web\n\n ✓ src/lib/__tests__/automationInsights.test.ts  (10 tests) 5ms\n ✓ src/lib/__tests__/dashboard-insights.test.ts  (22 tests) 11ms\n ✓ src/lib/__tests__/shadow-insights.test.ts  (4 tests) 2ms\n ✓ src/lib/__tests__/scenario-export.test.ts  (27 tests) 33ms\n ✓ ../../tests/web/test_dashboard.spec.ts  (86 tests) 37ms\n ✓ ../../tests/web/automation_trust.spec.ts  (20 tests) 16ms\n ✓ src/lib/__tests__/scenario-builder.test.ts  (3 tests) 5ms\n ✓ src/lib/__tests__/plan-export.test.ts  (6 tests) 4ms\n ✓ src/lib/__tests__/dashboard-analytics.test.ts  (6 tests) 8ms\n ✓ ../../tests/web/weather_runbook.spec.ts  (1 test) 40ms\n ✓ ../../tests/web/dashboard_top_signal.spec.ts  (4 tests) 483ms\n ✓ src/lib/__tests__/staffing-telemetry.test.ts  (3 tests) 41ms\n ✓ ../../tests/web/reports_insights.spec.ts  (2 tests) 6ms\n ✓ src/lib/__tests__/weather-runbook.test.ts  (3 tests) 7ms\n ✓ src/lib/__tests__/operations-insights.test.ts  (6 tests) 3ms\n ✓ src/lib/__tests__/experiment-insights.test.ts  (5 tests) 3ms\n ✓ ../../tests/web/executive_review.spec.ts  (2 tests) 4ms\n ✓ src/lib/__tests__/plan-insights.test.ts  (4 tests) 8ms\n ✓ ../../tests/web/automation_validation.spec.ts  (4 tests) 2ms\n ✓ ../../tests/web/scenario_builder.spec.ts  (3 tests) 2ms\n ✓ ../../tests/web/guardrail_posture.spec.ts  (3 tests) 2ms\n ✓ ../../tests/web/test_plan_page.spec.ts  (3 tests) 9ms\n ✓ src/lib/__tests__/guardrailCopy.test.ts  (3 tests) 17ms\n ✓ ../../tests/web/automation_audit_evidence.spec.ts  (3 tests) 5ms\n ✓ ../../tests/web/stories_insights.spec.ts  (4 tests) 24ms\n ✓ ../../tests/web/experiments_hub.spec.ts  (1 test) 3ms\n ✓ src/lib/__tests__/api.test.ts  (1 test) 4ms\n ✓ src/lib/__tests__/onboardingFallback.test.ts  (3 tests) 5ms\n ✓ ../../tests/web/test_analytics.spec.ts  (2 tests) 4ms\n ✓ ../../tests/web/weather_region_slug.spec.ts  (2 tests) 59ms\n ✓ ../../tests/web/automation_guardrail_copy.spec.ts  (1 test) 26ms\n ✓ src/components/__tests__/BacktestChart.test.tsx  (3 tests) 44ms\n ✓ src/components/__tests__/CreativeGuardrailPanel.test.tsx  (1 test) 34ms\n ✓ src/components/__tests__/ScenarioExportButton.test.tsx  (6 tests) 83ms\n ✓ src/components/__tests__/ScenarioOverlay.test.tsx  (11 tests) 121ms\n ✓ src/components/__tests__/LoadScenarioPanel.test.tsx  (13 tests) 298ms\n ✓ ../../tests/web/design_system_acceptance.spec.ts  (6 tests) 272ms\n ✓ src/components/__tests__/SaveScenarioModal.test.tsx  (15 tests) 435ms\n ✓ src/components/__tests__/Layout.test.tsx  (2 tests) 44ms\n ✓ src/components/__tests__/LiftConfidenceCard.test.tsx  (6 tests) 63ms\n ✓ src/components/__tests__/StaffingTelemetryPanel.test.tsx  (1 test) 51ms\n ✓ src/components/__tests__/retry-button.test.tsx  (4 tests) 49ms\n ✓ src/components/__tests__/ConsensusSummaryCard.test.tsx  (1 test) 58ms\n ✓ src/components/__tests__/PlanDownloadButton.test.tsx  (2 tests) 60ms\n ✓ src/components/__tests__/ConfidenceMixBar.test.tsx  (2 tests) 25ms\n\n Test Files  45 passed (45)\n      Tests  320 passed (320)\n   Start at  11:24:55\n   Duration  4.80s (transform 1.74s, setup 3.10s, collect 4.01s, tests 2.51s, environment 6.42s, prepare 3.39s)\n\n\n== MCP vitest suite ==\n\n> wvo-mcp-server@0.1.0 pretest\n> node ./scripts/ensure-sqlite-build.mjs\n\n\n> wvo-mcp-server@0.1.0 test\n> node ./scripts/run_vitest.mjs\n\n\n RUN  v3.2.4 /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tools/wvo_mcp\n\n ✓ src/utils/device_profile.test.ts (3 tests) 2ms\n ✓ src/critics/utils/artifact_validator.test.ts (2 tests) 8ms\n ✓ src/state/heavy_queue_store.test.ts (1 test) 14ms\n ✓ src/critics/health_check.test.ts (4 tests) 2ms\n ✓ src/critics/base.test.ts (3 tests) 86ms\n ✓ src/critics/flagship_critics.test.ts (3 tests) 74ms\n ✓ src/state/autopilot_store.test.ts (1 test) 343ms\n   ✓ AutopilotStore > records audits and maintains history  342ms\n\n Test Files  7 passed (7)\n      Tests  17 passed (17)\n   Start at  11:25:00\n   Duration  750ms (transform 412ms, setup 0ms, collect 882ms, tests 529ms, environment 1ms, prepare 553ms)\n\n\n== Metrics sanity check ==\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251022T162425Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251022T162438Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251022T162441Z\nRemoved: /Volumes/BigSSD4/nathanielschmiedehaus/Documents/WeatherVane/tmp/metrics/20251022T162443Z\n\n== All test batches completed ==",
  "stderr": "\u001b[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.\u001b[39m\n{\"level\":\"info\",\"message\":\"Running critic command\",\"timestamp\":\"2025-10-22T16:25:01.100Z\",\"critic\":\"TestCritic\",\"cmd\":\"echo test\"}\n{\"level\":\"info\",\"message\":\"Running critic command\",\"timestamp\":\"2025-10-22T16:25:01.118Z\",\"critic\":\"TestCritic\",\"cmd\":\"echo test\"}\n{\"level\":\"info\",\"message\":\"Running critic command\",\"timestamp\":\"2025-10-22T16:25:01.131Z\",\"critic\":\"TestCritic\",\"cmd\":\"echo test\"}\n{\"level\":\"info\",\"message\":\"Running critic command\",\"timestamp\":\"2025-10-22T16:25:01.144Z\",\"critic\":\"TestCritic\",\"cmd\":\"echo test\"}\n{\"level\":\"info\",\"message\":\"Running critic command\",\"timestamp\":\"2025-10-22T16:25:01.173Z\",\"critic\":\"TestCritic\",\"cmd\":\"echo test\"}\n/Volumes/BigSSD4/nathanielschmiedehaus/miniforge3/lib/python3.10/runpy.py:126: RuntimeWarning: 'shared.observability.metrics' found in sys.modules after import of package 'shared.observability', but prior to execution of 'shared.observability.metrics'; this may result in unpredictable behaviour\n  warn(RuntimeWarning(msg))",
  "passed": true,
  "analysis": null,
  "git_sha": "23a9316c2ed8234b99bbd82562f8fa11b78c7fb6",
  "timestamp": "2025-10-22T16:25:01.551Z",
  "identity": {
    "title": "Regression Hunter",
    "mission": "Keep the test suites healthy and ensure deterministic results across flows.",
    "powers": [
      "Surfaces flaky suites and failing assertions with reproduction notes.",
      "Synthesizes minimal repro commands for Autopilot triage."
    ],
    "authority": "blocking",
    "domain": "quality",
    "autonomy_guidance": "Rerun targeted suites automatically; lean on Autopilot only when new failures persist.",
    "preferred_delegates": [
      "Autopilot",
      "Quality Guild"
    ]
  }
}